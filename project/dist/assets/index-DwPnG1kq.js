function tP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function nP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wE={exports:{}},Fh={},_E={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pc=Symbol.for("react.element"),rP=Symbol.for("react.portal"),sP=Symbol.for("react.fragment"),iP=Symbol.for("react.strict_mode"),oP=Symbol.for("react.profiler"),aP=Symbol.for("react.provider"),lP=Symbol.for("react.context"),cP=Symbol.for("react.forward_ref"),uP=Symbol.for("react.suspense"),dP=Symbol.for("react.memo"),hP=Symbol.for("react.lazy"),Dx=Symbol.iterator;function fP(t){return t===null||typeof t!="object"?null:(t=Dx&&t[Dx]||t["@@iterator"],typeof t=="function"?t:null)}var bE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EE=Object.assign,TE={};function va(t,e,n){this.props=t,this.context=e,this.refs=TE,this.updater=n||bE}va.prototype.isReactComponent={};va.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};va.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function IE(){}IE.prototype=va.prototype;function ty(t,e,n){this.props=t,this.context=e,this.refs=TE,this.updater=n||bE}var ny=ty.prototype=new IE;ny.constructor=ty;EE(ny,va.prototype);ny.isPureReactComponent=!0;var Vx=Array.isArray,SE=Object.prototype.hasOwnProperty,ry={current:null},NE={key:!0,ref:!0,__self:!0,__source:!0};function kE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)SE.call(e,r)&&!NE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Pc,type:t,key:i,ref:o,props:s,_owner:ry.current}}function pP(t,e){return{$$typeof:Pc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pc}function mP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lx=/\/+/g;function np(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mP(""+t.key):e.toString(36)}function Zu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pc:case rP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+np(o,0):r,Vx(s)?(n="",t!=null&&(n=t.replace(Lx,"$&/")+"/"),Zu(s,e,n,"",function(u){return u})):s!=null&&(sy(s)&&(s=pP(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Lx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Vx(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+np(i,a);o+=Zu(i,e,n,l,s)}else if(l=fP(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+np(i,a++),o+=Zu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wu(t,e,n){if(t==null)return t;var r=[],s=0;return Zu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function gP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},ed={transition:null},yP={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:ed,ReactCurrentOwner:ry};function CE(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:wu,forEach:function(t,e,n){wu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wu(t,function(){e++}),e},toArray:function(t){return wu(t,function(e){return e})||[]},only:function(t){if(!sy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=va;ge.Fragment=sP;ge.Profiler=oP;ge.PureComponent=ty;ge.StrictMode=iP;ge.Suspense=uP;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yP;ge.act=CE;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=EE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ry.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)SE.call(e,l)&&!NE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Pc,type:t.type,key:s,ref:i,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:lP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aP,_context:t},t.Consumer=t};ge.createElement=kE;ge.createFactory=function(t){var e=kE.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:cP,render:t}};ge.isValidElement=sy;ge.lazy=function(t){return{$$typeof:hP,_payload:{_status:-1,_result:t},_init:gP}};ge.memo=function(t,e){return{$$typeof:dP,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=ed.transition;ed.transition={};try{t()}finally{ed.transition=e}};ge.unstable_act=CE;ge.useCallback=function(t,e){return Gt.current.useCallback(t,e)};ge.useContext=function(t){return Gt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Gt.current.useEffect(t,e)};ge.useId=function(){return Gt.current.useId()};ge.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Gt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};ge.useRef=function(t){return Gt.current.useRef(t)};ge.useState=function(t){return Gt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Gt.current.useTransition()};ge.version="18.3.1";_E.exports=ge;var C=_E.exports;const iy=nP(C),vP=tP({__proto__:null,default:iy},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xP=C,wP=Symbol.for("react.element"),_P=Symbol.for("react.fragment"),bP=Object.prototype.hasOwnProperty,EP=xP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TP={key:!0,ref:!0,__self:!0,__source:!0};function PE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bP.call(e,r)&&!TP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:wP,type:t,key:i,ref:o,props:s,_owner:EP.current}}Fh.Fragment=_P;Fh.jsx=PE;Fh.jsxs=PE;wE.exports=Fh;var c=wE.exports,AE={exports:{}},gn={},RE={exports:{}},jE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,$){var G=z.length;z.push($);e:for(;0<G;){var ee=G-1>>>1,ue=z[ee];if(0<s(ue,$))z[ee]=$,z[G]=ue,G=ee;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var $=z[0],G=z.pop();if(G!==$){z[0]=G;e:for(var ee=0,ue=z.length,xe=ue>>>1;ee<xe;){var yt=2*(ee+1)-1,ht=z[yt],at=yt+1,Jt=z[at];if(0>s(ht,G))at<ue&&0>s(Jt,ht)?(z[ee]=Jt,z[at]=G,ee=at):(z[ee]=ht,z[yt]=G,ee=yt);else if(at<ue&&0>s(Jt,G))z[ee]=Jt,z[at]=G,ee=at;else break e}}return $}function s(z,$){var G=z.sortIndex-$.sortIndex;return G!==0?G:z.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,g=!1,_=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=z)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function I(z){if(w=!1,x(z),!_)if(n(l)!==null)_=!0,fe(j);else{var $=n(u);$!==null&&se(I,$.startTime-z)}}function j(z,$){_=!1,w&&(w=!1,E(b),b=-1),g=!0;var G=p;try{for(x($),f=n(l);f!==null&&(!(f.expirationTime>$)||z&&!R());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,p=f.priorityLevel;var ue=ee(f.expirationTime<=$);$=t.unstable_now(),typeof ue=="function"?f.callback=ue:f===n(l)&&r(l),x($)}else r(l);f=n(l)}if(f!==null)var xe=!0;else{var yt=n(u);yt!==null&&se(I,yt.startTime-$),xe=!1}return xe}finally{f=null,p=G,g=!1}}var D=!1,N=null,b=-1,S=5,P=-1;function R(){return!(t.unstable_now()-P<S)}function V(){if(N!==null){var z=t.unstable_now();P=z;var $=!0;try{$=N(!0,z)}finally{$?A():(D=!1,N=null)}}else D=!1}var A;if(typeof v=="function")A=function(){v(V)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,me=ne.port2;ne.port1.onmessage=V,A=function(){me.postMessage(null)}}else A=function(){T(V,0)};function fe(z){N=z,D||(D=!0,A())}function se(z,$){b=T(function(){z(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,fe(j))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var G=p;p=$;try{return z()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var G=p;p=z;try{return $()}finally{p=G}},t.unstable_scheduleCallback=function(z,$,G){var ee=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,z){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=G+ue,z={id:h++,callback:$,priorityLevel:z,startTime:G,expirationTime:ue,sortIndex:-1},G>ee?(z.sortIndex=G,e(u,z),n(l)===null&&z===n(u)&&(w?(E(b),b=-1):w=!0,se(I,G-ee))):(z.sortIndex=ue,e(l,z),_||g||(_=!0,fe(j))),z},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(z){var $=p;return function(){var G=p;p=$;try{return z.apply(this,arguments)}finally{p=G}}}})(jE);RE.exports=jE;var IP=RE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP=C,fn=IP;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DE=new Set,ql={};function Gi(t,e){Zo(t,e),Zo(t+"Capture",e)}function Zo(t,e){for(ql[t]=e,t=0;t<e.length;t++)DE.add(e[t])}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=Object.prototype.hasOwnProperty,NP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ox={},Mx={};function kP(t){return rm.call(Mx,t)?!0:rm.call(Ox,t)?!1:NP.test(t)?Mx[t]=!0:(Ox[t]=!0,!1)}function CP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function PP(t,e,n,r){if(e===null||typeof e>"u"||CP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var oy=/[\-:]([a-z])/g;function ay(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(oy,ay);St[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(oy,ay);St[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(oy,ay);St[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ly(t,e,n,r){var s=St.hasOwnProperty(e)?St[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(PP(e,n,s,r)&&(n=null),r||s===null?kP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Lr=SP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_u=Symbol.for("react.element"),Io=Symbol.for("react.portal"),So=Symbol.for("react.fragment"),cy=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),VE=Symbol.for("react.provider"),LE=Symbol.for("react.context"),uy=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),om=Symbol.for("react.suspense_list"),dy=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),OE=Symbol.for("react.offscreen"),Fx=Symbol.iterator;function Wa(t){return t===null||typeof t!="object"?null:(t=Fx&&t[Fx]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,rp;function fl(t){if(rp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rp=e&&e[1]||""}return`
`+rp+t}var sp=!1;function ip(t,e){if(!t||sp)return"";sp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{sp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fl(t):""}function AP(t){switch(t.tag){case 5:return fl(t.type);case 16:return fl("Lazy");case 13:return fl("Suspense");case 19:return fl("SuspenseList");case 0:case 2:case 15:return t=ip(t.type,!1),t;case 11:return t=ip(t.type.render,!1),t;case 1:return t=ip(t.type,!0),t;default:return""}}function am(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case So:return"Fragment";case Io:return"Portal";case sm:return"Profiler";case cy:return"StrictMode";case im:return"Suspense";case om:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case LE:return(t.displayName||"Context")+".Consumer";case VE:return(t._context.displayName||"Context")+".Provider";case uy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dy:return e=t.displayName||null,e!==null?e:am(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return am(t(e))}catch{}}return null}function RP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return am(e);case 8:return e===cy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ks(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ME(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jP(t){var e=ME(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bu(t){t._valueTracker||(t._valueTracker=jP(t))}function FE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ME(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lm(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ux(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ks(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function UE(t,e){e=e.checked,e!=null&&ly(t,"checked",e,!1)}function cm(t,e){UE(t,e);var n=ks(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?um(t,e.type,n):e.hasOwnProperty("defaultValue")&&um(t,e.type,ks(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function um(t,e,n){(e!=="number"||Nd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pl=Array.isArray;function $o(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ks(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function dm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $x(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(pl(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ks(n)}}function BE(t,e){var n=ks(e.value),r=ks(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $E(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$E(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Eu,zE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Eu=Eu||document.createElement("div"),Eu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Eu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Tl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DP=["Webkit","ms","Moz","O"];Object.keys(Tl).forEach(function(t){DP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Tl[e]=Tl[t]})});function HE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Tl.hasOwnProperty(t)&&Tl[t]?(""+e).trim():e+"px"}function qE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=HE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var VP=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fm(t,e){if(e){if(VP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mm=null;function hy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gm=null,zo=null,Ho=null;function Hx(t){if(t=jc(t)){if(typeof gm!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Hh(e),gm(t.stateNode,t.type,e))}}function KE(t){zo?Ho?Ho.push(t):Ho=[t]:zo=t}function WE(){if(zo){var t=zo,e=Ho;if(Ho=zo=null,Hx(t),e)for(t=0;t<e.length;t++)Hx(e[t])}}function GE(t,e){return t(e)}function QE(){}var op=!1;function YE(t,e,n){if(op)return t(e,n);op=!0;try{return GE(t,e,n)}finally{op=!1,(zo!==null||Ho!==null)&&(QE(),WE())}}function Wl(t,e){var n=t.stateNode;if(n===null)return null;var r=Hh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var ym=!1;if(Nr)try{var Ga={};Object.defineProperty(Ga,"passive",{get:function(){ym=!0}}),window.addEventListener("test",Ga,Ga),window.removeEventListener("test",Ga,Ga)}catch{ym=!1}function LP(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Il=!1,kd=null,Cd=!1,vm=null,OP={onError:function(t){Il=!0,kd=t}};function MP(t,e,n,r,s,i,o,a,l){Il=!1,kd=null,LP.apply(OP,arguments)}function FP(t,e,n,r,s,i,o,a,l){if(MP.apply(this,arguments),Il){if(Il){var u=kd;Il=!1,kd=null}else throw Error(q(198));Cd||(Cd=!0,vm=u)}}function Qi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function JE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qx(t){if(Qi(t)!==t)throw Error(q(188))}function UP(t){var e=t.alternate;if(!e){if(e=Qi(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return qx(s),t;if(i===r)return qx(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function XE(t){return t=UP(t),t!==null?ZE(t):null}function ZE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ZE(t);if(e!==null)return e;t=t.sibling}return null}var eT=fn.unstable_scheduleCallback,Kx=fn.unstable_cancelCallback,BP=fn.unstable_shouldYield,$P=fn.unstable_requestPaint,et=fn.unstable_now,zP=fn.unstable_getCurrentPriorityLevel,fy=fn.unstable_ImmediatePriority,tT=fn.unstable_UserBlockingPriority,Pd=fn.unstable_NormalPriority,HP=fn.unstable_LowPriority,nT=fn.unstable_IdlePriority,Uh=null,Jn=null;function qP(t){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(Uh,t,void 0,(t.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:GP,KP=Math.log,WP=Math.LN2;function GP(t){return t>>>=0,t===0?32:31-(KP(t)/WP|0)|0}var Tu=64,Iu=4194304;function ml(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ad(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ml(a):(i&=o,i!==0&&(r=ml(i)))}else o=n&~s,o!==0?r=ml(o):i!==0&&(r=ml(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Un(e),s=1<<n,r|=t[n],e&=~s;return r}function QP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Un(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=QP(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function xm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rT(){var t=Tu;return Tu<<=1,!(Tu&4194240)&&(Tu=64),t}function ap(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ac(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Un(e),t[e]=n}function JP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Un(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function py(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Un(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ke=0;function sT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var iT,my,oT,aT,lT,wm=!1,Su=[],hs=null,fs=null,ps=null,Gl=new Map,Ql=new Map,es=[],XP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wx(t,e){switch(t){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":Gl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(e.pointerId)}}function Qa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=jc(e),e!==null&&my(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ZP(t,e,n,r,s){switch(e){case"focusin":return hs=Qa(hs,t,e,n,r,s),!0;case"dragenter":return fs=Qa(fs,t,e,n,r,s),!0;case"mouseover":return ps=Qa(ps,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Gl.set(i,Qa(Gl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ql.set(i,Qa(Ql.get(i)||null,t,e,n,r,s)),!0}return!1}function cT(t){var e=pi(t.target);if(e!==null){var n=Qi(e);if(n!==null){if(e=n.tag,e===13){if(e=JE(n),e!==null){t.blockedOn=e,lT(t.priority,function(){oT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function td(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_m(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mm=r,n.target.dispatchEvent(r),mm=null}else return e=jc(n),e!==null&&my(e),t.blockedOn=n,!1;e.shift()}return!0}function Gx(t,e,n){td(t)&&n.delete(e)}function eA(){wm=!1,hs!==null&&td(hs)&&(hs=null),fs!==null&&td(fs)&&(fs=null),ps!==null&&td(ps)&&(ps=null),Gl.forEach(Gx),Ql.forEach(Gx)}function Ya(t,e){t.blockedOn===e&&(t.blockedOn=null,wm||(wm=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,eA)))}function Yl(t){function e(s){return Ya(s,t)}if(0<Su.length){Ya(Su[0],t);for(var n=1;n<Su.length;n++){var r=Su[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hs!==null&&Ya(hs,t),fs!==null&&Ya(fs,t),ps!==null&&Ya(ps,t),Gl.forEach(e),Ql.forEach(e),n=0;n<es.length;n++)r=es[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<es.length&&(n=es[0],n.blockedOn===null);)cT(n),n.blockedOn===null&&es.shift()}var qo=Lr.ReactCurrentBatchConfig,Rd=!0;function tA(t,e,n,r){var s=ke,i=qo.transition;qo.transition=null;try{ke=1,gy(t,e,n,r)}finally{ke=s,qo.transition=i}}function nA(t,e,n,r){var s=ke,i=qo.transition;qo.transition=null;try{ke=4,gy(t,e,n,r)}finally{ke=s,qo.transition=i}}function gy(t,e,n,r){if(Rd){var s=_m(t,e,n,r);if(s===null)yp(t,e,r,jd,n),Wx(t,r);else if(ZP(s,t,e,n,r))r.stopPropagation();else if(Wx(t,r),e&4&&-1<XP.indexOf(t)){for(;s!==null;){var i=jc(s);if(i!==null&&iT(i),i=_m(t,e,n,r),i===null&&yp(t,e,r,jd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else yp(t,e,r,null,n)}}var jd=null;function _m(t,e,n,r){if(jd=null,t=hy(r),t=pi(t),t!==null)if(e=Qi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=JE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jd=t,null}function uT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zP()){case fy:return 1;case tT:return 4;case Pd:case HP:return 16;case nT:return 536870912;default:return 16}default:return 16}}var ls=null,yy=null,nd=null;function dT(){if(nd)return nd;var t,e=yy,n=e.length,r,s="value"in ls?ls.value:ls.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return nd=s.slice(t,1<r?1-r:void 0)}function rd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nu(){return!0}function Qx(){return!1}function yn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nu:Qx,this.isPropagationStopped=Qx,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nu)},persist:function(){},isPersistent:Nu}),e}var xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vy=yn(xa),Rc=Qe({},xa,{view:0,detail:0}),rA=yn(Rc),lp,cp,Ja,Bh=Qe({},Rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ja&&(Ja&&t.type==="mousemove"?(lp=t.screenX-Ja.screenX,cp=t.screenY-Ja.screenY):cp=lp=0,Ja=t),lp)},movementY:function(t){return"movementY"in t?t.movementY:cp}}),Yx=yn(Bh),sA=Qe({},Bh,{dataTransfer:0}),iA=yn(sA),oA=Qe({},Rc,{relatedTarget:0}),up=yn(oA),aA=Qe({},xa,{animationName:0,elapsedTime:0,pseudoElement:0}),lA=yn(aA),cA=Qe({},xa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uA=yn(cA),dA=Qe({},xa,{data:0}),Jx=yn(dA),hA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pA[t])?!!e[t]:!1}function xy(){return mA}var gA=Qe({},Rc,{key:function(t){if(t.key){var e=hA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xy,charCode:function(t){return t.type==="keypress"?rd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yA=yn(gA),vA=Qe({},Bh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xx=yn(vA),xA=Qe({},Rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xy}),wA=yn(xA),_A=Qe({},xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),bA=yn(_A),EA=Qe({},Bh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TA=yn(EA),IA=[9,13,27,32],wy=Nr&&"CompositionEvent"in window,Sl=null;Nr&&"documentMode"in document&&(Sl=document.documentMode);var SA=Nr&&"TextEvent"in window&&!Sl,hT=Nr&&(!wy||Sl&&8<Sl&&11>=Sl),Zx=" ",ew=!1;function fT(t,e){switch(t){case"keyup":return IA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var No=!1;function NA(t,e){switch(t){case"compositionend":return pT(e);case"keypress":return e.which!==32?null:(ew=!0,Zx);case"textInput":return t=e.data,t===Zx&&ew?null:t;default:return null}}function kA(t,e){if(No)return t==="compositionend"||!wy&&fT(t,e)?(t=dT(),nd=yy=ls=null,No=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hT&&e.locale!=="ko"?null:e.data;default:return null}}var CA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CA[t.type]:e==="textarea"}function mT(t,e,n,r){KE(r),e=Dd(e,"onChange"),0<e.length&&(n=new vy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Nl=null,Jl=null;function PA(t){ST(t,0)}function $h(t){var e=Po(t);if(FE(e))return t}function AA(t,e){if(t==="change")return e}var gT=!1;if(Nr){var dp;if(Nr){var hp="oninput"in document;if(!hp){var nw=document.createElement("div");nw.setAttribute("oninput","return;"),hp=typeof nw.oninput=="function"}dp=hp}else dp=!1;gT=dp&&(!document.documentMode||9<document.documentMode)}function rw(){Nl&&(Nl.detachEvent("onpropertychange",yT),Jl=Nl=null)}function yT(t){if(t.propertyName==="value"&&$h(Jl)){var e=[];mT(e,Jl,t,hy(t)),YE(PA,e)}}function RA(t,e,n){t==="focusin"?(rw(),Nl=e,Jl=n,Nl.attachEvent("onpropertychange",yT)):t==="focusout"&&rw()}function jA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $h(Jl)}function DA(t,e){if(t==="click")return $h(e)}function VA(t,e){if(t==="input"||t==="change")return $h(e)}function LA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:LA;function Xl(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!rm.call(e,s)||!Hn(t[s],e[s]))return!1}return!0}function sw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iw(t,e){var n=sw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sw(n)}}function vT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xT(){for(var t=window,e=Nd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nd(t.document)}return e}function _y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OA(t){var e=xT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vT(n.ownerDocument.documentElement,n)){if(r!==null&&_y(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=iw(n,i);var o=iw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MA=Nr&&"documentMode"in document&&11>=document.documentMode,ko=null,bm=null,kl=null,Em=!1;function ow(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Em||ko==null||ko!==Nd(r)||(r=ko,"selectionStart"in r&&_y(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kl&&Xl(kl,r)||(kl=r,r=Dd(bm,"onSelect"),0<r.length&&(e=new vy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ko)))}function ku(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Co={animationend:ku("Animation","AnimationEnd"),animationiteration:ku("Animation","AnimationIteration"),animationstart:ku("Animation","AnimationStart"),transitionend:ku("Transition","TransitionEnd")},fp={},wT={};Nr&&(wT=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function zh(t){if(fp[t])return fp[t];if(!Co[t])return t;var e=Co[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wT)return fp[t]=e[n];return t}var _T=zh("animationend"),bT=zh("animationiteration"),ET=zh("animationstart"),TT=zh("transitionend"),IT=new Map,aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(t,e){IT.set(t,e),Gi(e,[t])}for(var pp=0;pp<aw.length;pp++){var mp=aw[pp],FA=mp.toLowerCase(),UA=mp[0].toUpperCase()+mp.slice(1);Ms(FA,"on"+UA)}Ms(_T,"onAnimationEnd");Ms(bT,"onAnimationIteration");Ms(ET,"onAnimationStart");Ms("dblclick","onDoubleClick");Ms("focusin","onFocus");Ms("focusout","onBlur");Ms(TT,"onTransitionEnd");Zo("onMouseEnter",["mouseout","mouseover"]);Zo("onMouseLeave",["mouseout","mouseover"]);Zo("onPointerEnter",["pointerout","pointerover"]);Zo("onPointerLeave",["pointerout","pointerover"]);Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BA=new Set("cancel close invalid load scroll toggle".split(" ").concat(gl));function lw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,FP(r,e,void 0,t),t.currentTarget=null}function ST(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;lw(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;lw(s,a,u),i=l}}}if(Cd)throw t=vm,Cd=!1,vm=null,t}function Ve(t,e){var n=e[km];n===void 0&&(n=e[km]=new Set);var r=t+"__bubble";n.has(r)||(NT(e,t,2,!1),n.add(r))}function gp(t,e,n){var r=0;e&&(r|=4),NT(n,t,r,e)}var Cu="_reactListening"+Math.random().toString(36).slice(2);function Zl(t){if(!t[Cu]){t[Cu]=!0,DE.forEach(function(n){n!=="selectionchange"&&(BA.has(n)||gp(n,!1,t),gp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cu]||(e[Cu]=!0,gp("selectionchange",!1,e))}}function NT(t,e,n,r){switch(uT(e)){case 1:var s=tA;break;case 4:s=nA;break;default:s=gy}n=s.bind(null,e,n,t),s=void 0,!ym||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function yp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=pi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}YE(function(){var u=i,h=hy(n),f=[];e:{var p=IT.get(t);if(p!==void 0){var g=vy,_=t;switch(t){case"keypress":if(rd(n)===0)break e;case"keydown":case"keyup":g=yA;break;case"focusin":_="focus",g=up;break;case"focusout":_="blur",g=up;break;case"beforeblur":case"afterblur":g=up;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Yx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=iA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=wA;break;case _T:case bT:case ET:g=lA;break;case TT:g=bA;break;case"scroll":g=rA;break;case"wheel":g=TA;break;case"copy":case"cut":case"paste":g=uA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Xx}var w=(e&4)!==0,T=!w&&t==="scroll",E=w?p!==null?p+"Capture":null:p;w=[];for(var v=u,x;v!==null;){x=v;var I=x.stateNode;if(x.tag===5&&I!==null&&(x=I,E!==null&&(I=Wl(v,E),I!=null&&w.push(ec(v,I,x)))),T)break;v=v.return}0<w.length&&(p=new g(p,_,null,n,h),f.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==mm&&(_=n.relatedTarget||n.fromElement)&&(pi(_)||_[kr]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=u,_=_?pi(_):null,_!==null&&(T=Qi(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=u),g!==_)){if(w=Yx,I="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(w=Xx,I="onPointerLeave",E="onPointerEnter",v="pointer"),T=g==null?p:Po(g),x=_==null?p:Po(_),p=new w(I,v+"leave",g,n,h),p.target=T,p.relatedTarget=x,I=null,pi(h)===u&&(w=new w(E,v+"enter",_,n,h),w.target=x,w.relatedTarget=T,I=w),T=I,g&&_)t:{for(w=g,E=_,v=0,x=w;x;x=fo(x))v++;for(x=0,I=E;I;I=fo(I))x++;for(;0<v-x;)w=fo(w),v--;for(;0<x-v;)E=fo(E),x--;for(;v--;){if(w===E||E!==null&&w===E.alternate)break t;w=fo(w),E=fo(E)}w=null}else w=null;g!==null&&cw(f,p,g,w,!1),_!==null&&T!==null&&cw(f,T,_,w,!0)}}e:{if(p=u?Po(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var j=AA;else if(tw(p))if(gT)j=VA;else{j=jA;var D=RA}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=DA);if(j&&(j=j(t,u))){mT(f,j,n,h);break e}D&&D(t,p,u),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&um(p,"number",p.value)}switch(D=u?Po(u):window,t){case"focusin":(tw(D)||D.contentEditable==="true")&&(ko=D,bm=u,kl=null);break;case"focusout":kl=bm=ko=null;break;case"mousedown":Em=!0;break;case"contextmenu":case"mouseup":case"dragend":Em=!1,ow(f,n,h);break;case"selectionchange":if(MA)break;case"keydown":case"keyup":ow(f,n,h)}var N;if(wy)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else No?fT(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(hT&&n.locale!=="ko"&&(No||b!=="onCompositionStart"?b==="onCompositionEnd"&&No&&(N=dT()):(ls=h,yy="value"in ls?ls.value:ls.textContent,No=!0)),D=Dd(u,b),0<D.length&&(b=new Jx(b,t,null,n,h),f.push({event:b,listeners:D}),N?b.data=N:(N=pT(n),N!==null&&(b.data=N)))),(N=SA?NA(t,n):kA(t,n))&&(u=Dd(u,"onBeforeInput"),0<u.length&&(h=new Jx("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=N))}ST(f,e)})}function ec(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wl(t,n),i!=null&&r.unshift(ec(t,i,s)),i=Wl(t,e),i!=null&&r.push(ec(t,i,s))),t=t.return}return r}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Wl(n,i),l!=null&&o.unshift(ec(n,l,a))):s||(l=Wl(n,i),l!=null&&o.push(ec(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $A=/\r\n?/g,zA=/\u0000|\uFFFD/g;function uw(t){return(typeof t=="string"?t:""+t).replace($A,`
`).replace(zA,"")}function Pu(t,e,n){if(e=uw(e),uw(t)!==e&&n)throw Error(q(425))}function Vd(){}var Tm=null,Im=null;function Sm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nm=typeof setTimeout=="function"?setTimeout:void 0,HA=typeof clearTimeout=="function"?clearTimeout:void 0,dw=typeof Promise=="function"?Promise:void 0,qA=typeof queueMicrotask=="function"?queueMicrotask:typeof dw<"u"?function(t){return dw.resolve(null).then(t).catch(KA)}:Nm;function KA(t){setTimeout(function(){throw t})}function vp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Yl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Yl(e)}function ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wa=Math.random().toString(36).slice(2),Wn="__reactFiber$"+wa,tc="__reactProps$"+wa,kr="__reactContainer$"+wa,km="__reactEvents$"+wa,WA="__reactListeners$"+wa,GA="__reactHandles$"+wa;function pi(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kr]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hw(t);t!==null;){if(n=t[Wn])return n;t=hw(t)}return e}t=n,n=t.parentNode}return null}function jc(t){return t=t[Wn]||t[kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Po(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Hh(t){return t[tc]||null}var Cm=[],Ao=-1;function Fs(t){return{current:t}}function Le(t){0>Ao||(t.current=Cm[Ao],Cm[Ao]=null,Ao--)}function Re(t,e){Ao++,Cm[Ao]=t.current,t.current=e}var Cs={},Ot=Fs(Cs),nn=Fs(!1),Ii=Cs;function ea(t,e){var n=t.type.contextTypes;if(!n)return Cs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rn(t){return t=t.childContextTypes,t!=null}function Ld(){Le(nn),Le(Ot)}function fw(t,e,n){if(Ot.current!==Cs)throw Error(q(168));Re(Ot,e),Re(nn,n)}function kT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,RP(t)||"Unknown",s));return Qe({},n,r)}function Od(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cs,Ii=Ot.current,Re(Ot,t),Re(nn,nn.current),!0}function pw(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=kT(t,e,Ii),r.__reactInternalMemoizedMergedChildContext=t,Le(nn),Le(Ot),Re(Ot,t)):Le(nn),Re(nn,n)}var hr=null,qh=!1,xp=!1;function CT(t){hr===null?hr=[t]:hr.push(t)}function QA(t){qh=!0,CT(t)}function Us(){if(!xp&&hr!==null){xp=!0;var t=0,e=ke;try{var n=hr;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hr=null,qh=!1}catch(s){throw hr!==null&&(hr=hr.slice(t+1)),eT(fy,Us),s}finally{ke=e,xp=!1}}return null}var Ro=[],jo=0,Md=null,Fd=0,_n=[],bn=0,Si=null,pr=1,mr="";function ri(t,e){Ro[jo++]=Fd,Ro[jo++]=Md,Md=t,Fd=e}function PT(t,e,n){_n[bn++]=pr,_n[bn++]=mr,_n[bn++]=Si,Si=t;var r=pr;t=mr;var s=32-Un(r)-1;r&=~(1<<s),n+=1;var i=32-Un(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,pr=1<<32-Un(e)+s|n<<s|r,mr=i+t}else pr=1<<i|n<<s|r,mr=t}function by(t){t.return!==null&&(ri(t,1),PT(t,1,0))}function Ey(t){for(;t===Md;)Md=Ro[--jo],Ro[jo]=null,Fd=Ro[--jo],Ro[jo]=null;for(;t===Si;)Si=_n[--bn],_n[bn]=null,mr=_n[--bn],_n[bn]=null,pr=_n[--bn],_n[bn]=null}var hn=null,un=null,Me=!1,On=null;function AT(t,e){var n=Tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,un=ms(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Si!==null?{id:pr,overflow:mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,un=null,!0):!1;default:return!1}}function Pm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Am(t){if(Me){var e=un;if(e){var n=e;if(!mw(t,e)){if(Pm(t))throw Error(q(418));e=ms(n.nextSibling);var r=hn;e&&mw(t,e)?AT(r,n):(t.flags=t.flags&-4097|2,Me=!1,hn=t)}}else{if(Pm(t))throw Error(q(418));t.flags=t.flags&-4097|2,Me=!1,hn=t}}}function gw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function Au(t){if(t!==hn)return!1;if(!Me)return gw(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sm(t.type,t.memoizedProps)),e&&(e=un)){if(Pm(t))throw RT(),Error(q(418));for(;e;)AT(t,e),e=ms(e.nextSibling)}if(gw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=ms(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=hn?ms(t.stateNode.nextSibling):null;return!0}function RT(){for(var t=un;t;)t=ms(t.nextSibling)}function ta(){un=hn=null,Me=!1}function Ty(t){On===null?On=[t]:On.push(t)}var YA=Lr.ReactCurrentBatchConfig;function Xa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Ru(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yw(t){var e=t._init;return e(t._payload)}function jT(t){function e(E,v){if(t){var x=E.deletions;x===null?(E.deletions=[v],E.flags|=16):x.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function s(E,v){return E=xs(E,v),E.index=0,E.sibling=null,E}function i(E,v,x){return E.index=x,t?(x=E.alternate,x!==null?(x=x.index,x<v?(E.flags|=2,v):x):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,v,x,I){return v===null||v.tag!==6?(v=Sp(x,E.mode,I),v.return=E,v):(v=s(v,x),v.return=E,v)}function l(E,v,x,I){var j=x.type;return j===So?h(E,v,x.props.children,I,x.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Jr&&yw(j)===v.type)?(I=s(v,x.props),I.ref=Xa(E,v,x),I.return=E,I):(I=ud(x.type,x.key,x.props,null,E.mode,I),I.ref=Xa(E,v,x),I.return=E,I)}function u(E,v,x,I){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Np(x,E.mode,I),v.return=E,v):(v=s(v,x.children||[]),v.return=E,v)}function h(E,v,x,I,j){return v===null||v.tag!==7?(v=_i(x,E.mode,I,j),v.return=E,v):(v=s(v,x),v.return=E,v)}function f(E,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Sp(""+v,E.mode,x),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _u:return x=ud(v.type,v.key,v.props,null,E.mode,x),x.ref=Xa(E,null,v),x.return=E,x;case Io:return v=Np(v,E.mode,x),v.return=E,v;case Jr:var I=v._init;return f(E,I(v._payload),x)}if(pl(v)||Wa(v))return v=_i(v,E.mode,x,null),v.return=E,v;Ru(E,v)}return null}function p(E,v,x,I){var j=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:a(E,v,""+x,I);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _u:return x.key===j?l(E,v,x,I):null;case Io:return x.key===j?u(E,v,x,I):null;case Jr:return j=x._init,p(E,v,j(x._payload),I)}if(pl(x)||Wa(x))return j!==null?null:h(E,v,x,I,null);Ru(E,x)}return null}function g(E,v,x,I,j){if(typeof I=="string"&&I!==""||typeof I=="number")return E=E.get(x)||null,a(v,E,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case _u:return E=E.get(I.key===null?x:I.key)||null,l(v,E,I,j);case Io:return E=E.get(I.key===null?x:I.key)||null,u(v,E,I,j);case Jr:var D=I._init;return g(E,v,x,D(I._payload),j)}if(pl(I)||Wa(I))return E=E.get(x)||null,h(v,E,I,j,null);Ru(v,I)}return null}function _(E,v,x,I){for(var j=null,D=null,N=v,b=v=0,S=null;N!==null&&b<x.length;b++){N.index>b?(S=N,N=null):S=N.sibling;var P=p(E,N,x[b],I);if(P===null){N===null&&(N=S);break}t&&N&&P.alternate===null&&e(E,N),v=i(P,v,b),D===null?j=P:D.sibling=P,D=P,N=S}if(b===x.length)return n(E,N),Me&&ri(E,b),j;if(N===null){for(;b<x.length;b++)N=f(E,x[b],I),N!==null&&(v=i(N,v,b),D===null?j=N:D.sibling=N,D=N);return Me&&ri(E,b),j}for(N=r(E,N);b<x.length;b++)S=g(N,E,b,x[b],I),S!==null&&(t&&S.alternate!==null&&N.delete(S.key===null?b:S.key),v=i(S,v,b),D===null?j=S:D.sibling=S,D=S);return t&&N.forEach(function(R){return e(E,R)}),Me&&ri(E,b),j}function w(E,v,x,I){var j=Wa(x);if(typeof j!="function")throw Error(q(150));if(x=j.call(x),x==null)throw Error(q(151));for(var D=j=null,N=v,b=v=0,S=null,P=x.next();N!==null&&!P.done;b++,P=x.next()){N.index>b?(S=N,N=null):S=N.sibling;var R=p(E,N,P.value,I);if(R===null){N===null&&(N=S);break}t&&N&&R.alternate===null&&e(E,N),v=i(R,v,b),D===null?j=R:D.sibling=R,D=R,N=S}if(P.done)return n(E,N),Me&&ri(E,b),j;if(N===null){for(;!P.done;b++,P=x.next())P=f(E,P.value,I),P!==null&&(v=i(P,v,b),D===null?j=P:D.sibling=P,D=P);return Me&&ri(E,b),j}for(N=r(E,N);!P.done;b++,P=x.next())P=g(N,E,b,P.value,I),P!==null&&(t&&P.alternate!==null&&N.delete(P.key===null?b:P.key),v=i(P,v,b),D===null?j=P:D.sibling=P,D=P);return t&&N.forEach(function(V){return e(E,V)}),Me&&ri(E,b),j}function T(E,v,x,I){if(typeof x=="object"&&x!==null&&x.type===So&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case _u:e:{for(var j=x.key,D=v;D!==null;){if(D.key===j){if(j=x.type,j===So){if(D.tag===7){n(E,D.sibling),v=s(D,x.props.children),v.return=E,E=v;break e}}else if(D.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Jr&&yw(j)===D.type){n(E,D.sibling),v=s(D,x.props),v.ref=Xa(E,D,x),v.return=E,E=v;break e}n(E,D);break}else e(E,D);D=D.sibling}x.type===So?(v=_i(x.props.children,E.mode,I,x.key),v.return=E,E=v):(I=ud(x.type,x.key,x.props,null,E.mode,I),I.ref=Xa(E,v,x),I.return=E,E=I)}return o(E);case Io:e:{for(D=x.key;v!==null;){if(v.key===D)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(E,v.sibling),v=s(v,x.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=Np(x,E.mode,I),v.return=E,E=v}return o(E);case Jr:return D=x._init,T(E,v,D(x._payload),I)}if(pl(x))return _(E,v,x,I);if(Wa(x))return w(E,v,x,I);Ru(E,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(E,v.sibling),v=s(v,x),v.return=E,E=v):(n(E,v),v=Sp(x,E.mode,I),v.return=E,E=v),o(E)):n(E,v)}return T}var na=jT(!0),DT=jT(!1),Ud=Fs(null),Bd=null,Do=null,Iy=null;function Sy(){Iy=Do=Bd=null}function Ny(t){var e=Ud.current;Le(Ud),t._currentValue=e}function Rm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ko(t,e){Bd=t,Iy=Do=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(en=!0),t.firstContext=null)}function Cn(t){var e=t._currentValue;if(Iy!==t)if(t={context:t,memoizedValue:e,next:null},Do===null){if(Bd===null)throw Error(q(308));Do=t,Bd.dependencies={lanes:0,firstContext:t}}else Do=Do.next=t;return e}var mi=null;function ky(t){mi===null?mi=[t]:mi.push(t)}function VT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ky(e)):(n.next=s.next,s.next=n),e.interleaved=n,Cr(t,r)}function Cr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function Cy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Cr(t,n)}return s=r.interleaved,s===null?(e.next=e,ky(r)):(e.next=s.next,s.next=e),r.interleaved=e,Cr(t,n)}function sd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,py(t,n)}}function vw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $d(t,e,n,r){var s=t.updateQueue;Xr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=u=l=null,a=i;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,w=a;switch(p=e,g=n,w.tag){case 1:if(_=w.payload,typeof _=="function"){f=_.call(g,f,p);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,p=typeof _=="function"?_.call(g,f,p):_,p==null)break e;f=Qe({},f,p);break e;case 2:Xr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,l=f):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ki|=o,t.lanes=o,t.memoizedState=f}}function xw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var Dc={},Xn=Fs(Dc),nc=Fs(Dc),rc=Fs(Dc);function gi(t){if(t===Dc)throw Error(q(174));return t}function Py(t,e){switch(Re(rc,e),Re(nc,t),Re(Xn,Dc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hm(e,t)}Le(Xn),Re(Xn,e)}function ra(){Le(Xn),Le(nc),Le(rc)}function OT(t){gi(rc.current);var e=gi(Xn.current),n=hm(e,t.type);e!==n&&(Re(nc,t),Re(Xn,n))}function Ay(t){nc.current===t&&(Le(Xn),Le(nc))}var He=Fs(0);function zd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wp=[];function Ry(){for(var t=0;t<wp.length;t++)wp[t]._workInProgressVersionPrimary=null;wp.length=0}var id=Lr.ReactCurrentDispatcher,_p=Lr.ReactCurrentBatchConfig,Ni=0,Ge=null,lt=null,pt=null,Hd=!1,Cl=!1,sc=0,JA=0;function At(){throw Error(q(321))}function jy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function Dy(t,e,n,r,s,i){if(Ni=i,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,id.current=t===null||t.memoizedState===null?tR:nR,t=n(r,s),Cl){i=0;do{if(Cl=!1,sc=0,25<=i)throw Error(q(301));i+=1,pt=lt=null,e.updateQueue=null,id.current=rR,t=n(r,s)}while(Cl)}if(id.current=qd,e=lt!==null&&lt.next!==null,Ni=0,pt=lt=Ge=null,Hd=!1,e)throw Error(q(300));return t}function Vy(){var t=sc!==0;return sc=0,t}function Kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ge.memoizedState=pt=t:pt=pt.next=t,pt}function Pn(){if(lt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=pt===null?Ge.memoizedState:pt.next;if(e!==null)pt=e,lt=t;else{if(t===null)throw Error(q(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},pt===null?Ge.memoizedState=pt=t:pt=pt.next=t}return pt}function ic(t,e){return typeof e=="function"?e(t):e}function bp(t){var e=Pn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=lt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var h=u.lane;if((Ni&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ge.lanes|=h,ki|=h}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Hn(r,e.memoizedState)||(en=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ge.lanes|=i,ki|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ep(t){var e=Pn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Hn(i,e.memoizedState)||(en=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function MT(){}function FT(t,e){var n=Ge,r=Pn(),s=e(),i=!Hn(r.memoizedState,s);if(i&&(r.memoizedState=s,en=!0),r=r.queue,Ly($T.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,oc(9,BT.bind(null,n,r,s,e),void 0,null),mt===null)throw Error(q(349));Ni&30||UT(n,e,s)}return s}function UT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function BT(t,e,n,r){e.value=n,e.getSnapshot=r,zT(e)&&HT(t)}function $T(t,e,n){return n(function(){zT(e)&&HT(t)})}function zT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function HT(t){var e=Cr(t,1);e!==null&&Bn(e,t,1,-1)}function ww(t){var e=Kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:t},e.queue=t,t=t.dispatch=eR.bind(null,Ge,t),[e.memoizedState,t]}function oc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qT(){return Pn().memoizedState}function od(t,e,n,r){var s=Kn();Ge.flags|=t,s.memoizedState=oc(1|e,n,void 0,r===void 0?null:r)}function Kh(t,e,n,r){var s=Pn();r=r===void 0?null:r;var i=void 0;if(lt!==null){var o=lt.memoizedState;if(i=o.destroy,r!==null&&jy(r,o.deps)){s.memoizedState=oc(e,n,i,r);return}}Ge.flags|=t,s.memoizedState=oc(1|e,n,i,r)}function _w(t,e){return od(8390656,8,t,e)}function Ly(t,e){return Kh(2048,8,t,e)}function KT(t,e){return Kh(4,2,t,e)}function WT(t,e){return Kh(4,4,t,e)}function GT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function QT(t,e,n){return n=n!=null?n.concat([t]):null,Kh(4,4,GT.bind(null,e,t),n)}function Oy(){}function YT(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function JT(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function XT(t,e,n){return Ni&21?(Hn(n,e)||(n=rT(),Ge.lanes|=n,ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=n)}function XA(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=_p.transition;_p.transition={};try{t(!1),e()}finally{ke=n,_p.transition=r}}function ZT(){return Pn().memoizedState}function ZA(t,e,n){var r=vs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},eI(t))tI(e,n);else if(n=VT(t,e,n,r),n!==null){var s=qt();Bn(n,t,r,s),nI(n,e,r)}}function eR(t,e,n){var r=vs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(eI(t))tI(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Hn(a,o)){var l=e.interleaved;l===null?(s.next=s,ky(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=VT(t,e,s,r),n!==null&&(s=qt(),Bn(n,t,r,s),nI(n,e,r))}}function eI(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function tI(t,e){Cl=Hd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function nI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,py(t,n)}}var qd={readContext:Cn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},tR={readContext:Cn,useCallback:function(t,e){return Kn().memoizedState=[t,e===void 0?null:e],t},useContext:Cn,useEffect:_w,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,od(4194308,4,GT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return od(4194308,4,t,e)},useInsertionEffect:function(t,e){return od(4,2,t,e)},useMemo:function(t,e){var n=Kn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ZA.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=Kn();return t={current:t},e.memoizedState=t},useState:ww,useDebugValue:Oy,useDeferredValue:function(t){return Kn().memoizedState=t},useTransition:function(){var t=ww(!1),e=t[0];return t=XA.bind(null,t[1]),Kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,s=Kn();if(Me){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),mt===null)throw Error(q(349));Ni&30||UT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,_w($T.bind(null,r,i,t),[t]),r.flags|=2048,oc(9,BT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Kn(),e=mt.identifierPrefix;if(Me){var n=mr,r=pr;n=(r&~(1<<32-Un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=sc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=JA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nR={readContext:Cn,useCallback:YT,useContext:Cn,useEffect:Ly,useImperativeHandle:QT,useInsertionEffect:KT,useLayoutEffect:WT,useMemo:JT,useReducer:bp,useRef:qT,useState:function(){return bp(ic)},useDebugValue:Oy,useDeferredValue:function(t){var e=Pn();return XT(e,lt.memoizedState,t)},useTransition:function(){var t=bp(ic)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:MT,useSyncExternalStore:FT,useId:ZT,unstable_isNewReconciler:!1},rR={readContext:Cn,useCallback:YT,useContext:Cn,useEffect:Ly,useImperativeHandle:QT,useInsertionEffect:KT,useLayoutEffect:WT,useMemo:JT,useReducer:Ep,useRef:qT,useState:function(){return Ep(ic)},useDebugValue:Oy,useDeferredValue:function(t){var e=Pn();return lt===null?e.memoizedState=t:XT(e,lt.memoizedState,t)},useTransition:function(){var t=Ep(ic)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:MT,useSyncExternalStore:FT,useId:ZT,unstable_isNewReconciler:!1};function Vn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wh={isMounted:function(t){return(t=t._reactInternals)?Qi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qt(),s=vs(t),i=_r(r,s);i.payload=e,n!=null&&(i.callback=n),e=gs(t,i,s),e!==null&&(Bn(e,t,s,r),sd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qt(),s=vs(t),i=_r(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gs(t,i,s),e!==null&&(Bn(e,t,s,r),sd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),r=vs(t),s=_r(n,r);s.tag=2,e!=null&&(s.callback=e),e=gs(t,s,r),e!==null&&(Bn(e,t,r,n),sd(e,t,r))}};function bw(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Xl(n,r)||!Xl(s,i):!0}function rI(t,e,n){var r=!1,s=Cs,i=e.contextType;return typeof i=="object"&&i!==null?i=Cn(i):(s=rn(e)?Ii:Ot.current,r=e.contextTypes,i=(r=r!=null)?ea(t,s):Cs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ew(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wh.enqueueReplaceState(e,e.state,null)}function Dm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Cy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Cn(i):(i=rn(e)?Ii:Ot.current,s.context=ea(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(jm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wh.enqueueReplaceState(s,s.state,null),$d(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function sa(t,e){try{var n="",r=e;do n+=AP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Tp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sR=typeof WeakMap=="function"?WeakMap:Map;function sI(t,e,n){n=_r(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wd||(Wd=!0,qm=r),Vm(t,e)},n}function iI(t,e,n){n=_r(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Vm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Vm(t,e),typeof r!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Tw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sR;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=vR.bind(null,t,e,n),e.then(t,t))}function Iw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_r(-1,1),e.tag=2,gs(n,e,1))),n.lanes|=1),t)}var iR=Lr.ReactCurrentOwner,en=!1;function $t(t,e,n,r){e.child=t===null?DT(e,null,n,r):na(e,t.child,n,r)}function Nw(t,e,n,r,s){n=n.render;var i=e.ref;return Ko(e,s),r=Dy(t,e,n,r,i,s),n=Vy(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pr(t,e,s)):(Me&&n&&by(e),e.flags|=1,$t(t,e,r,s),e.child)}function kw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!qy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,oI(t,e,i,r,s)):(t=ud(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xl,n(o,r)&&t.ref===e.ref)return Pr(t,e,s)}return e.flags|=1,t=xs(i,r),t.ref=e.ref,t.return=e,e.child=t}function oI(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Xl(i,r)&&t.ref===e.ref)if(en=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(en=!0);else return e.lanes=t.lanes,Pr(t,e,s)}return Lm(t,e,n,r,s)}function aI(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Lo,cn),cn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(Lo,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Re(Lo,cn),cn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Re(Lo,cn),cn|=r;return $t(t,e,s,n),e.child}function lI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lm(t,e,n,r,s){var i=rn(n)?Ii:Ot.current;return i=ea(e,i),Ko(e,s),n=Dy(t,e,n,r,i,s),r=Vy(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pr(t,e,s)):(Me&&r&&by(e),e.flags|=1,$t(t,e,n,s),e.child)}function Cw(t,e,n,r,s){if(rn(n)){var i=!0;Od(e)}else i=!1;if(Ko(e,s),e.stateNode===null)ad(t,e),rI(e,n,r),Dm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Cn(u):(u=rn(n)?Ii:Ot.current,u=ea(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Ew(e,o,r,u),Xr=!1;var p=e.memoizedState;o.state=p,$d(e,r,o,s),l=e.memoizedState,a!==r||p!==l||nn.current||Xr?(typeof h=="function"&&(jm(e,n,h,r),l=e.memoizedState),(a=Xr||bw(e,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,LT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Vn(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Cn(l):(l=rn(n)?Ii:Ot.current,l=ea(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&Ew(e,o,r,l),Xr=!1,p=e.memoizedState,o.state=p,$d(e,r,o,s);var _=e.memoizedState;a!==f||p!==_||nn.current||Xr?(typeof g=="function"&&(jm(e,n,g,r),_=e.memoizedState),(u=Xr||bw(e,n,u,r,p,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Om(t,e,n,r,i,s)}function Om(t,e,n,r,s,i){lI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&pw(e,n,!1),Pr(t,e,i);r=e.stateNode,iR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=na(e,t.child,null,i),e.child=na(e,null,a,i)):$t(t,e,a,i),e.memoizedState=r.state,s&&pw(e,n,!0),e.child}function cI(t){var e=t.stateNode;e.pendingContext?fw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fw(t,e.context,!1),Py(t,e.containerInfo)}function Pw(t,e,n,r,s){return ta(),Ty(s),e.flags|=256,$t(t,e,n,r),e.child}var Mm={dehydrated:null,treeContext:null,retryLane:0};function Fm(t){return{baseLanes:t,cachePool:null,transitions:null}}function uI(t,e,n){var r=e.pendingProps,s=He.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Re(He,s&1),t===null)return Am(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Yh(o,r,0,null),t=_i(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Fm(n),e.memoizedState=Mm,t):My(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return oR(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=xs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=xs(a,i):(i=_i(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Fm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Mm,r}return i=t.child,t=i.sibling,r=xs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function My(t,e){return e=Yh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ju(t,e,n,r){return r!==null&&Ty(r),na(e,t.child,null,n),t=My(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oR(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Tp(Error(q(422))),ju(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Yh({mode:"visible",children:r.children},s,0,null),i=_i(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&na(e,t.child,null,o),e.child.memoizedState=Fm(o),e.memoizedState=Mm,i);if(!(e.mode&1))return ju(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(q(419)),r=Tp(i,r,void 0),ju(t,e,o,r)}if(a=(o&t.childLanes)!==0,en||a){if(r=mt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Cr(t,s),Bn(r,t,s,-1))}return Hy(),r=Tp(Error(q(421))),ju(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=xR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,un=ms(s.nextSibling),hn=e,Me=!0,On=null,t!==null&&(_n[bn++]=pr,_n[bn++]=mr,_n[bn++]=Si,pr=t.id,mr=t.overflow,Si=e),e=My(e,r.children),e.flags|=4096,e)}function Aw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rm(t.return,e,n)}function Ip(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function dI(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if($t(t,e,r.children,n),r=He.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Aw(t,n,e);else if(t.tag===19)Aw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(He,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&zd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ip(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ip(e,!0,n,null,i);break;case"together":Ip(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ad(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=xs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function aR(t,e,n){switch(e.tag){case 3:cI(e),ta();break;case 5:OT(e);break;case 1:rn(e.type)&&Od(e);break;case 4:Py(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Re(Ud,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?uI(t,e,n):(Re(He,He.current&1),t=Pr(t,e,n),t!==null?t.sibling:null);Re(He,He.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return dI(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(He,He.current),r)break;return null;case 22:case 23:return e.lanes=0,aI(t,e,n)}return Pr(t,e,n)}var hI,Um,fI,pI;hI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Um=function(){};fI=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,gi(Xn.current);var i=null;switch(n){case"input":s=lm(t,s),r=lm(t,r),i=[];break;case"select":s=Qe({},s,{value:void 0}),r=Qe({},r,{value:void 0}),i=[];break;case"textarea":s=dm(t,s),r=dm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vd)}fm(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ql.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ql.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ve("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};pI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Za(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function lR(t,e,n){var r=e.pendingProps;switch(Ey(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(e),null;case 1:return rn(e.type)&&Ld(),Rt(e),null;case 3:return r=e.stateNode,ra(),Le(nn),Le(Ot),Ry(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Au(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Gm(On),On=null))),Um(t,e),Rt(e),null;case 5:Ay(e);var s=gi(rc.current);if(n=e.type,t!==null&&e.stateNode!=null)fI(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Rt(e),null}if(t=gi(Xn.current),Au(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Wn]=e,r[tc]=i,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(s=0;s<gl.length;s++)Ve(gl[s],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Ux(r,i),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ve("invalid",r);break;case"textarea":$x(r,i),Ve("invalid",r)}fm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Pu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Pu(r.textContent,a,t),s=["children",""+a]):ql.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":bu(r),Bx(r,i,!0);break;case"textarea":bu(r),zx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Vd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$E(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wn]=e,t[tc]=r,hI(t,e,!1,!1),e.stateNode=t;e:{switch(o=pm(n,r),n){case"dialog":Ve("cancel",t),Ve("close",t),s=r;break;case"iframe":case"object":case"embed":Ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<gl.length;s++)Ve(gl[s],t);s=r;break;case"source":Ve("error",t),s=r;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),s=r;break;case"details":Ve("toggle",t),s=r;break;case"input":Ux(t,r),s=lm(t,r),Ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Qe({},r,{value:void 0}),Ve("invalid",t);break;case"textarea":$x(t,r),s=dm(t,r),Ve("invalid",t);break;default:s=r}fm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?qE(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&zE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Kl(t,l):typeof l=="number"&&Kl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ql.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ve("scroll",t):l!=null&&ly(t,i,l,o))}switch(n){case"input":bu(t),Bx(t,r,!1);break;case"textarea":bu(t),zx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ks(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$o(t,!!r.multiple,i,!1):r.defaultValue!=null&&$o(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Vd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rt(e),null;case 6:if(t&&e.stateNode!=null)pI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=gi(rc.current),gi(Xn.current),Au(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wn]=e,(i=r.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:Pu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wn]=e,e.stateNode=r}return Rt(e),null;case 13:if(Le(He),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&un!==null&&e.mode&1&&!(e.flags&128))RT(),ta(),e.flags|=98560,i=!1;else if(i=Au(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[Wn]=e}else ta(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rt(e),i=!1}else On!==null&&(Gm(On),On=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?ct===0&&(ct=3):Hy())),e.updateQueue!==null&&(e.flags|=4),Rt(e),null);case 4:return ra(),Um(t,e),t===null&&Zl(e.stateNode.containerInfo),Rt(e),null;case 10:return Ny(e.type._context),Rt(e),null;case 17:return rn(e.type)&&Ld(),Rt(e),null;case 19:if(Le(He),i=e.memoizedState,i===null)return Rt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Za(i,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zd(t),o!==null){for(e.flags|=128,Za(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(He,He.current&1|2),e.child}t=t.sibling}i.tail!==null&&et()>ia&&(e.flags|=128,r=!0,Za(i,!1),e.lanes=4194304)}else{if(!r)if(t=zd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Za(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Me)return Rt(e),null}else 2*et()-i.renderingStartTime>ia&&n!==1073741824&&(e.flags|=128,r=!0,Za(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=et(),e.sibling=null,n=He.current,Re(He,r?n&1|2:n&1),e):(Rt(e),null);case 22:case 23:return zy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?cn&1073741824&&(Rt(e),e.subtreeFlags&6&&(e.flags|=8192)):Rt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function cR(t,e){switch(Ey(e),e.tag){case 1:return rn(e.type)&&Ld(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ra(),Le(nn),Le(Ot),Ry(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ay(e),null;case 13:if(Le(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));ta()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(He),null;case 4:return ra(),null;case 10:return Ny(e.type._context),null;case 22:case 23:return zy(),null;case 24:return null;default:return null}}var Du=!1,Vt=!1,uR=typeof WeakSet=="function"?WeakSet:Set,X=null;function Vo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function Bm(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var Rw=!1;function dR(t,e){if(Tm=Rd,t=xT(),_y(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++u===s&&(a=o),p===i&&++h===r&&(l=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Im={focusedElem:t,selectionRange:n},Rd=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,T=_.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?w:Vn(e.type,w),T);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(I){Xe(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return _=Rw,Rw=!1,_}function Pl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Bm(e,n,i)}s=s.next}while(s!==r)}}function Gh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $m(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mI(t){var e=t.alternate;e!==null&&(t.alternate=null,mI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[tc],delete e[km],delete e[WA],delete e[GA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gI(t){return t.tag===5||t.tag===3||t.tag===4}function jw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vd));else if(r!==4&&(t=t.child,t!==null))for(zm(t,e,n),t=t.sibling;t!==null;)zm(t,e,n),t=t.sibling}function Hm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hm(t,e,n),t=t.sibling;t!==null;)Hm(t,e,n),t=t.sibling}var xt=null,Ln=!1;function Kr(t,e,n){for(n=n.child;n!==null;)yI(t,e,n),n=n.sibling}function yI(t,e,n){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(Uh,n)}catch{}switch(n.tag){case 5:Vt||Vo(n,e);case 6:var r=xt,s=Ln;xt=null,Kr(t,e,n),xt=r,Ln=s,xt!==null&&(Ln?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(Ln?(t=xt,n=n.stateNode,t.nodeType===8?vp(t.parentNode,n):t.nodeType===1&&vp(t,n),Yl(t)):vp(xt,n.stateNode));break;case 4:r=xt,s=Ln,xt=n.stateNode.containerInfo,Ln=!0,Kr(t,e,n),xt=r,Ln=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Bm(n,e,o),s=s.next}while(s!==r)}Kr(t,e,n);break;case 1:if(!Vt&&(Vo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xe(n,e,a)}Kr(t,e,n);break;case 21:Kr(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,Kr(t,e,n),Vt=r):Kr(t,e,n);break;default:Kr(t,e,n)}}function Dw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uR),e.forEach(function(r){var s=wR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xt=a.stateNode,Ln=!1;break e;case 3:xt=a.stateNode.containerInfo,Ln=!0;break e;case 4:xt=a.stateNode.containerInfo,Ln=!0;break e}a=a.return}if(xt===null)throw Error(q(160));yI(i,o,s),xt=null,Ln=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Xe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vI(e,t),e=e.sibling}function vI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),qn(t),r&4){try{Pl(3,t,t.return),Gh(3,t)}catch(w){Xe(t,t.return,w)}try{Pl(5,t,t.return)}catch(w){Xe(t,t.return,w)}}break;case 1:Dn(e,t),qn(t),r&512&&n!==null&&Vo(n,n.return);break;case 5:if(Dn(e,t),qn(t),r&512&&n!==null&&Vo(n,n.return),t.flags&32){var s=t.stateNode;try{Kl(s,"")}catch(w){Xe(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&UE(s,i),pm(a,o);var u=pm(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?qE(s,f):h==="dangerouslySetInnerHTML"?zE(s,f):h==="children"?Kl(s,f):ly(s,h,f,u)}switch(a){case"input":cm(s,i);break;case"textarea":BE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?$o(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?$o(s,!!i.multiple,i.defaultValue,!0):$o(s,!!i.multiple,i.multiple?[]:"",!1))}s[tc]=i}catch(w){Xe(t,t.return,w)}}break;case 6:if(Dn(e,t),qn(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){Xe(t,t.return,w)}}break;case 3:if(Dn(e,t),qn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yl(e.containerInfo)}catch(w){Xe(t,t.return,w)}break;case 4:Dn(e,t),qn(t);break;case 13:Dn(e,t),qn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(By=et())),r&4&&Dw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(u=Vt)||h,Dn(e,t),Vt=u):Dn(e,t),qn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(f=X=h;X!==null;){switch(p=X,g=p.child,p.tag){case 0:case 11:case 14:case 15:Pl(4,p,p.return);break;case 1:Vo(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(w){Xe(r,n,w)}}break;case 5:Vo(p,p.return);break;case 22:if(p.memoizedState!==null){Lw(f);continue}}g!==null?(g.return=p,X=g):Lw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=HE("display",o))}catch(w){Xe(t,t.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){Xe(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Dn(e,t),qn(t),r&4&&Dw(t);break;case 21:break;default:Dn(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gI(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Kl(s,""),r.flags&=-33);var i=jw(t);Hm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=jw(t);zm(t,a,o);break;default:throw Error(q(161))}}catch(l){Xe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hR(t,e,n){X=t,xI(t)}function xI(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Du;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Vt;a=Du;var u=Vt;if(Du=o,(Vt=l)&&!u)for(X=s;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?Ow(s):l!==null?(l.return=o,X=l):Ow(s);for(;i!==null;)X=i,xI(i),i=i.sibling;X=s,Du=a,Vt=u}Vw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):Vw(t)}}function Vw(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||Gh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Vn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&xw(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Yl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Vt||e.flags&512&&$m(e)}catch(p){Xe(e,e.return,p)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Lw(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function Ow(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gh(4,e)}catch(l){Xe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Xe(e,s,l)}}var i=e.return;try{$m(e)}catch(l){Xe(e,i,l)}break;case 5:var o=e.return;try{$m(e)}catch(l){Xe(e,o,l)}}}catch(l){Xe(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var fR=Math.ceil,Kd=Lr.ReactCurrentDispatcher,Fy=Lr.ReactCurrentOwner,Sn=Lr.ReactCurrentBatchConfig,be=0,mt=null,it=null,Et=0,cn=0,Lo=Fs(0),ct=0,ac=null,ki=0,Qh=0,Uy=0,Al=null,Zt=null,By=0,ia=1/0,dr=null,Wd=!1,qm=null,ys=null,Vu=!1,cs=null,Gd=0,Rl=0,Km=null,ld=-1,cd=0;function qt(){return be&6?et():ld!==-1?ld:ld=et()}function vs(t){return t.mode&1?be&2&&Et!==0?Et&-Et:YA.transition!==null?(cd===0&&(cd=rT()),cd):(t=ke,t!==0||(t=window.event,t=t===void 0?16:uT(t.type)),t):1}function Bn(t,e,n,r){if(50<Rl)throw Rl=0,Km=null,Error(q(185));Ac(t,n,r),(!(be&2)||t!==mt)&&(t===mt&&(!(be&2)&&(Qh|=n),ct===4&&ts(t,Et)),sn(t,r),n===1&&be===0&&!(e.mode&1)&&(ia=et()+500,qh&&Us()))}function sn(t,e){var n=t.callbackNode;YP(t,e);var r=Ad(t,t===mt?Et:0);if(r===0)n!==null&&Kx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Kx(n),e===1)t.tag===0?QA(Mw.bind(null,t)):CT(Mw.bind(null,t)),qA(function(){!(be&6)&&Us()}),n=null;else{switch(sT(r)){case 1:n=fy;break;case 4:n=tT;break;case 16:n=Pd;break;case 536870912:n=nT;break;default:n=Pd}n=NI(n,wI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wI(t,e){if(ld=-1,cd=0,be&6)throw Error(q(327));var n=t.callbackNode;if(Wo()&&t.callbackNode!==n)return null;var r=Ad(t,t===mt?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qd(t,r);else{e=r;var s=be;be|=2;var i=bI();(mt!==t||Et!==e)&&(dr=null,ia=et()+500,wi(t,e));do try{gR();break}catch(a){_I(t,a)}while(!0);Sy(),Kd.current=i,be=s,it!==null?e=0:(mt=null,Et=0,e=ct)}if(e!==0){if(e===2&&(s=xm(t),s!==0&&(r=s,e=Wm(t,s))),e===1)throw n=ac,wi(t,0),ts(t,r),sn(t,et()),n;if(e===6)ts(t,r);else{if(s=t.current.alternate,!(r&30)&&!pR(s)&&(e=Qd(t,r),e===2&&(i=xm(t),i!==0&&(r=i,e=Wm(t,i))),e===1))throw n=ac,wi(t,0),ts(t,r),sn(t,et()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:si(t,Zt,dr);break;case 3:if(ts(t,r),(r&130023424)===r&&(e=By+500-et(),10<e)){if(Ad(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Nm(si.bind(null,t,Zt,dr),e);break}si(t,Zt,dr);break;case 4:if(ts(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Un(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fR(r/1960))-r,10<r){t.timeoutHandle=Nm(si.bind(null,t,Zt,dr),r);break}si(t,Zt,dr);break;case 5:si(t,Zt,dr);break;default:throw Error(q(329))}}}return sn(t,et()),t.callbackNode===n?wI.bind(null,t):null}function Wm(t,e){var n=Al;return t.current.memoizedState.isDehydrated&&(wi(t,e).flags|=256),t=Qd(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&Gm(e)),t}function Gm(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function pR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ts(t,e){for(e&=~Uy,e&=~Qh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Un(e),r=1<<n;t[n]=-1,e&=~r}}function Mw(t){if(be&6)throw Error(q(327));Wo();var e=Ad(t,0);if(!(e&1))return sn(t,et()),null;var n=Qd(t,e);if(t.tag!==0&&n===2){var r=xm(t);r!==0&&(e=r,n=Wm(t,r))}if(n===1)throw n=ac,wi(t,0),ts(t,e),sn(t,et()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,si(t,Zt,dr),sn(t,et()),null}function $y(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(ia=et()+500,qh&&Us())}}function Ci(t){cs!==null&&cs.tag===0&&!(be&6)&&Wo();var e=be;be|=1;var n=Sn.transition,r=ke;try{if(Sn.transition=null,ke=1,t)return t()}finally{ke=r,Sn.transition=n,be=e,!(be&6)&&Us()}}function zy(){cn=Lo.current,Le(Lo)}function wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,HA(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(Ey(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ld();break;case 3:ra(),Le(nn),Le(Ot),Ry();break;case 5:Ay(r);break;case 4:ra();break;case 13:Le(He);break;case 19:Le(He);break;case 10:Ny(r.type._context);break;case 22:case 23:zy()}n=n.return}if(mt=t,it=t=xs(t.current,null),Et=cn=e,ct=0,ac=null,Uy=Qh=ki=0,Zt=Al=null,mi!==null){for(e=0;e<mi.length;e++)if(n=mi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}mi=null}return t}function _I(t,e){do{var n=it;try{if(Sy(),id.current=qd,Hd){for(var r=Ge.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hd=!1}if(Ni=0,pt=lt=Ge=null,Cl=!1,sc=0,Fy.current=null,n===null||n.return===null){ct=1,ac=e,it=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Et,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Iw(o);if(g!==null){g.flags&=-257,Sw(g,o,a,i,e),g.mode&1&&Tw(i,u,e),e=g,l=u;var _=e.updateQueue;if(_===null){var w=new Set;w.add(l),e.updateQueue=w}else _.add(l);break e}else{if(!(e&1)){Tw(i,u,e),Hy();break e}l=Error(q(426))}}else if(Me&&a.mode&1){var T=Iw(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Sw(T,o,a,i,e),Ty(sa(l,a));break e}}i=l=sa(l,a),ct!==4&&(ct=2),Al===null?Al=[i]:Al.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=sI(i,l,e);vw(i,E);break e;case 1:a=l;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ys===null||!ys.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=iI(i,a,e);vw(i,I);break e}}i=i.return}while(i!==null)}TI(n)}catch(j){e=j,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function bI(){var t=Kd.current;return Kd.current=qd,t===null?qd:t}function Hy(){(ct===0||ct===3||ct===2)&&(ct=4),mt===null||!(ki&268435455)&&!(Qh&268435455)||ts(mt,Et)}function Qd(t,e){var n=be;be|=2;var r=bI();(mt!==t||Et!==e)&&(dr=null,wi(t,e));do try{mR();break}catch(s){_I(t,s)}while(!0);if(Sy(),be=n,Kd.current=r,it!==null)throw Error(q(261));return mt=null,Et=0,ct}function mR(){for(;it!==null;)EI(it)}function gR(){for(;it!==null&&!BP();)EI(it)}function EI(t){var e=SI(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?TI(t):it=e,Fy.current=null}function TI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cR(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,it=null;return}}else if(n=lR(n,e,cn),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ct===0&&(ct=5)}function si(t,e,n){var r=ke,s=Sn.transition;try{Sn.transition=null,ke=1,yR(t,e,n,r)}finally{Sn.transition=s,ke=r}return null}function yR(t,e,n,r){do Wo();while(cs!==null);if(be&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(JP(t,i),t===mt&&(it=mt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vu||(Vu=!0,NI(Pd,function(){return Wo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Sn.transition,Sn.transition=null;var o=ke;ke=1;var a=be;be|=4,Fy.current=null,dR(t,n),vI(n,t),OA(Im),Rd=!!Tm,Im=Tm=null,t.current=n,hR(n),$P(),be=a,ke=o,Sn.transition=i}else t.current=n;if(Vu&&(Vu=!1,cs=t,Gd=s),i=t.pendingLanes,i===0&&(ys=null),qP(n.stateNode),sn(t,et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wd)throw Wd=!1,t=qm,qm=null,t;return Gd&1&&t.tag!==0&&Wo(),i=t.pendingLanes,i&1?t===Km?Rl++:(Rl=0,Km=t):Rl=0,Us(),null}function Wo(){if(cs!==null){var t=sT(Gd),e=Sn.transition,n=ke;try{if(Sn.transition=null,ke=16>t?16:t,cs===null)var r=!1;else{if(t=cs,cs=null,Gd=0,be&6)throw Error(q(331));var s=be;for(be|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(X=u;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:Pl(8,h,i)}var f=h.child;if(f!==null)f.return=h,X=f;else for(;X!==null;){h=X;var p=h.sibling,g=h.return;if(mI(h),h===u){X=null;break}if(p!==null){p.return=g,X=p;break}X=g}}}var _=i.alternate;if(_!==null){var w=_.child;if(w!==null){_.child=null;do{var T=w.sibling;w.sibling=null,w=T}while(w!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Pl(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,X=E;break e}X=i.return}}var v=t.current;for(X=v;X!==null;){o=X;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,X=x;else e:for(o=v;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gh(9,a)}}catch(j){Xe(a,a.return,j)}if(a===o){X=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,X=I;break e}X=a.return}}if(be=s,Us(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(Uh,t)}catch{}r=!0}return r}finally{ke=n,Sn.transition=e}}return!1}function Fw(t,e,n){e=sa(n,e),e=sI(t,e,1),t=gs(t,e,1),e=qt(),t!==null&&(Ac(t,1,e),sn(t,e))}function Xe(t,e,n){if(t.tag===3)Fw(t,t,n);else for(;e!==null;){if(e.tag===3){Fw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ys===null||!ys.has(r))){t=sa(n,t),t=iI(e,t,1),e=gs(e,t,1),t=qt(),e!==null&&(Ac(e,1,t),sn(e,t));break}}e=e.return}}function vR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(Et&n)===n&&(ct===4||ct===3&&(Et&130023424)===Et&&500>et()-By?wi(t,0):Uy|=n),sn(t,e)}function II(t,e){e===0&&(t.mode&1?(e=Iu,Iu<<=1,!(Iu&130023424)&&(Iu=4194304)):e=1);var n=qt();t=Cr(t,e),t!==null&&(Ac(t,e,n),sn(t,n))}function xR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),II(t,n)}function wR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),II(t,n)}var SI;SI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)en=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return en=!1,aR(t,e,n);en=!!(t.flags&131072)}else en=!1,Me&&e.flags&1048576&&PT(e,Fd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ad(t,e),t=e.pendingProps;var s=ea(e,Ot.current);Ko(e,n),s=Dy(null,e,r,t,s,n);var i=Vy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(r)?(i=!0,Od(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cy(e),s.updater=Wh,e.stateNode=s,s._reactInternals=e,Dm(e,r,t,n),e=Om(null,e,r,!0,i,n)):(e.tag=0,Me&&i&&by(e),$t(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ad(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=bR(r),t=Vn(r,t),s){case 0:e=Lm(null,e,r,t,n);break e;case 1:e=Cw(null,e,r,t,n);break e;case 11:e=Nw(null,e,r,t,n);break e;case 14:e=kw(null,e,r,Vn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),Lm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),Cw(t,e,r,s,n);case 3:e:{if(cI(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,LT(t,e),$d(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=sa(Error(q(423)),e),e=Pw(t,e,r,n,s);break e}else if(r!==s){s=sa(Error(q(424)),e),e=Pw(t,e,r,n,s);break e}else for(un=ms(e.stateNode.containerInfo.firstChild),hn=e,Me=!0,On=null,n=DT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ta(),r===s){e=Pr(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return OT(e),t===null&&Am(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Sm(r,s)?o=null:i!==null&&Sm(r,i)&&(e.flags|=32),lI(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&Am(e),null;case 13:return uI(t,e,n);case 4:return Py(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=na(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),Nw(t,e,r,s,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Re(Ud,r._currentValue),r._currentValue=o,i!==null)if(Hn(i.value,o)){if(i.children===s.children&&!nn.current){e=Pr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=_r(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Rm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Rm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$t(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ko(e,n),s=Cn(s),r=r(s),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,s=Vn(r,e.pendingProps),s=Vn(r.type,s),kw(t,e,r,s,n);case 15:return oI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),ad(t,e),e.tag=1,rn(r)?(t=!0,Od(e)):t=!1,Ko(e,n),rI(e,r,s),Dm(e,r,s,n),Om(null,e,r,!0,t,n);case 19:return dI(t,e,n);case 22:return aI(t,e,n)}throw Error(q(156,e.tag))};function NI(t,e){return eT(t,e)}function _R(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,e,n,r){return new _R(t,e,n,r)}function qy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bR(t){if(typeof t=="function")return qy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uy)return 11;if(t===dy)return 14}return 2}function xs(t,e){var n=t.alternate;return n===null?(n=Tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ud(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")qy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case So:return _i(n.children,s,i,e);case cy:o=8,s|=8;break;case sm:return t=Tn(12,n,e,s|2),t.elementType=sm,t.lanes=i,t;case im:return t=Tn(13,n,e,s),t.elementType=im,t.lanes=i,t;case om:return t=Tn(19,n,e,s),t.elementType=om,t.lanes=i,t;case OE:return Yh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case VE:o=10;break e;case LE:o=9;break e;case uy:o=11;break e;case dy:o=14;break e;case Jr:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Tn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function _i(t,e,n,r){return t=Tn(7,t,r,e),t.lanes=n,t}function Yh(t,e,n,r){return t=Tn(22,t,r,e),t.elementType=OE,t.lanes=n,t.stateNode={isHidden:!1},t}function Sp(t,e,n){return t=Tn(6,t,null,e),t.lanes=n,t}function Np(t,e,n){return e=Tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ER(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ap(0),this.expirationTimes=ap(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ap(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ky(t,e,n,r,s,i,o,a,l){return t=new ER(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Tn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cy(i),t}function TR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Io,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function kI(t){if(!t)return Cs;t=t._reactInternals;e:{if(Qi(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(rn(n))return kT(t,n,e)}return e}function CI(t,e,n,r,s,i,o,a,l){return t=Ky(n,r,!0,t,s,i,o,a,l),t.context=kI(null),n=t.current,r=qt(),s=vs(n),i=_r(r,s),i.callback=e??null,gs(n,i,s),t.current.lanes=s,Ac(t,s,r),sn(t,r),t}function Jh(t,e,n,r){var s=e.current,i=qt(),o=vs(s);return n=kI(n),e.context===null?e.context=n:e.pendingContext=n,e=_r(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gs(s,e,o),t!==null&&(Bn(t,s,o,i),sd(t,s,o)),o}function Yd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wy(t,e){Uw(t,e),(t=t.alternate)&&Uw(t,e)}function IR(){return null}var PI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gy(t){this._internalRoot=t}Xh.prototype.render=Gy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Jh(t,e,null,null)};Xh.prototype.unmount=Gy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ci(function(){Jh(null,t,null,null)}),e[kr]=null}};function Xh(t){this._internalRoot=t}Xh.prototype.unstable_scheduleHydration=function(t){if(t){var e=aT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<es.length&&e!==0&&e<es[n].priority;n++);es.splice(n,0,t),n===0&&cT(t)}};function Qy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bw(){}function SR(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Yd(o);i.call(u)}}var o=CI(e,r,t,0,null,!1,!1,"",Bw);return t._reactRootContainer=o,t[kr]=o.current,Zl(t.nodeType===8?t.parentNode:t),Ci(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Yd(l);a.call(u)}}var l=Ky(t,0,!1,null,null,!1,!1,"",Bw);return t._reactRootContainer=l,t[kr]=l.current,Zl(t.nodeType===8?t.parentNode:t),Ci(function(){Jh(e,l,n,r)}),l}function ef(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Yd(o);a.call(l)}}Jh(e,o,t,s)}else o=SR(n,e,t,s,r);return Yd(o)}iT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ml(e.pendingLanes);n!==0&&(py(e,n|1),sn(e,et()),!(be&6)&&(ia=et()+500,Us()))}break;case 13:Ci(function(){var r=Cr(t,1);if(r!==null){var s=qt();Bn(r,t,1,s)}}),Wy(t,1)}};my=function(t){if(t.tag===13){var e=Cr(t,134217728);if(e!==null){var n=qt();Bn(e,t,134217728,n)}Wy(t,134217728)}};oT=function(t){if(t.tag===13){var e=vs(t),n=Cr(t,e);if(n!==null){var r=qt();Bn(n,t,e,r)}Wy(t,e)}};aT=function(){return ke};lT=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};gm=function(t,e,n){switch(e){case"input":if(cm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Hh(r);if(!s)throw Error(q(90));FE(r),cm(r,s)}}}break;case"textarea":BE(t,n);break;case"select":e=n.value,e!=null&&$o(t,!!n.multiple,e,!1)}};GE=$y;QE=Ci;var NR={usingClientEntryPoint:!1,Events:[jc,Po,Hh,KE,WE,$y]},el={findFiberByHostInstance:pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kR={bundleType:el.bundleType,version:el.version,rendererPackageName:el.rendererPackageName,rendererConfig:el.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=XE(t),t===null?null:t.stateNode},findFiberByHostInstance:el.findFiberByHostInstance||IR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{Uh=Lu.inject(kR),Jn=Lu}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NR;gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qy(e))throw Error(q(200));return TR(t,e,null,n)};gn.createRoot=function(t,e){if(!Qy(t))throw Error(q(299));var n=!1,r="",s=PI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ky(t,1,!1,null,null,n,!1,r,s),t[kr]=e.current,Zl(t.nodeType===8?t.parentNode:t),new Gy(e)};gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=XE(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t){return Ci(t)};gn.hydrate=function(t,e,n){if(!Zh(e))throw Error(q(200));return ef(null,t,e,!0,n)};gn.hydrateRoot=function(t,e,n){if(!Qy(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=PI;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=CI(e,null,t,1,n??null,s,!1,i,o),t[kr]=e.current,Zl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Xh(e)};gn.render=function(t,e,n){if(!Zh(e))throw Error(q(200));return ef(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!Zh(t))throw Error(q(40));return t._reactRootContainer?(Ci(function(){ef(null,null,t,!1,function(){t._reactRootContainer=null,t[kr]=null})}),!0):!1};gn.unstable_batchedUpdates=$y;gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zh(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return ef(t,e,n,!1,r)};gn.version="18.3.1-next-f1338f8080-20240426";function AI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AI)}catch(t){console.error(t)}}AI(),AE.exports=gn;var CR=AE.exports,RI,$w=CR;RI=$w.createRoot,$w.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lc(){return lc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lc.apply(this,arguments)}var us;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(us||(us={}));const zw="popstate";function PR(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Qm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Jd(s)}return RR(e,n,null,t)}function nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AR(){return Math.random().toString(36).substr(2,8)}function Hw(t,e){return{usr:t.state,key:t.key,idx:e}}function Qm(t,e,n,r){return n===void 0&&(n=null),lc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_a(e):e,{state:n,key:e&&e.key||r||AR()})}function Jd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _a(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function RR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=us.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(lc({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=us.Pop;let T=h(),E=T==null?null:T-u;u=T,l&&l({action:a,location:w.location,delta:E})}function p(T,E){a=us.Push;let v=Qm(w.location,T,E);u=h()+1;let x=Hw(v,u),I=w.createHref(v);try{o.pushState(x,"",I)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(I)}i&&l&&l({action:a,location:w.location,delta:1})}function g(T,E){a=us.Replace;let v=Qm(w.location,T,E);u=h();let x=Hw(v,u),I=w.createHref(v);o.replaceState(x,"",I),i&&l&&l({action:a,location:w.location,delta:0})}function _(T){let E=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof T=="string"?T:Jd(T);return v=v.replace(/ $/,"%20"),nt(E,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,E)}let w={get action(){return a},get location(){return t(s,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(zw,f),l=T,()=>{s.removeEventListener(zw,f),l=null}},createHref(T){return e(s,T)},createURL:_,encodeLocation(T){let E=_(T);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:g,go(T){return o.go(T)}};return w}var qw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qw||(qw={}));function jR(t,e,n){return n===void 0&&(n="/"),DR(t,e,n,!1)}function DR(t,e,n,r){let s=typeof e=="string"?_a(e):e,i=Yy(s.pathname||"/",n);if(i==null)return null;let o=DI(t);VR(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=KR(i);a=HR(o[l],u,r)}return a}function DI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(nt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=ws([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),DI(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:$R(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of VI(i.path))s(i,o,l)}),e}function VI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=VI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function VR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const LR=/^:[\w-]+$/,OR=3,MR=2,FR=1,UR=10,BR=-2,Kw=t=>t==="*";function $R(t,e){let n=t.split("/"),r=n.length;return n.some(Kw)&&(r+=BR),e&&(r+=MR),n.filter(s=>!Kw(s)).reduce((s,i)=>s+(LR.test(i)?OR:i===""?FR:UR),r)}function zR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function HR(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=Ww({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),p=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Ww({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:ws([i,f.pathname]),pathnameBase:YR(ws([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=ws([i,f.pathnameBase]))}return o}function Ww(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let w=a[f]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const _=a[f];return g&&!_?u[p]=void 0:u[p]=(_||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function qR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function KR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Yy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function WR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?_a(t):t;return{pathname:n?n.startsWith("/")?n:GR(n,e):e,search:JR(r),hash:XR(s)}}function GR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function kp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jy(t,e){let n=QR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Xy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=_a(t):(s=lc({},t),nt(!s.pathname||!s.pathname.includes("?"),kp("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),kp("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),kp("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=WR(s,a),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const ws=t=>t.join("/").replace(/\/\/+/g,"/"),YR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),JR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,XR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const LI=["post","put","patch","delete"];new Set(LI);const ej=["get",...LI];new Set(ej);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cc(){return cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cc.apply(this,arguments)}const Zy=C.createContext(null),tj=C.createContext(null),Bs=C.createContext(null),tf=C.createContext(null),$s=C.createContext({outlet:null,matches:[],isDataRoute:!1}),OI=C.createContext(null);function nj(t,e){let{relative:n}=e===void 0?{}:e;ba()||nt(!1);let{basename:r,navigator:s}=C.useContext(Bs),{hash:i,pathname:o,search:a}=FI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ws([r,o])),s.createHref({pathname:l,search:a,hash:i})}function ba(){return C.useContext(tf)!=null}function Ea(){return ba()||nt(!1),C.useContext(tf).location}function MI(t){C.useContext(Bs).static||C.useLayoutEffect(t)}function Yi(){let{isDataRoute:t}=C.useContext($s);return t?mj():rj()}function rj(){ba()||nt(!1);let t=C.useContext(Zy),{basename:e,future:n,navigator:r}=C.useContext(Bs),{matches:s}=C.useContext($s),{pathname:i}=Ea(),o=JSON.stringify(Jy(s,n.v7_relativeSplatPath)),a=C.useRef(!1);return MI(()=>{a.current=!0}),C.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=Xy(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ws([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function FI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=C.useContext(Bs),{matches:s}=C.useContext($s),{pathname:i}=Ea(),o=JSON.stringify(Jy(s,r.v7_relativeSplatPath));return C.useMemo(()=>Xy(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function sj(t,e){return ij(t,e)}function ij(t,e,n,r){ba()||nt(!1);let{navigator:s}=C.useContext(Bs),{matches:i}=C.useContext($s),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Ea(),h;if(e){var f;let T=typeof e=="string"?_a(e):e;l==="/"||(f=T.pathname)!=null&&f.startsWith(l)||nt(!1),h=T}else h=u;let p=h.pathname||"/",g=p;if(l!=="/"){let T=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=jR(t,{pathname:g}),w=uj(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:ws([l,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:ws([l,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,r);return e&&w?C.createElement(tf.Provider,{value:{location:cc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:us.Pop}},w):w}function oj(){let t=pj(),e=ZR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:s},n):null,null)}const aj=C.createElement(oj,null);class lj extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement($s.Provider,{value:this.props.routeContext},C.createElement(OI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cj(t){let{routeContext:e,match:n,children:r}=t,s=C.useContext(Zy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement($s.Provider,{value:e},r)}function uj(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||nt(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:g}=n,_=f.route.loader&&p[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||_){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let g,_=!1,w=null,T=null;n&&(g=a&&f.route.id?a[f.route.id]:void 0,w=f.route.errorElement||aj,l&&(u<0&&p===0?(_=!0,T=null):u===p&&(_=!0,T=f.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,p+1)),v=()=>{let x;return g?x=w:_?x=T:f.route.Component?x=C.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=h,C.createElement(cj,{match:f,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?C.createElement(lj,{location:n.location,revalidation:n.revalidation,component:w,error:g,children:v(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):v()},null)}var UI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(UI||{}),Xd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Xd||{});function dj(t){let e=C.useContext(Zy);return e||nt(!1),e}function hj(t){let e=C.useContext(tj);return e||nt(!1),e}function fj(t){let e=C.useContext($s);return e||nt(!1),e}function BI(t){let e=fj(),n=e.matches[e.matches.length-1];return n.route.id||nt(!1),n.route.id}function pj(){var t;let e=C.useContext(OI),n=hj(Xd.UseRouteError),r=BI(Xd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function mj(){let{router:t}=dj(UI.UseNavigateStable),e=BI(Xd.UseNavigateStable),n=C.useRef(!1);return MI(()=>{n.current=!0}),C.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,cc({fromRouteId:e},i)))},[t,e])}function gj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lr(t){let{to:e,replace:n,state:r,relative:s}=t;ba()||nt(!1);let{future:i,static:o}=C.useContext(Bs),{matches:a}=C.useContext($s),{pathname:l}=Ea(),u=Yi(),h=Xy(e,Jy(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(h);return C.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function ur(t){nt(!1)}function yj(t){let{basename:e="/",children:n=null,location:r,navigationType:s=us.Pop,navigator:i,static:o=!1,future:a}=t;ba()&&nt(!1);let l=e.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:l,navigator:i,static:o,future:cc({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=_a(r));let{pathname:h="/",search:f="",hash:p="",state:g=null,key:_="default"}=r,w=C.useMemo(()=>{let T=Yy(h,l);return T==null?null:{location:{pathname:T,search:f,hash:p,state:g,key:_},navigationType:s}},[l,h,f,p,g,_,s]);return w==null?null:C.createElement(Bs.Provider,{value:u},C.createElement(tf.Provider,{children:n,value:w}))}function vj(t){let{children:e,location:n}=t;return sj(Ym(e),n)}new Promise(()=>{});function Ym(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,s)=>{if(!C.isValidElement(r))return;let i=[...e,s];if(r.type===C.Fragment){n.push.apply(n,Ym(r.props.children,i));return}r.type!==ur&&nt(!1),!r.props.index||!r.props.children||nt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ym(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jm(){return Jm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jm.apply(this,arguments)}function xj(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function wj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _j(t,e){return t.button===0&&(!e||e==="_self")&&!wj(t)}const bj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ej="6";try{window.__reactRouterVersion=Ej}catch{}const Tj="startTransition",Gw=vP[Tj];function Ij(t){let{basename:e,children:n,future:r,window:s}=t,i=C.useRef();i.current==null&&(i.current=PR({window:s,v5Compat:!0}));let o=i.current,[a,l]=C.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=C.useCallback(f=>{u&&Gw?Gw(()=>l(f)):l(f)},[l,u]);return C.useLayoutEffect(()=>o.listen(h),[o,h]),C.useEffect(()=>gj(r),[r]),C.createElement(yj,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Sj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$I=C.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:f}=e,p=xj(e,bj),{basename:g}=C.useContext(Bs),_,w=!1;if(typeof u=="string"&&Nj.test(u)&&(_=u,Sj))try{let x=new URL(window.location.href),I=u.startsWith("//")?new URL(x.protocol+u):new URL(u),j=Yy(I.pathname,g);I.origin===x.origin&&j!=null?u=j+I.search+I.hash:w=!0}catch{}let T=nj(u,{relative:s}),E=kj(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:f});function v(x){r&&r(x),x.defaultPrevented||E(x)}return C.createElement("a",Jm({},p,{href:_||T,onClick:w||i?r:v,ref:n,target:l}))});var Qw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qw||(Qw={}));var Yw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Yw||(Yw={}));function kj(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Yi(),u=Ea(),h=FI(t,{relative:o});return C.useCallback(f=>{if(_j(f,n)){f.preventDefault();let p=r!==void 0?r:Jd(u)===Jd(h);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,l,h,r,s,n,t,i,o,a])}let Cj={data:""},Pj=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Cj,Aj=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Rj=/\/\*[^]*?\*\/|  +/g,Jw=/\n+/g,ns=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?ns(o,i):i+"{"+ns(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=ns(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=ns.p?ns.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},cr={},zI=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+zI(t[n]);return e}return t},jj=(t,e,n,r,s)=>{let i=zI(t),o=cr[i]||(cr[i]=(l=>{let u=0,h=11;for(;u<l.length;)h=101*h+l.charCodeAt(u++)>>>0;return"go"+h})(i));if(!cr[o]){let l=i!==t?t:(u=>{let h,f,p=[{}];for(;h=Aj.exec(u.replace(Rj,""));)h[4]?p.shift():h[3]?(f=h[3].replace(Jw," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][h[1]]=h[2].replace(Jw," ").trim();return p[0]})(t);cr[o]=ns(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&cr.g?cr.g:null;return n&&(cr.g=cr[o]),((l,u,h,f)=>{f?u.data=u.data.replace(f,l):u.data.indexOf(l)===-1&&(u.data=h?l+u.data:u.data+l)})(cr[o],e,r,a),o},Dj=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":ns(a,""):a===!1?"":a}return r+s+(o??"")},"");function nf(t){let e=this||{},n=t.call?t(e.p):t;return jj(n.unshift?n.raw?Dj(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,Pj(e.target),e.g,e.o,e.k)}let HI,Xm,Zm;nf.bind({g:1});let Ar=nf.bind({k:1});function Vj(t,e,n,r){ns.p=e,HI=t,Xm=n,Zm=r}function zs(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:Xm&&Xm()},a),n.o=/ *go\d+/.test(l),a.className=nf.apply(n,r)+(l?" "+l:"");let u=t;return t[0]&&(u=a.as||t,delete a.as),Zm&&u[0]&&Zm(a),HI(u,a)}return s}}var Lj=t=>typeof t=="function",Zd=(t,e)=>Lj(t)?t(e):t,Oj=(()=>{let t=0;return()=>(++t).toString()})(),qI=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Mj=20,KI=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Mj)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return KI(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},dd=[],yi={toasts:[],pausedAt:void 0},Ji=t=>{yi=KI(yi,t),dd.forEach(e=>{e(yi)})},Fj={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Uj=(t={})=>{let[e,n]=C.useState(yi),r=C.useRef(yi);C.useEffect(()=>(r.current!==yi&&n(yi),dd.push(n),()=>{let i=dd.indexOf(n);i>-1&&dd.splice(i,1)}),[]);let s=e.toasts.map(i=>{var o,a,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((a=t[i.type])==null?void 0:a.duration)||(t==null?void 0:t.duration)||Fj[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:s}},Bj=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Oj()}),Vc=t=>(e,n)=>{let r=Bj(e,t,n);return Ji({type:2,toast:r}),r.id},zt=(t,e)=>Vc("blank")(t,e);zt.error=Vc("error");zt.success=Vc("success");zt.loading=Vc("loading");zt.custom=Vc("custom");zt.dismiss=t=>{Ji({type:3,toastId:t})};zt.remove=t=>Ji({type:4,toastId:t});zt.promise=(t,e,n)=>{let r=zt.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Zd(e.success,s):void 0;return i?zt.success(i,{id:r,...n,...n==null?void 0:n.success}):zt.dismiss(r),s}).catch(s=>{let i=e.error?Zd(e.error,s):void 0;i?zt.error(i,{id:r,...n,...n==null?void 0:n.error}):zt.dismiss(r)}),t};var $j=(t,e)=>{Ji({type:1,toast:{id:t,height:e}})},zj=()=>{Ji({type:5,time:Date.now()})},jl=new Map,Hj=1e3,qj=(t,e=Hj)=>{if(jl.has(t))return;let n=setTimeout(()=>{jl.delete(t),Ji({type:4,toastId:t})},e);jl.set(t,n)},Kj=t=>{let{toasts:e,pausedAt:n}=Uj(t);C.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(i-a.createdAt);if(l<0){a.visible&&zt.dismiss(a.id);return}return setTimeout(()=>zt.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=C.useCallback(()=>{n&&Ji({type:6,time:Date.now()})},[n]),s=C.useCallback((i,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:u}=o||{},h=e.filter(g=>(g.position||u)===(i.position||u)&&g.height),f=h.findIndex(g=>g.id===i.id),p=h.filter((g,_)=>_<f&&g.visible).length;return h.filter(g=>g.visible).slice(...a?[p+1]:[0,p]).reduce((g,_)=>g+(_.height||0)+l,0)},[e]);return C.useEffect(()=>{e.forEach(i=>{if(i.dismissed)qj(i.id,i.removeDelay);else{let o=jl.get(i.id);o&&(clearTimeout(o),jl.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:$j,startPause:zj,endPause:r,calculateOffset:s}}},Wj=Ar`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Gj=Ar`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Qj=Ar`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Yj=zs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Wj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Gj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Qj} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Jj=Ar`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Xj=zs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Jj} 1s linear infinite;
`,Zj=Ar`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,eD=Ar`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,tD=zs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Zj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${eD} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,nD=zs("div")`
  position: absolute;
`,rD=zs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,sD=Ar`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,iD=zs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${sD} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,oD=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?C.createElement(iD,null,e):e:n==="blank"?null:C.createElement(rD,null,C.createElement(Xj,{...r}),n!=="loading"&&C.createElement(nD,null,n==="error"?C.createElement(Yj,{...r}):C.createElement(tD,{...r})))},aD=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,lD=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,cD="0%{opacity:0;} 100%{opacity:1;}",uD="0%{opacity:1;} 100%{opacity:0;}",dD=zs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,hD=zs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,fD=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=qI()?[cD,uD]:[aD(n),lD(n)];return{animation:e?`${Ar(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ar(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},pD=C.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?fD(t.position||e||"top-center",t.visible):{opacity:0},i=C.createElement(oD,{toast:t}),o=C.createElement(hD,{...t.ariaProps},Zd(t.message,t));return C.createElement(dD,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):C.createElement(C.Fragment,null,i,o))});Vj(C.createElement);var mD=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=C.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return C.createElement("div",{ref:i,className:e,style:n},s)},gD=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:qI()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},yD=nf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ou=16,vD=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:a,handlers:l}=Kj(n);return C.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ou,left:Ou,right:Ou,bottom:Ou,pointerEvents:"none",...i},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(u=>{let h=u.position||e,f=l.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),p=gD(h,f);return C.createElement(mD,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?yD:"",style:p},u.type==="custom"?Zd(u.message,u):s?s(u):C.createElement(pD,{toast:u,position:h}))}))},Y=zt;function xD(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Xw={};function eg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&Xw[e[0]]||(typeof e[0]=="string"&&(Xw[e[0]]=new Date),xD(...e))}const WI=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function Zw(t,e,n){t.loadNamespaces(e,WI(t,n))}function e1(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,WI(t,r))}function wD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],s=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const u=e.services.backendConnector.state[`${a}|${l}`];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!s||o(i,t)))}function _D(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(eg("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(s,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!i(s.isLanguageChangingTo,t))return!1}}):wD(t,e,n)}const bD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ED={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},TD=t=>ED[t],ID=t=>t.replace(bD,TD);let tg={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:ID};function SD(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};tg={...tg,...t}}function ND(){return tg}let GI;function kD(t){GI=t}function CD(){return GI}const PD={type:"3rdParty",init(t){SD(t.options.react),kD(t)}},AD=C.createContext();class RD{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const jD=(t,e)=>{const n=C.useRef();return C.useEffect(()=>{n.current=t},[t,e]),n.current};function an(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:s}=C.useContext(AD)||{},i=n||r||CD();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new RD),!i){eg("You will need to pass in an i18next instance by using initReactI18next");const x=(j,D)=>typeof D=="string"?D:D&&typeof D=="object"&&typeof D.defaultValue=="string"?D.defaultValue:Array.isArray(j)?j[j.length-1]:j,I=[x,{},!1];return I.t=x,I.i18n={},I.ready=!1,I}i.options.react&&i.options.react.wait!==void 0&&eg("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...ND(),...i.options.react,...e},{useSuspense:a,keyPrefix:l}=o;let u=s||i.options&&i.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const h=(i.isInitialized||i.initializedStoreOnce)&&u.every(x=>_D(x,i,o));function f(){return i.getFixedT(e.lng||null,o.nsMode==="fallback"?u:u[0],l)}const[p,g]=C.useState(f);let _=u.join();e.lng&&(_=`${e.lng}${_}`);const w=jD(_),T=C.useRef(!0);C.useEffect(()=>{const{bindI18n:x,bindI18nStore:I}=o;T.current=!0,!h&&!a&&(e.lng?e1(i,e.lng,u,()=>{T.current&&g(f)}):Zw(i,u,()=>{T.current&&g(f)})),h&&w&&w!==_&&T.current&&g(f);function j(){T.current&&g(f)}return x&&i&&i.on(x,j),I&&i&&i.store.on(I,j),()=>{T.current=!1,x&&i&&x.split(" ").forEach(D=>i.off(D,j)),I&&i&&I.split(" ").forEach(D=>i.store.off(D,j))}},[i,_]);const E=C.useRef(!0);C.useEffect(()=>{T.current&&!E.current&&g(f),E.current=!1},[i,l]);const v=[p,i,h];if(v.t=p,v.i18n=i,v.ready=h,h||!h&&!a)return v;throw new Promise(x=>{e.lng?e1(i,e.lng,u,()=>x()):Zw(i,u,()=>x())})}var t1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},DD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},YI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new VD;const p=i<<2|a>>4;if(r.push(p),u!==64){const g=a<<4&240|u>>2;if(r.push(g),f!==64){const _=u<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LD=function(t){const e=QI(t);return YI.encodeByteArray(e,!0)},eh=function(t){return LD(t).replace(/\./g,"")},JI=function(t){try{return YI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=()=>OD().__FIREBASE_DEFAULTS__,FD=()=>{if(typeof process>"u"||typeof t1>"u")return;const t=t1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&JI(t[1]);return e&&JSON.parse(e)},rf=()=>{try{return MD()||FD()||UD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},XI=t=>{var e,n;return(n=(e=rf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ZI=t=>{const e=XI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},eS=()=>{var t;return(t=rf())===null||t===void 0?void 0:t.config},tS=t=>{var e;return(e=rf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[eh(JSON.stringify(n)),eh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $D(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function zD(){var t;const e=(t=rf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WD(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rS(){return!zD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sS(){try{return typeof indexedDB=="object"}catch{return!1}}function GD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD="FirebaseError";class sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=QD,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lc.prototype.create)}}class Lc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?YD(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new sr(s,a,r)}}function YD(t,e){return t.replace(JD,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const JD=/\{\$([^}]+)}/g;function XD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function oa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(n1(i)&&n1(o)){if(!oa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function n1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function vl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ZD(t,e){const n=new eV(t,e);return n.subscribe.bind(n)}class eV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Cp),s.error===void 0&&(s.error=Cp),s.complete===void 0&&(s.complete=Cp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t){return t&&t._delegate?t._delegate:t}class Ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new BD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sV(e))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ii){return this.instances.has(e)}getOptions(e=ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ii){return this.component?this.component.multipleInstances?e:ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rV(t){return t===ii?void 0:t}function sV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const oV={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},aV=ye.INFO,lV={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},cV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=lV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let e0=class{constructor(e){this.name=e,this._logLevel=aV,this._logHandler=cV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}};const uV=(t,e)=>e.some(n=>t instanceof n);let r1,s1;function dV(){return r1||(r1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hV(){return s1||(s1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iS=new WeakMap,ng=new WeakMap,oS=new WeakMap,Pp=new WeakMap,t0=new WeakMap;function fV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_s(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&iS.set(n,t)}).catch(()=>{}),t0.set(e,t),e}function pV(t){if(ng.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ng.set(t,e)}let rg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ng.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mV(t){rg=t(rg)}function gV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ap(this),e,...n);return oS.set(r,e.sort?e.sort():[e]),_s(r)}:hV().includes(t)?function(...e){return t.apply(Ap(this),e),_s(iS.get(this))}:function(...e){return _s(t.apply(Ap(this),e))}}function yV(t){return typeof t=="function"?gV(t):(t instanceof IDBTransaction&&pV(t),uV(t,dV())?new Proxy(t,rg):t)}function _s(t){if(t instanceof IDBRequest)return fV(t);if(Pp.has(t))return Pp.get(t);const e=yV(t);return e!==t&&(Pp.set(t,e),t0.set(e,t)),e}const Ap=t=>t0.get(t);function vV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=_s(o);return r&&o.addEventListener("upgradeneeded",l=>{r(_s(o.result),l.oldVersion,l.newVersion,_s(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const xV=["get","getKey","getAll","getAllKeys","count"],wV=["put","add","delete","clear"],Rp=new Map;function i1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rp.get(e))return Rp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=wV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||xV.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Rp.set(e,i),i}mV(t=>({...t,get:(e,n,r)=>i1(e,n)||t.get(e,n,r),has:(e,n)=>!!i1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function bV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sg="@firebase/app",o1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new e0("@firebase/app"),EV="@firebase/app-compat",TV="@firebase/analytics-compat",IV="@firebase/analytics",SV="@firebase/app-check-compat",NV="@firebase/app-check",kV="@firebase/auth",CV="@firebase/auth-compat",PV="@firebase/database",AV="@firebase/data-connect",RV="@firebase/database-compat",jV="@firebase/functions",DV="@firebase/functions-compat",VV="@firebase/installations",LV="@firebase/installations-compat",OV="@firebase/messaging",MV="@firebase/messaging-compat",FV="@firebase/performance",UV="@firebase/performance-compat",BV="@firebase/remote-config",$V="@firebase/remote-config-compat",zV="@firebase/storage",HV="@firebase/storage-compat",qV="@firebase/firestore",KV="@firebase/vertexai-preview",WV="@firebase/firestore-compat",GV="firebase",QV="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="[DEFAULT]",YV={[sg]:"fire-core",[EV]:"fire-core-compat",[IV]:"fire-analytics",[TV]:"fire-analytics-compat",[NV]:"fire-app-check",[SV]:"fire-app-check-compat",[kV]:"fire-auth",[CV]:"fire-auth-compat",[PV]:"fire-rtdb",[AV]:"fire-data-connect",[RV]:"fire-rtdb-compat",[jV]:"fire-fn",[DV]:"fire-fn-compat",[VV]:"fire-iid",[LV]:"fire-iid-compat",[OV]:"fire-fcm",[MV]:"fire-fcm-compat",[FV]:"fire-perf",[UV]:"fire-perf-compat",[BV]:"fire-rc",[$V]:"fire-rc-compat",[zV]:"fire-gcs",[HV]:"fire-gcs-compat",[qV]:"fire-fst",[WV]:"fire-fst-compat",[KV]:"fire-vertex","fire-js":"fire-js",[GV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Map,JV=new Map,og=new Map;function a1(t,e){try{t.container.addComponent(e)}catch(n){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pi(t){const e=t.name;if(og.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;og.set(e,t);for(const n of th.values())a1(n,t);for(const n of JV.values())a1(n,t);return!0}function sf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bs=new Lc("app","Firebase",XV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=QV;function aS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ig,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw bs.create("bad-app-name",{appName:String(s)});if(n||(n=eS()),!n)throw bs.create("no-options");const i=th.get(s);if(i){if(oa(n,i.options)&&oa(r,i.config))return i;throw bs.create("duplicate-app",{appName:s})}const o=new iV(s);for(const l of og.values())o.addComponent(l);const a=new ZV(n,r,o);return th.set(s,a),a}function n0(t=ig){const e=th.get(t);if(!e&&t===ig&&eS())return aS();if(!e)throw bs.create("no-app",{appName:t});return e}function Zn(t,e,n){var r;let s=(r=YV[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(a.join(" "));return}Pi(new Ps(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="firebase-heartbeat-database",t4=1,uc="firebase-heartbeat-store";let jp=null;function lS(){return jp||(jp=vV(e4,t4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uc)}catch(n){console.warn(n)}}}}).catch(t=>{throw bs.create("idb-open",{originalErrorMessage:t.message})})),jp}async function n4(t){try{const n=(await lS()).transaction(uc),r=await n.objectStore(uc).get(cS(t));return await n.done,r}catch(e){if(e instanceof sr)Rr.warn(e.message);else{const n=bs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(n.message)}}}async function l1(t,e){try{const r=(await lS()).transaction(uc,"readwrite");await r.objectStore(uc).put(e,cS(t)),await r.done}catch(n){if(n instanceof sr)Rr.warn(n.message);else{const r=bs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rr.warn(r.message)}}}function cS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=1024,s4=30*24*60*60*1e3;class i4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=c1();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=s4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=c1(),{heartbeatsToSend:r,unsentEntries:s}=o4(this._heartbeatsCache.heartbeats),i=eh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Rr.warn(n),""}}}function c1(){return new Date().toISOString().substring(0,10)}function o4(t,e=r4){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),u1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),u1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class a4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sS()?GD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await n4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return l1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return l1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function u1(t){return eh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(t){Pi(new Ps("platform-logger",e=>new _V(e),"PRIVATE")),Pi(new Ps("heartbeat",e=>new i4(e),"PRIVATE")),Zn(sg,o1,t),Zn(sg,o1,"esm2017"),Zn("fire-js","")}l4("");function r0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function uS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c4=uS,dS=new Lc("auth","Firebase",uS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new e0("@firebase/auth");function u4(t,...e){nh.logLevel<=ye.WARN&&nh.warn(`Auth (${Xi}): ${t}`,...e)}function hd(t,...e){nh.logLevel<=ye.ERROR&&nh.error(`Auth (${Xi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw i0(t,...e)}function $n(t,...e){return i0(t,...e)}function s0(t,e,n){const r=Object.assign(Object.assign({},c4()),{[e]:n});return new Lc("auth","Firebase",r).create(e,{appName:t.name})}function br(t){return s0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function d4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&An(t,"argument-error"),s0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function i0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dS.create(t,...e)}function ae(t,e,...n){if(!t)throw i0(e,...n)}function gr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hd(e),new Error(e)}function jr(t,e){t||gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function h4(){return d1()==="http:"||d1()==="https:"}function d1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h4()||qD()||"connection"in navigator)?navigator.onLine:!0}function p4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this.shortDelay=e,this.longDelay=n,jr(n>e,"Short delay should be less than long delay!"),this.isMobile=$D()||KD()}get(){return f4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t,e){jr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=new Mc(3e4,6e4);function Hs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Or(t,e,n,r,s={}){return fS(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Oc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},i);return HD()||(u.referrerPolicy="no-referrer"),hS.fetch()(pS(t,t.config.apiHost,n,a),u)})}async function fS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},m4),e);try{const s=new v4(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Mu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Mu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Mu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw s0(t,h,u);An(t,h)}}catch(s){if(s instanceof sr)throw s;An(t,"network-request-failed",{message:String(s)})}}async function Fc(t,e,n,r,s={}){const i=await Or(t,e,n,r,s);return"mfaPendingCredential"in i&&An(t,"multi-factor-auth-required",{_serverResponse:i}),i}function pS(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?o0(t.config,s):`${t.config.apiScheme}://${s}`}function y4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class v4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($n(this.auth,"network-request-failed")),g4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=$n(t,e,r);return s.customData._tokenResponse=n,s}function h1(t){return t!==void 0&&t.enterprise!==void 0}class x4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return y4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function w4(t,e){return Or(t,"GET","/v2/recaptchaConfig",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(t,e){return Or(t,"POST","/v1/accounts:delete",e)}async function mS(t,e){return Or(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function b4(t,e=!1){const n=$e(t),r=await n.getIdToken(e),s=a0(r);ae(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Dl(Dp(s.auth_time)),issuedAtTime:Dl(Dp(s.iat)),expirationTime:Dl(Dp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Dp(t){return Number(t)*1e3}function a0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hd("JWT malformed, contained fewer than 3 sections"),null;try{const s=JI(n);return s?JSON.parse(s):(hd("Failed to decode base64 JWT payload"),null)}catch(s){return hd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function f1(t){const e=a0(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sr&&E4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function E4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await aa(t,mS(n,{idToken:r}));ae(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?gS(i.providerUserInfo):[],a=S4(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new lg(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function I4(t){const e=$e(t);await rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S4(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function gS(t){return t.map(e=>{var{providerId:n}=e,r=r0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(t,e){const n=await fS(t,{},async()=>{const r=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=pS(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function k4(t,e){return Or(t,"POST","/v2/accounts:revokeToken",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):f1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=f1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await N4(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Go;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ae(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ae(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=r0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new T4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new lg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await aa(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return b4(this,e)}reload(){return I4(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await rh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(br(this.auth));const e=await this.getIdToken();return await aa(this,_4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:I,isAnonymous:j,providerData:D,stsTokenManager:N}=n;ae(x&&N,e,"internal-error");const b=Go.fromJSON(this.name,N);ae(typeof x=="string",e,"internal-error"),Wr(f,e.name),Wr(p,e.name),ae(typeof I=="boolean",e,"internal-error"),ae(typeof j=="boolean",e,"internal-error"),Wr(g,e.name),Wr(_,e.name),Wr(w,e.name),Wr(T,e.name),Wr(E,e.name),Wr(v,e.name);const S=new yr({uid:x,auth:e,email:p,emailVerified:I,displayName:f,isAnonymous:j,photoURL:_,phoneNumber:g,tenantId:w,stsTokenManager:b,createdAt:E,lastLoginAt:v});return D&&Array.isArray(D)&&(S.providerData=D.map(P=>Object.assign({},P))),T&&(S._redirectEventId=T),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new Go;s.updateFromServerResponse(n);const i=new yr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await rh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ae(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?gS(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Go;a.updateFromIdToken(r);const l=new yr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new lg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new Map;function vr(t){jr(t instanceof Function,"Expected a class definition");let e=p1.get(t);return e?(jr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,p1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yS.type="NONE";const m1=yS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t,e,n){return`firebase:${t}:${e}:${n}`}class Qo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=fd(this.userKey,s.apiKey,i),this.fullPersistenceKey=fd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?yr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qo(vr(m1),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||vr(m1);const o=fd(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const f=yr._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Qo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Qo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_S(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ES(e))return"Blackberry";if(TS(e))return"Webos";if(xS(e))return"Safari";if((e.includes("chrome/")||wS(e))&&!e.includes("edge/"))return"Chrome";if(bS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function vS(t=ut()){return/firefox\//i.test(t)}function xS(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wS(t=ut()){return/crios\//i.test(t)}function _S(t=ut()){return/iemobile/i.test(t)}function bS(t=ut()){return/android/i.test(t)}function ES(t=ut()){return/blackberry/i.test(t)}function TS(t=ut()){return/webos/i.test(t)}function l0(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function C4(t=ut()){var e;return l0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function P4(){return WD()&&document.documentMode===10}function IS(t=ut()){return l0(t)||bS(t)||TS(t)||ES(t)||/windows phone/i.test(t)||_S(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t,e=[]){let n;switch(t){case"Browser":n=g1(ut());break;case"Worker":n=`${g1(ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(t,e={}){return Or(t,"GET","/v2/passwordPolicy",Hs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=6;class D4{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:j4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new y1(this),this.idTokenSubscription=new y1(this),this.beforeStateQueue=new A4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mS(this,{idToken:e}),r=await yr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Mn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=p4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(br(this));const n=e?$e(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await R4(this),n=new D4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Lc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await k4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vr(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&u4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qs(t){return $e(t)}class y1{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZD(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L4(t){of=t}function NS(t){return of.loadJS(t)}function O4(){return of.recaptchaEnterpriseScript}function M4(){return of.gapiScript}function F4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const U4="recaptcha-enterprise",B4="NO_RECAPTCHA";class $4{constructor(e){this.type=U4,this.auth=qs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{w4(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new x4(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;h1(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(B4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&h1(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=O4();l.length!==0&&(l+=a),NS(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function v1(t,e,n,r=!1){const s=new $4(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function cg(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await v1(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await v1(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(t,e){const n=sf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(oa(i,e??{}))return s;An(s,"already-initialized")}return n.initialize({options:e})}function H4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function q4(t,e,n){const r=qs(t);ae(r._canInitEmulator,r,"emulator-config-failed"),ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=kS(e),{host:o,port:a}=K4(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),W4()}function kS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function K4(t){const e=kS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:x1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:x1(o)}}}function x1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function W4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,n){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}async function G4(t,e){return Or(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q4(t,e){return Fc(t,"POST","/v1/accounts:signInWithPassword",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y4(t,e){return Fc(t,"POST","/v1/accounts:signInWithEmailLink",Hs(t,e))}async function J4(t,e){return Fc(t,"POST","/v1/accounts:signInWithEmailLink",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends c0{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new dc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new dc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cg(e,n,"signInWithPassword",Q4);case"emailLink":return Y4(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cg(e,r,"signUpPassword",G4);case"emailLink":return J4(e,{idToken:n,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e){return Fc(t,"POST","/v1/accounts:signInWithIdp",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="http://localhost";class Ai extends c0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ai(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=r0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ai(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Yo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yo(e,n)}buildRequest(){const e={requestUri:X4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Oc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eL(t){const e=yl(vl(t)).link,n=e?yl(vl(e)).deep_link_id:null,r=yl(vl(t)).deep_link_id;return(r?yl(vl(r)).link:null)||r||n||e||t}class u0{constructor(e){var n,r,s,i,o,a;const l=yl(vl(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=Z4((s=l.mode)!==null&&s!==void 0?s:null);ae(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=eL(e);try{return new u0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.providerId=Ta.PROVIDER_ID}static credential(e,n){return dc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=u0.parseLink(n);return ae(r,"argument-error"),dc._fromEmailAndCode(e,r.code,r.tenantId)}}Ta.PROVIDER_ID="password";Ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends d0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Uc{constructor(){super("facebook.com")}static credential(e){return Ai._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ai._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.GOOGLE_SIGN_IN_METHOD="google.com";fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Uc{constructor(){super("github.com")}static credential(e){return Ai._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Uc{constructor(){super("twitter.com")}static credential(e,n){return Ai._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return is.credential(n,r)}catch{return null}}}is.TWITTER_SIGN_IN_METHOD="twitter.com";is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(t,e){return Fc(t,"POST","/v1/accounts:signUp",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await yr._fromIdTokenResponse(e,r,s),o=w1(r);return new Ri({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=w1(r);return new Ri({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function w1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends sr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,sh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new sh(e,n,r,s)}}function CS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?sh._fromErrorAndOperation(t,i,e,r):i})}async function nL(t,e,n=!1){const r=await aa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ri._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e,n=!1){const{auth:r}=t;if(Mn(r.app))return Promise.reject(br(r));const s="reauthenticate";try{const i=await aa(t,CS(r,s,e,t),n);ae(i.idToken,r,"internal-error");const o=a0(i.idToken);ae(o,r,"internal-error");const{sub:a}=o;return ae(t.uid===a,r,"user-mismatch"),Ri._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&An(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(t,e,n=!1){if(Mn(t.app))return Promise.reject(br(t));const r="signIn",s=await CS(t,r,e),i=await Ri._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function sL(t,e){return PS(qs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(t){const e=qs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function iL(t,e,n){if(Mn(t.app))return Promise.reject(br(t));const r=qs(t),o=await cg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tL).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&AS(t),l}),a=await Ri._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function oL(t,e,n){return Mn(t.app)?Promise.reject(br(t)):sL($e(t),Ta.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&AS(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aL(t,e){return Or(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=$e(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await aa(r,aL(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function cL(t,e,n,r){return $e(t).onIdTokenChanged(e,n,r)}function uL(t,e,n){return $e(t).beforeAuthStateChanged(e,n)}function dL(t,e,n,r){return $e(t).onAuthStateChanged(e,n,r)}function hL(t){return $e(t).signOut()}const ih="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ih,"1"),this.storage.removeItem(ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=1e3,pL=10;class jS extends RS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);P4()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,pL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},fL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jS.type="LOCAL";const mL=jS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS extends RS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}DS.type="SESSION";const VS=DS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new af(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await gL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}af.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=h0("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return window}function vL(t){er().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function xL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _L(){return LS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="firebaseLocalStorageDb",bL=1,oh="firebaseLocalStorage",MS="fbase_key";class Bc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lf(t,e){return t.transaction([oh],e?"readwrite":"readonly").objectStore(oh)}function EL(){const t=indexedDB.deleteDatabase(OS);return new Bc(t).toPromise()}function ug(){const t=indexedDB.open(OS,bL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(oh,{keyPath:MS})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(oh)?e(r):(r.close(),await EL(),e(await ug()))})})}async function _1(t,e,n){const r=lf(t,!0).put({[MS]:e,value:n});return new Bc(r).toPromise()}async function TL(t,e){const n=lf(t,!1).get(e),r=await new Bc(n).toPromise();return r===void 0?null:r.value}function b1(t,e){const n=lf(t,!0).delete(e);return new Bc(n).toPromise()}const IL=800,SL=3;class FS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ug(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>SL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=af._getInstance(_L()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xL(),!this.activeServiceWorker)return;this.sender=new yL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ug();return await _1(e,ih,"1"),await b1(e,ih),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>b1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=lf(s,!1).getAll();return new Bc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FS.type="LOCAL";const NL=FS;new Mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e){return e?vr(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0 extends c0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kL(t){return PS(t.auth,new f0(t),t.bypassAuthState)}function CL(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),rL(n,new f0(t),t.bypassAuthState)}async function PL(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),nL(n,new f0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kL;case"linkViaPopup":case"linkViaRedirect":return PL;case"reauthViaPopup":case"reauthViaRedirect":return CL;default:An(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=new Mc(2e3,1e4);async function RL(t,e,n){if(Mn(t.app))return Promise.reject($n(t,"operation-not-supported-in-this-environment"));const r=qs(t);d4(t,e,d0);const s=US(r,n);return new vi(r,"signInViaPopup",e,s).executeNotNull()}class vi extends BS{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,vi.currentPopupAction&&vi.currentPopupAction.cancel(),vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const e=h0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AL.get())};e()}}vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="pendingRedirect",pd=new Map;class DL extends BS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pd.get(this.auth._key());if(!e){try{const r=await VL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pd.set(this.auth._key(),e)}return this.bypassAuthState||pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VL(t,e){const n=ML(e),r=OL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function LL(t,e){pd.set(t._key(),e)}function OL(t){return vr(t._redirectPersistence)}function ML(t){return fd(jL,t.config.apiKey,t.name)}async function FL(t,e,n=!1){if(Mn(t.app))return Promise.reject(br(t));const r=qs(t),s=US(r,e),o=await new DL(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=10*60*1e3;class BL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$L(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$S(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($n(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UL&&this.cachedEventUids.clear(),this.cachedEventUids.has(E1(e))}saveEventToCache(e){this.cachedEventUids.add(E1(e)),this.lastProcessedEventTime=Date.now()}}function E1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $S({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $L(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $S(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL(t,e={}){return Or(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qL=/^https?/;async function KL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zL(t);for(const n of e)try{if(WL(n))return}catch{}An(t,"unauthorized-domain")}function WL(t){const e=ag(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!qL.test(n))return!1;if(HL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=new Mc(3e4,6e4);function T1(){const t=er().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QL(t){return new Promise((e,n)=>{var r,s,i;function o(){T1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{T1(),n($n(t,"network-request-failed"))},timeout:GL.get()})}if(!((s=(r=er().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=er().gapi)===null||i===void 0)&&i.load)o();else{const a=F4("iframefcb");return er()[a]=()=>{gapi.load?o():n($n(t,"network-request-failed"))},NS(`${M4()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw md=null,e})}let md=null;function YL(t){return md=md||QL(t),md}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=new Mc(5e3,15e3),XL="__/auth/iframe",ZL="emulator/auth/iframe",eO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nO(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?o0(e,ZL):`https://${t.config.authDomain}/${XL}`,r={apiKey:e.apiKey,appName:t.name,v:Xi},s=tO.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Oc(r).slice(1)}`}async function rO(t){const e=await YL(t),n=er().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:nO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eO,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=$n(t,"network-request-failed"),a=er().setTimeout(()=>{i(o)},JL.get());function l(){er().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iO=500,oO=600,aO="_blank",lO="http://localhost";class I1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cO(t,e,n,r=iO,s=oO){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},sO),{width:r.toString(),height:s.toString(),top:i,left:o}),u=ut().toLowerCase();n&&(a=wS(u)?aO:n),vS(u)&&(e=e||lO,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,_])=>`${p}${g}=${_},`,"");if(C4(u)&&a!=="_self")return uO(e||"",a),new I1(null);const f=window.open(e||"",a,h);ae(f,t,"popup-blocked");try{f.focus()}catch{}return new I1(f)}function uO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="__/auth/handler",hO="emulator/auth/handler",fO=encodeURIComponent("fac");async function S1(t,e,n,r,s,i){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xi,eventId:s};if(e instanceof d0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",XD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Uc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${fO}=${encodeURIComponent(l)}`:"";return`${pO(t)}?${Oc(a).slice(1)}${u}`}function pO({config:t}){return t.emulator?o0(t,hO):`https://${t.authDomain}/${dO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="webStorageSupport";class mO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VS,this._completeRedirectFn=FL,this._overrideRedirectResult=LL}async _openPopup(e,n,r,s){var i;jr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await S1(e,n,r,ag(),s);return cO(e,o,h0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await S1(e,n,r,ag(),s);return vL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(jr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await rO(e),r=new BL(e);return n.register("authEvent",s=>(ae(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vp,{type:Vp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Vp];o!==void 0&&n(!!o),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IS()||xS()||l0()}}const gO=mO;var N1="@firebase/auth",k1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xO(t){Pi(new Ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SS(t)},u=new V4(r,s,i,l);return H4(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pi(new Ps("auth-internal",e=>{const n=qs(e.getProvider("auth").getImmediate());return(r=>new yO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(N1,k1,vO(t)),Zn(N1,k1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=5*60,_O=tS("authIdTokenMaxAge")||wO;let C1=null;const bO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_O)return;const s=n==null?void 0:n.token;C1!==s&&(C1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function EO(t=n0()){const e=sf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=z4(t,{popupRedirectResolver:gO,persistence:[NL,mL,VS]}),r=tS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=bO(i.toString());uL(n,o,()=>o(n.currentUser)),cL(n,a=>o(a))}}const s=XI("auth");return s&&q4(n,`http://${s}`),n}function TO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}L4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=$n("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",TO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xO("Browser");var P1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bi,zS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,b){function S(){}S.prototype=b.prototype,N.D=b.prototype,N.prototype=new S,N.prototype.constructor=N,N.C=function(P,R,V){for(var A=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)A[ne-2]=arguments[ne];return b.prototype[R].apply(P,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,b,S){S||(S=0);var P=Array(16);if(typeof b=="string")for(var R=0;16>R;++R)P[R]=b.charCodeAt(S++)|b.charCodeAt(S++)<<8|b.charCodeAt(S++)<<16|b.charCodeAt(S++)<<24;else for(R=0;16>R;++R)P[R]=b[S++]|b[S++]<<8|b[S++]<<16|b[S++]<<24;b=N.g[0],S=N.g[1],R=N.g[2];var V=N.g[3],A=b+(V^S&(R^V))+P[0]+3614090360&4294967295;b=S+(A<<7&4294967295|A>>>25),A=V+(R^b&(S^R))+P[1]+3905402710&4294967295,V=b+(A<<12&4294967295|A>>>20),A=R+(S^V&(b^S))+P[2]+606105819&4294967295,R=V+(A<<17&4294967295|A>>>15),A=S+(b^R&(V^b))+P[3]+3250441966&4294967295,S=R+(A<<22&4294967295|A>>>10),A=b+(V^S&(R^V))+P[4]+4118548399&4294967295,b=S+(A<<7&4294967295|A>>>25),A=V+(R^b&(S^R))+P[5]+1200080426&4294967295,V=b+(A<<12&4294967295|A>>>20),A=R+(S^V&(b^S))+P[6]+2821735955&4294967295,R=V+(A<<17&4294967295|A>>>15),A=S+(b^R&(V^b))+P[7]+4249261313&4294967295,S=R+(A<<22&4294967295|A>>>10),A=b+(V^S&(R^V))+P[8]+1770035416&4294967295,b=S+(A<<7&4294967295|A>>>25),A=V+(R^b&(S^R))+P[9]+2336552879&4294967295,V=b+(A<<12&4294967295|A>>>20),A=R+(S^V&(b^S))+P[10]+4294925233&4294967295,R=V+(A<<17&4294967295|A>>>15),A=S+(b^R&(V^b))+P[11]+2304563134&4294967295,S=R+(A<<22&4294967295|A>>>10),A=b+(V^S&(R^V))+P[12]+1804603682&4294967295,b=S+(A<<7&4294967295|A>>>25),A=V+(R^b&(S^R))+P[13]+4254626195&4294967295,V=b+(A<<12&4294967295|A>>>20),A=R+(S^V&(b^S))+P[14]+2792965006&4294967295,R=V+(A<<17&4294967295|A>>>15),A=S+(b^R&(V^b))+P[15]+1236535329&4294967295,S=R+(A<<22&4294967295|A>>>10),A=b+(R^V&(S^R))+P[1]+4129170786&4294967295,b=S+(A<<5&4294967295|A>>>27),A=V+(S^R&(b^S))+P[6]+3225465664&4294967295,V=b+(A<<9&4294967295|A>>>23),A=R+(b^S&(V^b))+P[11]+643717713&4294967295,R=V+(A<<14&4294967295|A>>>18),A=S+(V^b&(R^V))+P[0]+3921069994&4294967295,S=R+(A<<20&4294967295|A>>>12),A=b+(R^V&(S^R))+P[5]+3593408605&4294967295,b=S+(A<<5&4294967295|A>>>27),A=V+(S^R&(b^S))+P[10]+38016083&4294967295,V=b+(A<<9&4294967295|A>>>23),A=R+(b^S&(V^b))+P[15]+3634488961&4294967295,R=V+(A<<14&4294967295|A>>>18),A=S+(V^b&(R^V))+P[4]+3889429448&4294967295,S=R+(A<<20&4294967295|A>>>12),A=b+(R^V&(S^R))+P[9]+568446438&4294967295,b=S+(A<<5&4294967295|A>>>27),A=V+(S^R&(b^S))+P[14]+3275163606&4294967295,V=b+(A<<9&4294967295|A>>>23),A=R+(b^S&(V^b))+P[3]+4107603335&4294967295,R=V+(A<<14&4294967295|A>>>18),A=S+(V^b&(R^V))+P[8]+1163531501&4294967295,S=R+(A<<20&4294967295|A>>>12),A=b+(R^V&(S^R))+P[13]+2850285829&4294967295,b=S+(A<<5&4294967295|A>>>27),A=V+(S^R&(b^S))+P[2]+4243563512&4294967295,V=b+(A<<9&4294967295|A>>>23),A=R+(b^S&(V^b))+P[7]+1735328473&4294967295,R=V+(A<<14&4294967295|A>>>18),A=S+(V^b&(R^V))+P[12]+2368359562&4294967295,S=R+(A<<20&4294967295|A>>>12),A=b+(S^R^V)+P[5]+4294588738&4294967295,b=S+(A<<4&4294967295|A>>>28),A=V+(b^S^R)+P[8]+2272392833&4294967295,V=b+(A<<11&4294967295|A>>>21),A=R+(V^b^S)+P[11]+1839030562&4294967295,R=V+(A<<16&4294967295|A>>>16),A=S+(R^V^b)+P[14]+4259657740&4294967295,S=R+(A<<23&4294967295|A>>>9),A=b+(S^R^V)+P[1]+2763975236&4294967295,b=S+(A<<4&4294967295|A>>>28),A=V+(b^S^R)+P[4]+1272893353&4294967295,V=b+(A<<11&4294967295|A>>>21),A=R+(V^b^S)+P[7]+4139469664&4294967295,R=V+(A<<16&4294967295|A>>>16),A=S+(R^V^b)+P[10]+3200236656&4294967295,S=R+(A<<23&4294967295|A>>>9),A=b+(S^R^V)+P[13]+681279174&4294967295,b=S+(A<<4&4294967295|A>>>28),A=V+(b^S^R)+P[0]+3936430074&4294967295,V=b+(A<<11&4294967295|A>>>21),A=R+(V^b^S)+P[3]+3572445317&4294967295,R=V+(A<<16&4294967295|A>>>16),A=S+(R^V^b)+P[6]+76029189&4294967295,S=R+(A<<23&4294967295|A>>>9),A=b+(S^R^V)+P[9]+3654602809&4294967295,b=S+(A<<4&4294967295|A>>>28),A=V+(b^S^R)+P[12]+3873151461&4294967295,V=b+(A<<11&4294967295|A>>>21),A=R+(V^b^S)+P[15]+530742520&4294967295,R=V+(A<<16&4294967295|A>>>16),A=S+(R^V^b)+P[2]+3299628645&4294967295,S=R+(A<<23&4294967295|A>>>9),A=b+(R^(S|~V))+P[0]+4096336452&4294967295,b=S+(A<<6&4294967295|A>>>26),A=V+(S^(b|~R))+P[7]+1126891415&4294967295,V=b+(A<<10&4294967295|A>>>22),A=R+(b^(V|~S))+P[14]+2878612391&4294967295,R=V+(A<<15&4294967295|A>>>17),A=S+(V^(R|~b))+P[5]+4237533241&4294967295,S=R+(A<<21&4294967295|A>>>11),A=b+(R^(S|~V))+P[12]+1700485571&4294967295,b=S+(A<<6&4294967295|A>>>26),A=V+(S^(b|~R))+P[3]+2399980690&4294967295,V=b+(A<<10&4294967295|A>>>22),A=R+(b^(V|~S))+P[10]+4293915773&4294967295,R=V+(A<<15&4294967295|A>>>17),A=S+(V^(R|~b))+P[1]+2240044497&4294967295,S=R+(A<<21&4294967295|A>>>11),A=b+(R^(S|~V))+P[8]+1873313359&4294967295,b=S+(A<<6&4294967295|A>>>26),A=V+(S^(b|~R))+P[15]+4264355552&4294967295,V=b+(A<<10&4294967295|A>>>22),A=R+(b^(V|~S))+P[6]+2734768916&4294967295,R=V+(A<<15&4294967295|A>>>17),A=S+(V^(R|~b))+P[13]+1309151649&4294967295,S=R+(A<<21&4294967295|A>>>11),A=b+(R^(S|~V))+P[4]+4149444226&4294967295,b=S+(A<<6&4294967295|A>>>26),A=V+(S^(b|~R))+P[11]+3174756917&4294967295,V=b+(A<<10&4294967295|A>>>22),A=R+(b^(V|~S))+P[2]+718787259&4294967295,R=V+(A<<15&4294967295|A>>>17),A=S+(V^(R|~b))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+R&4294967295,N.g[3]=N.g[3]+V&4294967295}r.prototype.u=function(N,b){b===void 0&&(b=N.length);for(var S=b-this.blockSize,P=this.B,R=this.h,V=0;V<b;){if(R==0)for(;V<=S;)s(this,N,V),V+=this.blockSize;if(typeof N=="string"){for(;V<b;)if(P[R++]=N.charCodeAt(V++),R==this.blockSize){s(this,P),R=0;break}}else for(;V<b;)if(P[R++]=N[V++],R==this.blockSize){s(this,P),R=0;break}}this.h=R,this.o+=b},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;var S=8*this.o;for(b=N.length-8;b<N.length;++b)N[b]=S&255,S/=256;for(this.u(N),N=Array(16),b=S=0;4>b;++b)for(var P=0;32>P;P+=8)N[S++]=this.g[b]>>>P&255;return N};function i(N,b){var S=a;return Object.prototype.hasOwnProperty.call(S,N)?S[N]:S[N]=b(N)}function o(N,b){this.h=b;for(var S=[],P=!0,R=N.length-1;0<=R;R--){var V=N[R]|0;P&&V==b||(S[R]=V,P=!1)}this.g=S}var a={};function l(N){return-128<=N&&128>N?i(N,function(b){return new o([b|0],0>b?-1:0)}):new o([N|0],0>N?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return f;if(0>N)return T(u(-N));for(var b=[],S=1,P=0;N>=S;P++)b[P]=N/S|0,S*=4294967296;return new o(b,0)}function h(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return T(h(N.substring(1),b));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(b,8)),P=f,R=0;R<N.length;R+=8){var V=Math.min(8,N.length-R),A=parseInt(N.substring(R,R+V),b);8>V?(V=u(Math.pow(b,V)),P=P.j(V).add(u(A))):(P=P.j(S),P=P.add(u(A)))}return P}var f=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-T(this).m();for(var N=0,b=1,S=0;S<this.g.length;S++){var P=this.i(S);N+=(0<=P?P:4294967296+P)*b,b*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(_(this))return"0";if(w(this))return"-"+T(this).toString(N);for(var b=u(Math.pow(N,6)),S=this,P="";;){var R=I(S,b).g;S=E(S,R.j(b));var V=((0<S.g.length?S.g[0]:S.h)>>>0).toString(N);if(S=R,_(S))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function _(N){if(N.h!=0)return!1;for(var b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function w(N){return N.h==-1}t.l=function(N){return N=E(this,N),w(N)?-1:_(N)?0:1};function T(N){for(var b=N.g.length,S=[],P=0;P<b;P++)S[P]=~N.g[P];return new o(S,~N.h).add(p)}t.abs=function(){return w(this)?T(this):this},t.add=function(N){for(var b=Math.max(this.g.length,N.g.length),S=[],P=0,R=0;R<=b;R++){var V=P+(this.i(R)&65535)+(N.i(R)&65535),A=(V>>>16)+(this.i(R)>>>16)+(N.i(R)>>>16);P=A>>>16,V&=65535,A&=65535,S[R]=A<<16|V}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(N,b){return N.add(T(b))}t.j=function(N){if(_(this)||_(N))return f;if(w(this))return w(N)?T(this).j(T(N)):T(T(this).j(N));if(w(N))return T(this.j(T(N)));if(0>this.l(g)&&0>N.l(g))return u(this.m()*N.m());for(var b=this.g.length+N.g.length,S=[],P=0;P<2*b;P++)S[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<N.g.length;R++){var V=this.i(P)>>>16,A=this.i(P)&65535,ne=N.i(R)>>>16,me=N.i(R)&65535;S[2*P+2*R]+=A*me,v(S,2*P+2*R),S[2*P+2*R+1]+=V*me,v(S,2*P+2*R+1),S[2*P+2*R+1]+=A*ne,v(S,2*P+2*R+1),S[2*P+2*R+2]+=V*ne,v(S,2*P+2*R+2)}for(P=0;P<b;P++)S[P]=S[2*P+1]<<16|S[2*P];for(P=b;P<2*b;P++)S[P]=0;return new o(S,0)};function v(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function x(N,b){this.g=N,this.h=b}function I(N,b){if(_(b))throw Error("division by zero");if(_(N))return new x(f,f);if(w(N))return b=I(T(N),b),new x(T(b.g),T(b.h));if(w(b))return b=I(N,T(b)),new x(T(b.g),b.h);if(30<N.g.length){if(w(N)||w(b))throw Error("slowDivide_ only works with positive integers.");for(var S=p,P=b;0>=P.l(N);)S=j(S),P=j(P);var R=D(S,1),V=D(P,1);for(P=D(P,2),S=D(S,2);!_(P);){var A=V.add(P);0>=A.l(N)&&(R=R.add(S),V=A),P=D(P,1),S=D(S,1)}return b=E(N,R.j(b)),new x(R,b)}for(R=f;0<=N.l(b);){for(S=Math.max(1,Math.floor(N.m()/b.m())),P=Math.ceil(Math.log(S)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=u(S),A=V.j(b);w(A)||0<A.l(N);)S-=P,V=u(S),A=V.j(b);_(V)&&(V=p),R=R.add(V),N=E(N,A)}return new x(R,N)}t.A=function(N){return I(this,N).h},t.and=function(N){for(var b=Math.max(this.g.length,N.g.length),S=[],P=0;P<b;P++)S[P]=this.i(P)&N.i(P);return new o(S,this.h&N.h)},t.or=function(N){for(var b=Math.max(this.g.length,N.g.length),S=[],P=0;P<b;P++)S[P]=this.i(P)|N.i(P);return new o(S,this.h|N.h)},t.xor=function(N){for(var b=Math.max(this.g.length,N.g.length),S=[],P=0;P<b;P++)S[P]=this.i(P)^N.i(P);return new o(S,this.h^N.h)};function j(N){for(var b=N.g.length+1,S=[],P=0;P<b;P++)S[P]=N.i(P)<<1|N.i(P-1)>>>31;return new o(S,N.h)}function D(N,b){var S=b>>5;b%=32;for(var P=N.g.length-S,R=[],V=0;V<P;V++)R[V]=0<b?N.i(V+S)>>>b|N.i(V+S+1)<<32-b:N.i(V+S);return new o(R,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,bi=o}).apply(typeof P1<"u"?P1:typeof self<"u"?self:typeof window<"u"?window:{});var Fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HS,xl,qS,gd,dg,KS,WS,GS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,m,y){return d==Array.prototype||d==Object.prototype||(d[m]=y.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fu=="object"&&Fu];for(var m=0;m<d.length;++m){var y=d[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(d,m){if(m)e:{var y=r;d=d.split(".");for(var k=0;k<d.length-1;k++){var L=d[k];if(!(L in y))break e;y=y[L]}d=d[d.length-1],k=y[d],m=m(k),m!=k&&m!=null&&e(y,d,{configurable:!0,writable:!0,value:m})}}function i(d,m){d instanceof String&&(d+="");var y=0,k=!1,L={next:function(){if(!k&&y<d.length){var M=y++;return{value:m(M,d[M]),done:!1}}return k=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(d){return d||function(){return i(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var m=typeof d;return m=m!="object"?m:d?Array.isArray(d)?"array":m:"null",m=="array"||m=="object"&&typeof d.length=="number"}function u(d){var m=typeof d;return m=="object"&&d!=null||m=="function"}function h(d,m,y){return d.call.apply(d.bind,arguments)}function f(d,m,y){if(!d)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,k),d.apply(m,L)}}return function(){return d.apply(m,arguments)}}function p(d,m,y){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(d,m){var y=Array.prototype.slice.call(arguments,1);return function(){var k=y.slice();return k.push.apply(k,arguments),d.apply(this,k)}}function _(d,m){function y(){}y.prototype=m.prototype,d.aa=m.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(k,L,M){for(var W=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)W[Ae-2]=arguments[Ae];return m.prototype[L].apply(k,W)}}function w(d){const m=d.length;if(0<m){const y=Array(m);for(let k=0;k<m;k++)y[k]=d[k];return y}return[]}function T(d,m){for(let y=1;y<arguments.length;y++){const k=arguments[y];if(l(k)){const L=d.length||0,M=k.length||0;d.length=L+M;for(let W=0;W<M;W++)d[L+W]=k[W]}else d.push(k)}}class E{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function v(d){return/^[\s\xa0]*$/.test(d)}function x(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function I(d){return I[" "](d),d}I[" "]=function(){};var j=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function D(d,m,y){for(const k in d)m.call(y,d[k],k,d)}function N(d,m){for(const y in d)m.call(void 0,d[y],y,d)}function b(d){const m={};for(const y in d)m[y]=d[y];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,m){let y,k;for(let L=1;L<arguments.length;L++){k=arguments[L];for(y in k)d[y]=k[y];for(let M=0;M<S.length;M++)y=S[M],Object.prototype.hasOwnProperty.call(k,y)&&(d[y]=k[y])}}function R(d){var m=1;d=d.split(":");const y=[];for(;0<m&&d.length;)y.push(d.shift()),m--;return d.length&&y.push(d.join(":")),y}function V(d){a.setTimeout(()=>{throw d},0)}function A(){var d=$;let m=null;return d.g&&(m=d.g,d.g=d.g.next,d.g||(d.h=null),m.next=null),m}class ne{constructor(){this.h=this.g=null}add(m,y){const k=me.get();k.set(m,y),this.h?this.h.next=k:this.g=k,this.h=k}}var me=new E(()=>new fe,d=>d.reset());class fe{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let se,z=!1,$=new ne,G=()=>{const d=a.Promise.resolve(void 0);se=()=>{d.then(ee)}};var ee=()=>{for(var d;d=A();){try{d.h.call(d.g)}catch(y){V(y)}var m=me;m.j(d),100>m.h&&(m.h++,d.next=m.g,m.g=d)}z=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(d,m){this.type=d,this.g=this.target=m,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var yt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,m=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const y=()=>{};a.addEventListener("test",y,m),a.removeEventListener("test",y,m)}catch{}return d}();function ht(d,m){if(xe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,k=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=m,m=d.relatedTarget){if(j){e:{try{I(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else y=="mouseover"?m=d.fromElement:y=="mouseout"&&(m=d.toElement);this.relatedTarget=m,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:at[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ht.aa.h.call(this)}}_(ht,xe);var at={2:"touch",3:"pen",4:"mouse"};ht.prototype.h=function(){ht.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Jt="closure_listenable_"+(1e6*Math.random()|0),ja=0;function Ur(d,m,y,k,L){this.listener=d,this.proxy=null,this.src=m,this.type=y,this.capture=!!k,this.ha=L,this.key=++ja,this.da=this.fa=!1}function vn(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function F(d){this.src=d,this.g={},this.h=0}F.prototype.add=function(d,m,y,k,L){var M=d.toString();d=this.g[M],d||(d=this.g[M]=[],this.h++);var W=Se(d,m,k,L);return-1<W?(m=d[W],y||(m.fa=!1)):(m=new Ur(m,this.src,M,!!k,L),m.fa=y,d.push(m)),m};function ie(d,m){var y=m.type;if(y in d.g){var k=d.g[y],L=Array.prototype.indexOf.call(k,m,void 0),M;(M=0<=L)&&Array.prototype.splice.call(k,L,1),M&&(vn(m),d.g[y].length==0&&(delete d.g[y],d.h--))}}function Se(d,m,y,k){for(var L=0;L<d.length;++L){var M=d[L];if(!M.da&&M.listener==m&&M.capture==!!y&&M.ha==k)return L}return-1}var Ie="closure_lm_"+(1e6*Math.random()|0),Ce={};function we(d,m,y,k,L){if(Array.isArray(m)){for(var M=0;M<m.length;M++)we(d,m[M],y,k,L);return null}return y=Mv(y),d&&d[Jt]?d.K(m,y,u(k)?!!k.capture:!!k,L):Ye(d,m,y,!1,k,L)}function Ye(d,m,y,k,L,M){if(!m)throw Error("Invalid event type");var W=u(L)?!!L.capture:!!L,Ae=$r(d);if(Ae||(d[Ie]=Ae=new F(d)),y=Ae.add(m,y,k,W,M),y.proxy)return y;if(k=Ze(),y.proxy=k,k.src=d,k.listener=y,d.addEventListener)yt||(L=W),L===void 0&&(L=!1),d.addEventListener(m.toString(),k,L);else if(d.attachEvent)d.attachEvent(Qs(m.toString()),k);else if(d.addListener&&d.removeListener)d.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ze(){function d(y){return m.call(d.src,d.listener,y)}const m=ru;return d}function Nt(d,m,y,k,L){if(Array.isArray(m))for(var M=0;M<m.length;M++)Nt(d,m[M],y,k,L);else k=u(k)?!!k.capture:!!k,y=Mv(y),d&&d[Jt]?(d=d.i,m=String(m).toString(),m in d.g&&(M=d.g[m],y=Se(M,y,k,L),-1<y&&(vn(M[y]),Array.prototype.splice.call(M,y,1),M.length==0&&(delete d.g[m],d.h--)))):d&&(d=$r(d))&&(m=d.g[m.toString()],d=-1,m&&(d=Se(m,y,k,L)),(y=-1<d?m[d]:null)&&Br(y))}function Br(d){if(typeof d!="number"&&d&&!d.da){var m=d.src;if(m&&m[Jt])ie(m.i,d);else{var y=d.type,k=d.proxy;m.removeEventListener?m.removeEventListener(y,k,d.capture):m.detachEvent?m.detachEvent(Qs(y),k):m.addListener&&m.removeListener&&m.removeListener(k),(y=$r(m))?(ie(y,d),y.h==0&&(y.src=null,m[Ie]=null)):vn(d)}}}function Qs(d){return d in Ce?Ce[d]:Ce[d]="on"+d}function ru(d,m){if(d.da)d=!0;else{m=new ht(m,this);var y=d.listener,k=d.ha||d.src;d.fa&&Br(d),d=y.call(k,m)}return d}function $r(d){return d=d[Ie],d instanceof F?d:null}var ao="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mv(d){return typeof d=="function"?d:(d[ao]||(d[ao]=function(m){return d.handleEvent(m)}),d[ao])}function kt(){ue.call(this),this.i=new F(this),this.M=this,this.F=null}_(kt,ue),kt.prototype[Jt]=!0,kt.prototype.removeEventListener=function(d,m,y,k){Nt(this,d,m,y,k)};function Ft(d,m){var y,k=d.F;if(k)for(y=[];k;k=k.F)y.push(k);if(d=d.M,k=m.type||m,typeof m=="string")m=new xe(m,d);else if(m instanceof xe)m.target=m.target||d;else{var L=m;m=new xe(k,d),P(m,L)}if(L=!0,y)for(var M=y.length-1;0<=M;M--){var W=m.g=y[M];L=su(W,k,!0,m)&&L}if(W=m.g=d,L=su(W,k,!0,m)&&L,L=su(W,k,!1,m)&&L,y)for(M=0;M<y.length;M++)W=m.g=y[M],L=su(W,k,!1,m)&&L}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var d=this.i,m;for(m in d.g){for(var y=d.g[m],k=0;k<y.length;k++)vn(y[k]);delete d.g[m],d.h--}}this.F=null},kt.prototype.K=function(d,m,y,k){return this.i.add(String(d),m,!1,y,k)},kt.prototype.L=function(d,m,y,k){return this.i.add(String(d),m,!0,y,k)};function su(d,m,y,k){if(m=d.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,M=0;M<m.length;++M){var W=m[M];if(W&&!W.da&&W.capture==y){var Ae=W.listener,vt=W.ha||W.src;W.fa&&ie(d.i,W),L=Ae.call(vt,k)!==!1&&L}}return L&&!k.defaultPrevented}function Fv(d,m,y){if(typeof d=="function")y&&(d=p(d,y));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(d,m||0)}function Uv(d){d.g=Fv(()=>{d.g=null,d.i&&(d.i=!1,Uv(d))},d.l);const m=d.h;d.h=null,d.m.apply(null,m)}class CC extends ue{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Uv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Da(d){ue.call(this),this.h=d,this.g={}}_(Da,ue);var Bv=[];function $v(d){D(d.g,function(m,y){this.g.hasOwnProperty(y)&&Br(m)},d),d.g={}}Da.prototype.N=function(){Da.aa.N.call(this),$v(this)},Da.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Uf=a.JSON.stringify,PC=a.JSON.parse,AC=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Bf(){}Bf.prototype.h=null;function zv(d){return d.h||(d.h=d.i())}function Hv(){}var Va={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $f(){xe.call(this,"d")}_($f,xe);function zf(){xe.call(this,"c")}_(zf,xe);var Ys={},qv=null;function iu(){return qv=qv||new kt}Ys.La="serverreachability";function Kv(d){xe.call(this,Ys.La,d)}_(Kv,xe);function La(d){const m=iu();Ft(m,new Kv(m))}Ys.STAT_EVENT="statevent";function Wv(d,m){xe.call(this,Ys.STAT_EVENT,d),this.stat=m}_(Wv,xe);function Ut(d){const m=iu();Ft(m,new Wv(m,d))}Ys.Ma="timingevent";function Gv(d,m){xe.call(this,Ys.Ma,d),this.size=m}_(Gv,xe);function Oa(d,m){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},m)}function Ma(){this.g=!0}Ma.prototype.xa=function(){this.g=!1};function RC(d,m,y,k,L,M){d.info(function(){if(d.g)if(M)for(var W="",Ae=M.split("&"),vt=0;vt<Ae.length;vt++){var Ee=Ae[vt].split("=");if(1<Ee.length){var Ct=Ee[0];Ee=Ee[1];var Pt=Ct.split("_");W=2<=Pt.length&&Pt[1]=="type"?W+(Ct+"="+Ee+"&"):W+(Ct+"=redacted&")}}else W=null;else W=M;return"XMLHTTP REQ ("+k+") [attempt "+L+"]: "+m+`
`+y+`
`+W})}function jC(d,m,y,k,L,M,W){d.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+L+"]: "+m+`
`+y+`
`+M+" "+W})}function lo(d,m,y,k){d.info(function(){return"XMLHTTP TEXT ("+m+"): "+VC(d,y)+(k?" "+k:"")})}function DC(d,m){d.info(function(){return"TIMEOUT: "+m})}Ma.prototype.info=function(){};function VC(d,m){if(!d.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var k=y[d];if(!(2>k.length)){var L=k[1];if(Array.isArray(L)&&!(1>L.length)){var M=L[0];if(M!="noop"&&M!="stop"&&M!="close")for(var W=1;W<L.length;W++)L[W]=""}}}}return Uf(y)}catch{return m}}var ou={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hf;function au(){}_(au,Bf),au.prototype.g=function(){return new XMLHttpRequest},au.prototype.i=function(){return{}},Hf=new au;function zr(d,m,y,k){this.j=d,this.i=m,this.l=y,this.R=k||1,this.U=new Da(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yv}function Yv(){this.i=null,this.g="",this.h=!1}var Jv={},qf={};function Kf(d,m,y){d.L=1,d.v=du(or(m)),d.m=y,d.P=!0,Xv(d,null)}function Xv(d,m){d.F=Date.now(),lu(d),d.A=or(d.v);var y=d.A,k=d.R;Array.isArray(k)||(k=[String(k)]),hx(y.i,"t",k),d.C=0,y=d.j.J,d.h=new Yv,d.g=Px(d.j,y?m:null,!d.m),0<d.O&&(d.M=new CC(p(d.Y,d,d.g),d.O)),m=d.U,y=d.g,k=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(Bv[0]=L.toString()),L=Bv);for(var M=0;M<L.length;M++){var W=we(y,L[M],k||m.handleEvent,!1,m.h||m);if(!W)break;m.g[W.key]=W}m=d.H?b(d.H):{},d.m?(d.u||(d.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,m)):(d.u="GET",d.g.ea(d.A,d.u,null,m)),La(),RC(d.i,d.u,d.A,d.l,d.R,d.m)}zr.prototype.ca=function(d){d=d.target;const m=this.M;m&&ar(d)==3?m.j():this.Y(d)},zr.prototype.Y=function(d){try{if(d==this.g)e:{const Pt=ar(this.g);var m=this.g.Ba();const ho=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||xx(this.g)))){this.J||Pt!=4||m==7||(m==8||0>=ho?La(3):La(2)),Wf(this);var y=this.g.Z();this.X=y;t:if(Zv(this)){var k=xx(this.g);d="";var L=k.length,M=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Js(this),Fa(this);var W="";break t}this.h.i=new a.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,d+=this.h.i.decode(k[m],{stream:!(M&&m==L-1)});k.length=0,this.h.g+=d,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=y==200,jC(this.i,this.u,this.A,this.l,this.R,Pt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,vt=this.g;if((Ae=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ae)){var Ee=Ae;break t}}Ee=null}if(y=Ee)lo(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gf(this,y);else{this.o=!1,this.s=3,Ut(12),Js(this),Fa(this);break e}}if(this.P){y=!0;let jn;for(;!this.J&&this.C<W.length;)if(jn=LC(this,W),jn==qf){Pt==4&&(this.s=4,Ut(14),y=!1),lo(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==Jv){this.s=4,Ut(15),lo(this.i,this.l,W,"[Invalid Chunk]"),y=!1;break}else lo(this.i,this.l,jn,null),Gf(this,jn);if(Zv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||W.length!=0||this.h.h||(this.s=1,Ut(16),y=!1),this.o=this.o&&y,!y)lo(this.i,this.l,W,"[Invalid Chunked Response]"),Js(this),Fa(this);else if(0<W.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),ep(Ct),Ct.M=!0,Ut(11))}}else lo(this.i,this.l,W,null),Gf(this,W);Pt==4&&Js(this),this.o&&!this.J&&(Pt==4?Sx(this.j,this):(this.o=!1,lu(this)))}else ZC(this.g),y==400&&0<W.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Js(this),Fa(this)}}}catch{}finally{}};function Zv(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function LC(d,m){var y=d.C,k=m.indexOf(`
`,y);return k==-1?qf:(y=Number(m.substring(y,k)),isNaN(y)?Jv:(k+=1,k+y>m.length?qf:(m=m.slice(k,k+y),d.C=k+y,m)))}zr.prototype.cancel=function(){this.J=!0,Js(this)};function lu(d){d.S=Date.now()+d.I,ex(d,d.I)}function ex(d,m){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Oa(p(d.ba,d),m)}function Wf(d){d.B&&(a.clearTimeout(d.B),d.B=null)}zr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(DC(this.i,this.A),this.L!=2&&(La(),Ut(17)),Js(this),this.s=2,Fa(this)):ex(this,this.S-d)};function Fa(d){d.j.G==0||d.J||Sx(d.j,d)}function Js(d){Wf(d);var m=d.M;m&&typeof m.ma=="function"&&m.ma(),d.M=null,$v(d.U),d.g&&(m=d.g,d.g=null,m.abort(),m.ma())}function Gf(d,m){try{var y=d.j;if(y.G!=0&&(y.g==d||Qf(y.h,d))){if(!d.K&&Qf(y.h,d)&&y.G==3){try{var k=y.Da.g.parse(m)}catch{k=null}if(Array.isArray(k)&&k.length==3){var L=k;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)yu(y),mu(y);else break e;Zf(y),Ut(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Oa(p(y.Za,y),6e3));if(1>=rx(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Zs(y,11)}else if((d.K||y.g==d)&&yu(y),!v(m))for(L=y.Da.g.parse(m),m=0;m<L.length;m++){let Ee=L[m];if(y.T=Ee[0],Ee=Ee[1],y.G==2)if(Ee[0]=="c"){y.K=Ee[1],y.ia=Ee[2];const Ct=Ee[3];Ct!=null&&(y.la=Ct,y.j.info("VER="+y.la));const Pt=Ee[4];Pt!=null&&(y.Aa=Pt,y.j.info("SVER="+y.Aa));const ho=Ee[5];ho!=null&&typeof ho=="number"&&0<ho&&(k=1.5*ho,y.L=k,y.j.info("backChannelRequestTimeoutMs_="+k)),k=y;const jn=d.g;if(jn){const xu=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xu){var M=k.h;M.g||xu.indexOf("spdy")==-1&&xu.indexOf("quic")==-1&&xu.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Yf(M,M.h),M.h=null))}if(k.D){const tp=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;tp&&(k.ya=tp,De(k.I,k.D,tp))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),k=y;var W=d;if(k.qa=Cx(k,k.J?k.ia:null,k.W),W.K){sx(k.h,W);var Ae=W,vt=k.L;vt&&(Ae.I=vt),Ae.B&&(Wf(Ae),lu(Ae)),k.g=W}else Tx(k);0<y.i.length&&gu(y)}else Ee[0]!="stop"&&Ee[0]!="close"||Zs(y,7);else y.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Zs(y,7):Xf(y):Ee[0]!="noop"&&y.l&&y.l.ta(Ee),y.v=0)}}La(4)}catch{}}var OC=class{constructor(d,m){this.g=d,this.map=m}};function tx(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nx(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function rx(d){return d.h?1:d.g?d.g.size:0}function Qf(d,m){return d.h?d.h==m:d.g?d.g.has(m):!1}function Yf(d,m){d.g?d.g.add(m):d.h=m}function sx(d,m){d.h&&d.h==m?d.h=null:d.g&&d.g.has(m)&&d.g.delete(m)}tx.prototype.cancel=function(){if(this.i=ix(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ix(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let m=d.i;for(const y of d.g.values())m=m.concat(y.D);return m}return w(d.i)}function MC(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var m=[],y=d.length,k=0;k<y;k++)m.push(d[k]);return m}m=[],y=0;for(k in d)m[y++]=d[k];return m}function FC(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var m=[];d=d.length;for(var y=0;y<d;y++)m.push(y);return m}m=[],y=0;for(const k in d)m[y++]=k;return m}}}function ox(d,m){if(d.forEach&&typeof d.forEach=="function")d.forEach(m,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,m,void 0);else for(var y=FC(d),k=MC(d),L=k.length,M=0;M<L;M++)m.call(void 0,k[M],y&&y[M],d)}var ax=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UC(d,m){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var k=d[y].indexOf("="),L=null;if(0<=k){var M=d[y].substring(0,k);L=d[y].substring(k+1)}else M=d[y];m(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Xs(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Xs){this.h=d.h,cu(this,d.j),this.o=d.o,this.g=d.g,uu(this,d.s),this.l=d.l;var m=d.i,y=new $a;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),lx(this,y),this.m=d.m}else d&&(m=String(d).match(ax))?(this.h=!1,cu(this,m[1]||"",!0),this.o=Ua(m[2]||""),this.g=Ua(m[3]||"",!0),uu(this,m[4]),this.l=Ua(m[5]||"",!0),lx(this,m[6]||"",!0),this.m=Ua(m[7]||"")):(this.h=!1,this.i=new $a(null,this.h))}Xs.prototype.toString=function(){var d=[],m=this.j;m&&d.push(Ba(m,cx,!0),":");var y=this.g;return(y||m=="file")&&(d.push("//"),(m=this.o)&&d.push(Ba(m,cx,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(Ba(y,y.charAt(0)=="/"?zC:$C,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",Ba(y,qC)),d.join("")};function or(d){return new Xs(d)}function cu(d,m,y){d.j=y?Ua(m,!0):m,d.j&&(d.j=d.j.replace(/:$/,""))}function uu(d,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);d.s=m}else d.s=null}function lx(d,m,y){m instanceof $a?(d.i=m,KC(d.i,d.h)):(y||(m=Ba(m,HC)),d.i=new $a(m,d.h))}function De(d,m,y){d.i.set(m,y)}function du(d){return De(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ua(d,m){return d?m?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ba(d,m,y){return typeof d=="string"?(d=encodeURI(d).replace(m,BC),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function BC(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var cx=/[#\/\?@]/g,$C=/[#\?:]/g,zC=/[#\?]/g,HC=/[#\?@]/g,qC=/#/g;function $a(d,m){this.h=this.g=null,this.i=d||null,this.j=!!m}function Hr(d){d.g||(d.g=new Map,d.h=0,d.i&&UC(d.i,function(m,y){d.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=$a.prototype,t.add=function(d,m){Hr(this),this.i=null,d=co(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(m),this.h+=1,this};function ux(d,m){Hr(d),m=co(d,m),d.g.has(m)&&(d.i=null,d.h-=d.g.get(m).length,d.g.delete(m))}function dx(d,m){return Hr(d),m=co(d,m),d.g.has(m)}t.forEach=function(d,m){Hr(this),this.g.forEach(function(y,k){y.forEach(function(L){d.call(m,L,k,this)},this)},this)},t.na=function(){Hr(this);const d=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let k=0;k<m.length;k++){const L=d[k];for(let M=0;M<L.length;M++)y.push(m[k])}return y},t.V=function(d){Hr(this);let m=[];if(typeof d=="string")dx(this,d)&&(m=m.concat(this.g.get(co(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)m=m.concat(d[y])}return m},t.set=function(d,m){return Hr(this),this.i=null,d=co(this,d),dx(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[m]),this.h+=1,this},t.get=function(d,m){return d?(d=this.V(d),0<d.length?String(d[0]):m):m};function hx(d,m,y){ux(d,m),0<y.length&&(d.i=null,d.g.set(co(d,m),w(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var k=m[y];const M=encodeURIComponent(String(k)),W=this.V(k);for(k=0;k<W.length;k++){var L=M;W[k]!==""&&(L+="="+encodeURIComponent(String(W[k]))),d.push(L)}}return this.i=d.join("&")};function co(d,m){return m=String(m),d.j&&(m=m.toLowerCase()),m}function KC(d,m){m&&!d.j&&(Hr(d),d.i=null,d.g.forEach(function(y,k){var L=k.toLowerCase();k!=L&&(ux(this,k),hx(this,L,y))},d)),d.j=m}function WC(d,m){const y=new Ma;if(a.Image){const k=new Image;k.onload=g(qr,y,"TestLoadImage: loaded",!0,m,k),k.onerror=g(qr,y,"TestLoadImage: error",!1,m,k),k.onabort=g(qr,y,"TestLoadImage: abort",!1,m,k),k.ontimeout=g(qr,y,"TestLoadImage: timeout",!1,m,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=d}else m(!1)}function GC(d,m){const y=new Ma,k=new AbortController,L=setTimeout(()=>{k.abort(),qr(y,"TestPingServer: timeout",!1,m)},1e4);fetch(d,{signal:k.signal}).then(M=>{clearTimeout(L),M.ok?qr(y,"TestPingServer: ok",!0,m):qr(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),qr(y,"TestPingServer: error",!1,m)})}function qr(d,m,y,k,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),k(y)}catch{}}function QC(){this.g=new AC}function YC(d,m,y){const k=y||"";try{ox(d,function(L,M){let W=L;u(L)&&(W=Uf(L)),m.push(k+M+"="+encodeURIComponent(W))})}catch(L){throw m.push(k+"type="+encodeURIComponent("_badmap")),L}}function hu(d){this.l=d.Ub||null,this.j=d.eb||!1}_(hu,Bf),hu.prototype.g=function(){return new fu(this.l,this.j)},hu.prototype.i=function(d){return function(){return d}}({});function fu(d,m){kt.call(this),this.D=d,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(fu,kt),t=fu.prototype,t.open=function(d,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=m,this.readyState=1,Ha(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(m.body=d),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,za(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ha(this)),this.g&&(this.readyState=3,Ha(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fx(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function fx(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var m=d.value?d.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!d.done}))&&(this.response=this.responseText+=m)}d.done?za(this):Ha(this),this.readyState==3&&fx(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,za(this))},t.Qa=function(d){this.g&&(this.response=d,za(this))},t.ga=function(){this.g&&za(this)};function za(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Ha(d)}t.setRequestHeader=function(d,m){this.u.append(d,m)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=m.next();return d.join(`\r
`)};function Ha(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(fu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function px(d){let m="";return D(d,function(y,k){m+=k,m+=":",m+=y,m+=`\r
`}),m}function Jf(d,m,y){e:{for(k in y){var k=!1;break e}k=!0}k||(y=px(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):De(d,m,y))}function Je(d){kt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Je,kt);var JC=/^https?$/i,XC=["POST","PUT"];t=Je.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,m,y,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);m=m?m.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hf.g(),this.v=this.o?zv(this.o):zv(Hf),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(d),!0),this.B=!1}catch(M){mx(this,M);return}if(d=y||"",y=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var L in k)y.set(L,k[L]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const M of k.keys())y.set(M,k.get(M));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(y.keys()).find(M=>M.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(XC,m,void 0))||k||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,W]of y)this.g.setRequestHeader(M,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vx(this),this.u=!0,this.g.send(d),this.u=!1}catch(M){mx(this,M)}};function mx(d,m){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=m,d.m=5,gx(d),pu(d)}function gx(d){d.A||(d.A=!0,Ft(d,"complete"),Ft(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ft(this,"complete"),Ft(this,"abort"),pu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pu(this,!0)),Je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yx(this):this.bb())},t.bb=function(){yx(this)};function yx(d){if(d.h&&typeof o<"u"&&(!d.v[1]||ar(d)!=4||d.Z()!=2)){if(d.u&&ar(d)==4)Fv(d.Ea,0,d);else if(Ft(d,"readystatechange"),ar(d)==4){d.h=!1;try{const W=d.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var k;if(k=W===0){var L=String(d.D).match(ax)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),k=!JC.test(L?L.toLowerCase():"")}y=k}if(y)Ft(d,"complete"),Ft(d,"success");else{d.m=6;try{var M=2<ar(d)?d.g.statusText:""}catch{M=""}d.l=M+" ["+d.Z()+"]",gx(d)}}finally{pu(d)}}}}function pu(d,m){if(d.g){vx(d);const y=d.g,k=d.v[0]?()=>{}:null;d.g=null,d.v=null,m||Ft(d,"ready");try{y.onreadystatechange=k}catch{}}}function vx(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ar(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var m=this.g.responseText;return d&&m.indexOf(d)==0&&(m=m.substring(d.length)),PC(m)}};function xx(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ZC(d){const m={};d=(d.g&&2<=ar(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<d.length;k++){if(v(d[k]))continue;var y=R(d[k]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const M=m[L]||[];m[L]=M,M.push(y)}N(m,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qa(d,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||m}function wx(d){this.Aa=0,this.i=[],this.j=new Ma,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qa("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qa("baseRetryDelayMs",5e3,d),this.cb=qa("retryDelaySeedMs",1e4,d),this.Wa=qa("forwardChannelMaxRetries",2,d),this.wa=qa("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new tx(d&&d.concurrentRequestLimit),this.Da=new QC,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wx.prototype,t.la=8,t.G=1,t.connect=function(d,m,y,k){Ut(0),this.W=d,this.H=m||{},y&&k!==void 0&&(this.H.OSID=y,this.H.OAID=k),this.F=this.X,this.I=Cx(this,null,this.W),gu(this)};function Xf(d){if(_x(d),d.G==3){var m=d.U++,y=or(d.I);if(De(y,"SID",d.K),De(y,"RID",m),De(y,"TYPE","terminate"),Ka(d,y),m=new zr(d,d.j,m),m.L=2,m.v=du(or(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=m.v,y=!0),y||(m.g=Px(m.j,null),m.g.ea(m.v)),m.F=Date.now(),lu(m)}kx(d)}function mu(d){d.g&&(ep(d),d.g.cancel(),d.g=null)}function _x(d){mu(d),d.u&&(a.clearTimeout(d.u),d.u=null),yu(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function gu(d){if(!nx(d.h)&&!d.s){d.s=!0;var m=d.Ga;se||G(),z||(se(),z=!0),$.add(m,d),d.B=0}}function eP(d,m){return rx(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=m.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Oa(p(d.Ga,d,m),Nx(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const L=new zr(this,this.j,d);let M=this.o;if(this.S&&(M?(M=b(M),P(M,this.S)):M=this.S),this.m!==null||this.O||(L.H=M,M=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var k=this.i[y];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(m+=k,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Ex(this,L,m),y=or(this.I),De(y,"RID",d),De(y,"CVER",22),this.D&&De(y,"X-HTTP-Session-Id",this.D),Ka(this,y),M&&(this.O?m="headers="+encodeURIComponent(String(px(M)))+"&"+m:this.m&&Jf(y,this.m,M)),Yf(this.h,L),this.Ua&&De(y,"TYPE","init"),this.P?(De(y,"$req",m),De(y,"SID","null"),L.T=!0,Kf(L,y,null)):Kf(L,y,m),this.G=2}}else this.G==3&&(d?bx(this,d):this.i.length==0||nx(this.h)||bx(this))};function bx(d,m){var y;m?y=m.l:y=d.U++;const k=or(d.I);De(k,"SID",d.K),De(k,"RID",y),De(k,"AID",d.T),Ka(d,k),d.m&&d.o&&Jf(k,d.m,d.o),y=new zr(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),m&&(d.i=m.D.concat(d.i)),m=Ex(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Yf(d.h,y),Kf(y,k,m)}function Ka(d,m){d.H&&D(d.H,function(y,k){De(m,k,y)}),d.l&&ox({},function(y,k){De(m,k,y)})}function Ex(d,m,y){y=Math.min(d.i.length,y);var k=d.l?p(d.l.Na,d.l,d):null;e:{var L=d.i;let M=-1;for(;;){const W=["count="+y];M==-1?0<y?(M=L[0].g,W.push("ofs="+M)):M=0:W.push("ofs="+M);let Ae=!0;for(let vt=0;vt<y;vt++){let Ee=L[vt].g;const Ct=L[vt].map;if(Ee-=M,0>Ee)M=Math.max(0,L[vt].g-100),Ae=!1;else try{YC(Ct,W,"req"+Ee+"_")}catch{k&&k(Ct)}}if(Ae){k=W.join("&");break e}}}return d=d.i.splice(0,y),m.D=d,k}function Tx(d){if(!d.g&&!d.u){d.Y=1;var m=d.Fa;se||G(),z||(se(),z=!0),$.add(m,d),d.v=0}}function Zf(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Oa(p(d.Fa,d),Nx(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,Ix(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Oa(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),mu(this),Ix(this))};function ep(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function Ix(d){d.g=new zr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var m=or(d.qa);De(m,"RID","rpc"),De(m,"SID",d.K),De(m,"AID",d.T),De(m,"CI",d.F?"0":"1"),!d.F&&d.ja&&De(m,"TO",d.ja),De(m,"TYPE","xmlhttp"),Ka(d,m),d.m&&d.o&&Jf(m,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=du(or(m)),y.m=null,y.P=!0,Xv(y,d)}t.Za=function(){this.C!=null&&(this.C=null,mu(this),Zf(this),Ut(19))};function yu(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Sx(d,m){var y=null;if(d.g==m){yu(d),ep(d),d.g=null;var k=2}else if(Qf(d.h,m))y=m.D,sx(d.h,m),k=1;else return;if(d.G!=0){if(m.o)if(k==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var L=d.B;k=iu(),Ft(k,new Gv(k,y)),gu(d)}else Tx(d);else if(L=m.s,L==3||L==0&&0<m.X||!(k==1&&eP(d,m)||k==2&&Zf(d)))switch(y&&0<y.length&&(m=d.h,m.i=m.i.concat(y)),L){case 1:Zs(d,5);break;case 4:Zs(d,10);break;case 3:Zs(d,6);break;default:Zs(d,2)}}}function Nx(d,m){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*m}function Zs(d,m){if(d.j.info("Error code "+m),m==2){var y=p(d.fb,d),k=d.Xa;const L=!k;k=new Xs(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cu(k,"https"),du(k),L?WC(k.toString(),y):GC(k.toString(),y)}else Ut(2);d.G=0,d.l&&d.l.sa(m),kx(d),_x(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function kx(d){if(d.G=0,d.ka=[],d.l){const m=ix(d.h);(m.length!=0||d.i.length!=0)&&(T(d.ka,m),T(d.ka,d.i),d.h.i.length=0,w(d.i),d.i.length=0),d.l.ra()}}function Cx(d,m,y){var k=y instanceof Xs?or(y):new Xs(y);if(k.g!="")m&&(k.g=m+"."+k.g),uu(k,k.s);else{var L=a.location;k=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var M=new Xs(null);k&&cu(M,k),m&&(M.g=m),L&&uu(M,L),y&&(M.l=y),k=M}return y=d.D,m=d.ya,y&&m&&De(k,y,m),De(k,"VER",d.la),Ka(d,k),k}function Px(d,m,y){if(m&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=d.Ca&&!d.pa?new Je(new hu({eb:y})):new Je(d.pa),m.Ha(d.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ax(){}t=Ax.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function vu(){}vu.prototype.g=function(d,m){return new ln(d,m)};function ln(d,m){kt.call(this),this.g=new wx(m),this.l=d,this.h=m&&m.messageUrlParams||null,d=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(d?d["X-WebChannel-Content-Type"]=m.messageContentType:d={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(d?d["X-WebChannel-Client-Profile"]=m.va:d={"X-WebChannel-Client-Profile":m.va}),this.g.S=d,(d=m&&m.Sb)&&!v(d)&&(this.g.m=d),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!v(m)&&(this.g.D=m,d=this.h,d!==null&&m in d&&(d=this.h,m in d&&delete d[m])),this.j=new uo(this)}_(ln,kt),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Xf(this.g)},ln.prototype.o=function(d){var m=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=Uf(d),d=y);m.i.push(new OC(m.Ya++,d)),m.G==3&&gu(m)},ln.prototype.N=function(){this.g.l=null,delete this.j,Xf(this.g),delete this.g,ln.aa.N.call(this)};function Rx(d){$f.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var m=d.__sm__;if(m){e:{for(const y in m){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,m=m!==null&&d in m?m[d]:void 0),this.data=m}else this.data=d}_(Rx,$f);function jx(){zf.call(this),this.status=1}_(jx,zf);function uo(d){this.g=d}_(uo,Ax),uo.prototype.ua=function(){Ft(this.g,"a")},uo.prototype.ta=function(d){Ft(this.g,new Rx(d))},uo.prototype.sa=function(d){Ft(this.g,new jx)},uo.prototype.ra=function(){Ft(this.g,"b")},vu.prototype.createWebChannel=vu.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,GS=function(){return new vu},WS=function(){return iu()},KS=Ys,dg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ou.NO_ERROR=0,ou.TIMEOUT=8,ou.HTTP_ERROR=6,gd=ou,Qv.COMPLETE="complete",qS=Qv,Hv.EventType=Va,Va.OPEN="a",Va.CLOSE="b",Va.ERROR="c",Va.MESSAGE="d",kt.prototype.listen=kt.prototype.K,xl=Hv,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,HS=Je}).apply(typeof Fu<"u"?Fu:typeof self<"u"?self:typeof window<"u"?window:{});const A1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new e0("@firebase/firestore");function wo(){return ji.logLevel}function H(t,...e){if(ji.logLevel<=ye.DEBUG){const n=e.map(p0);ji.debug(`Firestore (${Ia}): ${t}`,...n)}}function Ht(t,...e){if(ji.logLevel<=ye.ERROR){const n=e.map(p0);ji.error(`Firestore (${Ia}): ${t}`,...n)}}function Di(t,...e){if(ji.logLevel<=ye.WARN){const n=e.map(p0);ji.warn(`Firestore (${Ia}): ${t}`,...n)}}function p0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${Ia}) INTERNAL ASSERTION FAILED: `+t;throw Ht(e),new Error(e)}function te(t,e){t||Z()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class SO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class NO{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){te(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string"),new QS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string"),new wt(e)}}class kO{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class CO{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new kO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){te(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(te(typeof n.token=="string"),this.R=n.token,new PO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=RO(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function la(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function JS(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Be(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new Be(0,0))}static max(){return new re(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Te extends hc{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const jO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends hc{construct(e,n,r){return new qe(e,n,r)}static isValidIdentifier(e){return jO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Te.fromString(e))}static fromName(e){return new Q(Te.fromString(e).popFirst(5))}static empty(){return new Q(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Te(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function hg(t){return t.fields.find(e=>e.kind===2)}function oi(t){return t.fields.filter(e=>e.kind!==2)}ah.UNKNOWN_ID=-1;class yd{constructor(e,n){this.fieldPath=e,this.kind=n}}class fc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new fc(0,pn.min())}}function DO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new pn(s,Q.empty(),e)}function XS(t){return new pn(t.readTime,t.key,-1)}class pn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pn(re.min(),Q.empty(),-1)}static max(){return new pn(re.max(),Q.empty(),-1)}}function m0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zi(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==ZS)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new zn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Vl(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=g0(r.target.error);this.V.reject(new Vl(e,s))}}static open(e,n,r,s){try{return new cf(n,e.transaction(s,r))}catch(i){throw new Vl(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(H("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new LO(n)}}class Es{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Es.S(ut())===12.2&&Ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return H("SimpleDb","Removing database:",e),ui(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!sS())return!1;if(Es.v())return!0;const e=ut(),n=Es.S(e),r=0<n&&n<10,s=t2(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(H("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Vl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new K(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Vl(e,o))},s.onupgradeneeded=i=>{H("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{H("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=cf.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),O.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(H("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function t2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class VO{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ui(this.B.delete())}}class Vl extends K{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ks(t){return t.name==="IndexedDbTransactionError"}class LO{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(H("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(H("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ui(r)}add(e){return H("SimpleDb","ADD",this.store.name,e,e),ui(this.store.add(e))}get(e){return ui(this.store.get(e)).next(n=>(n===void 0&&(n=null),H("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return H("SimpleDb","DELETE",this.store.name,e),ui(this.store.delete(e))}count(){return H("SimpleDb","COUNT",this.store.name),ui(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new O((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){H("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new O((r,s)=>{n.onerror=i=>{const o=g0(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new O((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new VO(a),u=n(a.primaryKey,a.value,l);if(u instanceof O){const h=u.catch(f=>(l.done(),O.reject(f)));r.push(h)}l.isDone?s():l.K===null?a.continue():a.continue(l.K)}}).next(()=>O.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ui(t){return new O((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=g0(r.target.error);n(s)}})}let R1=!1;function g0(t){const e=Es.S(ut());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return R1||(R1=!0,setTimeout(()=>{throw r},0)),r}}return t}class OO{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){H("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{H("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Ks(n)?H("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Zi(n)}await this.X(6e4)})}}class MO{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return O.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return H("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(a=>(H("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=XS(i);m0(o,r)>0&&(r=o)}),new pn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}In.oe=-1;function $c(t){return t==null}function pc(t){return t===0&&1/t==-1/0}function FO(t){return typeof t=="number"&&Number.isInteger(t)&&!pc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=j1(e)),e=UO(t.get(n),e);return j1(e)}function UO(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function j1(t){return t+""}function Gn(t){const e=t.length;if(te(e>=2),e===2)return te(t.charAt(0)===""&&t.charAt(1)===""),Te.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&Z(),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:Z()}i=o+2}return new Te(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t,e){return[t,Kt(e)]}function n2(t,e,n){return[t,Kt(e),n]}const BO={},$O=["prefixPath","collectionGroup","readTime","documentId"],zO=["prefixPath","collectionGroup","documentId"],HO=["collectionGroup","readTime","prefixPath","documentId"],qO=["canonicalId","targetId"],KO=["targetId","path"],WO=["path","targetId"],GO=["collectionId","parent"],QO=["indexId","uid"],YO=["uid","sequenceNumber"],JO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],XO=["indexId","uid","orderedDocumentKey"],ZO=["userId","collectionPath","documentId"],eM=["userId","collectionPath","largestBatchId"],tM=["userId","collectionGroup","largestBatchId"],r2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],nM=[...r2,"documentOverlays"],s2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],i2=s2,y0=[...i2,"indexConfiguration","indexState","indexEntries"],rM=y0,sM=[...y0,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends e2{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function dt(t,e){const n=le(t);return Es.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uu(this.root,e,this.comparator,!0)}}class Uu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??_t.RED,this.left=s??_t.EMPTY,this.right=i??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new _t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return _t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new L1(this.data.getIterator())}getIteratorFrom(e){return new L1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Pe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pe(this.comparator);return n.data=e,n}}class L1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function po(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.fields=e,e.sort(qe.comparator)}static empty(){return new tn([])}unionWith(e){let n=new Pe(qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return la(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new a2("Invalid base64 string: "+i):i}}(e);return new ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const iM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if(te(!!t),typeof t=="string"){let e=0;const n=iM.exec(t);if(te(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function As(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function x0(t){const e=t.mapValue.fields.__previous_value__;return v0(e)?x0(e):e}function mc(t){const e=Dr(t.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Vi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Vi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Vi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xd={nullValue:"NULL_VALUE"};function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?v0(t)?4:l2(t)?9007199254740991:uf(t)?10:11:Z()}function nr(t,e){if(t===e)return!0;const n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mc(t).isEqual(mc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Dr(s.timestampValue),a=Dr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return As(s.bytesValue).isEqual(As(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Oe(s.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Oe(s.integerValue)===Oe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Oe(s.doubleValue),a=Oe(i.doubleValue);return o===a?pc(o)===pc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return la(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(V1(o)!==V1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!nr(o[l],a[l])))return!1;return!0}(t,e);default:return Z()}}function gc(t,e){return(t.values||[]).find(n=>nr(n,e))!==void 0}function Rs(t,e){if(t===e)return 0;const n=Li(t),r=Li(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Oe(i.integerValue||i.doubleValue),l=Oe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return O1(t.timestampValue,e.timestampValue);case 4:return O1(mc(t),mc(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(i,o){const a=As(i),l=As(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=de(a[u],l[u]);if(h!==0)return h}return de(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=de(Oe(i.latitude),Oe(o.latitude));return a!==0?a:de(Oe(i.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return M1(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,u,h;const f=i.fields||{},p=o.fields||{},g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,_=(l=p.value)===null||l===void 0?void 0:l.arrayValue,w=de(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:M1(g,_)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ds.mapValue&&o===ds.mapValue)return 0;if(i===ds.mapValue)return 1;if(o===ds.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=de(l[f],h[f]);if(p!==0)return p;const g=Rs(a[l[f]],u[h[f]]);if(g!==0)return g}return de(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Z()}}function O1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Dr(t),r=Dr(e),s=de(n.seconds,r.seconds);return s!==0?s:de(n.nanos,r.nanos)}function M1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Rs(n[s],r[s]);if(i)return i}return de(n.length,r.length)}function ca(t){return pg(t)}function pg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Dr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return As(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=pg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${pg(n.fields[o])}`;return s+"}"}(t.mapValue):Z()}function yc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mg(t){return!!t&&"integerValue"in t}function vc(t){return!!t&&"arrayValue"in t}function F1(t){return!!t&&"nullValue"in t}function U1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wd(t){return!!t&&"mapValue"in t}function uf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ll(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return eo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ll(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ll(t.arrayValue.values[n]);return e}return Object.assign({},t)}function l2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const c2={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function aM(t){return"nullValue"in t?xd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?yc(Vi.empty(),Q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?uf(t)?c2:{mapValue:{}}:Z()}function lM(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?yc(Vi.empty(),Q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?c2:"mapValue"in t?uf(t)?{mapValue:{}}:ds:Z()}function B1(t,e){const n=Rs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function $1(t,e){const n=Rs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(n)}setAll(e){let n=qe.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ll(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());wd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];wd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){eo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bt(Ll(this.value))}}function u2(t){const e=[];return eo(t.fields,(n,r)=>{const s=new qe([n]);if(wd(r)){const i=u2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Fe(e,0,re.min(),re.min(),re.min(),bt.empty(),0)}static newFoundDocument(e,n,r,s){return new Fe(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new Fe(e,2,n,re.min(),re.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new Fe(e,3,n,re.min(),re.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.position=e,this.inclusive=n}}function z1(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Rs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function H1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function cM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{}class ve extends d2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uM(e,n,r):n==="array-contains"?new fM(e,r):n==="in"?new y2(e,r):n==="not-in"?new pM(e,r):n==="array-contains-any"?new mM(e,r):new ve(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dM(e,r):new hM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Rs(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(Rs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ne extends d2{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ne(e,n)}matches(e){return da(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function da(t){return t.op==="and"}function gg(t){return t.op==="or"}function w0(t){return h2(t)&&da(t)}function h2(t){for(const e of t.filters)if(e instanceof Ne)return!1;return!0}function yg(t){if(t instanceof ve)return t.field.canonicalString()+t.op.toString()+ca(t.value);if(w0(t))return t.filters.map(e=>yg(e)).join(",");{const e=t.filters.map(n=>yg(n)).join(",");return`${t.op}(${e})`}}function f2(t,e){return t instanceof ve?function(r,s){return s instanceof ve&&r.op===s.op&&r.field.isEqual(s.field)&&nr(r.value,s.value)}(t,e):t instanceof Ne?function(r,s){return s instanceof Ne&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&f2(o,s.filters[a]),!0):!1}(t,e):void Z()}function p2(t,e){const n=t.filters.concat(e);return Ne.create(n,t.op)}function m2(t){return t instanceof ve?function(n){return`${n.field.canonicalString()} ${n.op} ${ca(n.value)}`}(t):t instanceof Ne?function(n){return n.op.toString()+" {"+n.getFilters().map(m2).join(" ,")+"}"}(t):"Filter"}class uM extends ve{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class dM extends ve{constructor(e,n){super(e,"in",n),this.keys=g2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hM extends ve{constructor(e,n){super(e,"not-in",n),this.keys=g2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function g2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class fM extends ve{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vc(n)&&gc(n.arrayValue,this.value)}}class y2 extends ve{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gc(this.value.arrayValue,n)}}class pM extends ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!gc(this.value.arrayValue,n)}}class mM extends ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>gc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function vg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new gM(t,e,n,r,s,i,o)}function Oi(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),$c(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ca(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ca(r)).join(",")),e.ue=n}return e.ue}function zc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!f2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!H1(t.startAt,e.startAt)&&H1(t.endAt,e.endAt)}function lh(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ch(t,e){return t.filters.filter(n=>n instanceof ve&&n.field.isEqual(e))}function q1(t,e,n){let r=xd,s=!0;for(const i of ch(t,e)){let o=xd,a=!0;switch(i.op){case"<":case"<=":o=aM(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=xd}B1({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];B1({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function K1(t,e,n){let r=ds,s=!0;for(const i of ch(t,e)){let o=ds,a=!0;switch(i.op){case">=":case">":o=lM(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=ds}$1({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];$1({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function yM(t,e,n,r,s,i,o,a){return new Sa(t,e,n,r,s,i,o,a)}function Hc(t){return new Sa(t)}function W1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function v2(t){return t.collectionGroup!==null}function Ol(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Pe(qe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new xc(i,r))}),n.has(qe.keyField().canonicalString())||e.ce.push(new xc(qe.keyField(),r))}return e.ce}function Nn(t){const e=le(t);return e.le||(e.le=vM(e,Ol(t))),e.le}function vM(t,e){if(t.limitType==="F")return vg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new xc(s.field,i)});const n=t.endAt?new ua(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ua(t.startAt.position,t.startAt.inclusive):null;return vg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xg(t,e){const n=t.filters.concat([e]);return new Sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function uh(t,e,n){return new Sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function df(t,e){return zc(Nn(t),Nn(e))&&t.limitType===e.limitType}function x2(t){return`${Oi(Nn(t))}|lt:${t.limitType}`}function _o(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>m2(s)).join(", ")}]`),$c(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ca(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ca(s)).join(",")),`Target(${r})`}(Nn(t))}; limitType=${t.limitType})`}function qc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ol(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=z1(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Ol(r),s)||r.endAt&&!function(o,a,l){const u=z1(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Ol(r),s))}(t,e)}function xM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function w2(t){return(e,n)=>{let r=!1;for(const s of Ol(t)){const i=wM(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function wM(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Rs(l,u):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return o2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=new ze(Q.comparator);function dn(){return _M}const _2=new ze(Q.comparator);function wl(...t){let e=_2;for(const n of t)e=e.insert(n.key,n);return e}function b2(t){let e=_2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qn(){return Ml()}function E2(){return Ml()}function Ml(){return new Ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const bM=new ze(Q.comparator),EM=new Pe(Q.comparator);function pe(...t){let e=EM;for(const n of t)e=e.add(n);return e}const TM=new Pe(de);function IM(){return TM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function T2(t){return{integerValue:""+t}}function I2(t,e){return FO(e)?T2(e):_0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this._=void 0}}function SM(t,e,n){return t instanceof ha?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&v0(i)&&(i=x0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Mi?N2(t,e):t instanceof Fi?k2(t,e):function(s,i){const o=S2(s,i),a=G1(o)+G1(s.Pe);return mg(o)&&mg(s.Pe)?T2(a):_0(s.serializer,a)}(t,e)}function NM(t,e,n){return t instanceof Mi?N2(t,e):t instanceof Fi?k2(t,e):n}function S2(t,e){return t instanceof fa?function(r){return mg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ha extends hf{}class Mi extends hf{constructor(e){super(),this.elements=e}}function N2(t,e){const n=C2(e);for(const r of t.elements)n.some(s=>nr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fi extends hf{constructor(e){super(),this.elements=e}}function k2(t,e){let n=C2(e);for(const r of t.elements)n=n.filter(s=>!nr(s,r));return{arrayValue:{values:n}}}class fa extends hf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function G1(t){return Oe(t.integerValue||t.doubleValue)}function C2(t){return vc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this.field=e,this.transform=n}}function kM(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Mi&&s instanceof Mi||r instanceof Fi&&s instanceof Fi?la(r.elements,s.elements,nr):r instanceof fa&&s instanceof fa?nr(r.Pe,s.Pe):r instanceof ha&&s instanceof ha}(t.transform,e.transform)}class CM{constructor(e,n){this.version=e,this.transformResults=n}}class Ue{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ue}static exists(e){return new Ue(void 0,e)}static updateTime(e){return new Ue(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _d(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ff{}function P2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ka(t.key,Ue.none()):new Na(t.key,t.data,Ue.none());{const n=t.data,r=bt.empty();let s=new Pe(qe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Mr(t.key,r,new tn(s.toArray()),Ue.none())}}function PM(t,e,n){t instanceof Na?function(s,i,o){const a=s.value.clone(),l=Y1(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Mr?function(s,i,o){if(!_d(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Y1(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(A2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fl(t,e,n,r){return t instanceof Na?function(i,o,a,l){if(!_d(i.precondition,o))return a;const u=i.value.clone(),h=J1(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mr?function(i,o,a,l){if(!_d(i.precondition,o))return a;const u=J1(i.fieldTransforms,l,o),h=o.data;return h.setAll(A2(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return _d(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function AM(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=S2(r.transform,s||null);i!=null&&(n===null&&(n=bt.empty()),n.set(r.field,i))}return n||null}function Q1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&la(r,s,(i,o)=>kM(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Na extends ff{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Mr extends ff{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function A2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Y1(t,e,n){const r=new Map;te(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,NM(o,a,n[s]))}return r}function J1(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,SM(i,o,e))}return r}class ka extends ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b0 extends ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&PM(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=E2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=P2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&la(this.mutations,e.mutations,(n,r)=>Q1(n,r))&&la(this.baseMutations,e.baseMutations,(n,r)=>Q1(n,r))}}class T0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){te(e.mutations.length===r.length);let s=function(){return bM}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new T0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,_e;function R2(t){switch(t){default:return Z();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function j2(t){if(t===void 0)return Ht("GRPC error has no .code"),B.UNKNOWN;switch(t){case rt.OK:return B.OK;case rt.CANCELLED:return B.CANCELLED;case rt.UNKNOWN:return B.UNKNOWN;case rt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case rt.INTERNAL:return B.INTERNAL;case rt.UNAVAILABLE:return B.UNAVAILABLE;case rt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case rt.NOT_FOUND:return B.NOT_FOUND;case rt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case rt.ABORTED:return B.ABORTED;case rt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case rt.DATA_LOSS:return B.DATA_LOSS;default:return Z()}}(_e=rt||(rt={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=new bi([4294967295,4294967295],0);function X1(t){const e=jM().encode(t),n=new zS;return n.update(e),new Uint8Array(n.digest())}function Z1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new bi([n,r],0),new bi([s,i],0)]}class S0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _l(`Invalid padding: ${n}`);if(r<0)throw new _l(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _l(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _l(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=bi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(bi.fromNumber(r)));return s.compare(DM)===1&&(s=new bi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=X1(e),[r,s]=Z1(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new S0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=X1(e),[r,s]=Z1(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Wc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pf(re.min(),s,new ze(de),dn(),pe())}}class Wc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wc(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class D2{constructor(e,n){this.targetId=e,this.me=n}}class V2{constructor(e,n,r=ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class e_{constructor(){this.fe=0,this.ge=n_(),this.pe=ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new Wc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=n_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VM{constructor(e){this.Le=e,this.Be=new Map,this.ke=dn(),this.qe=t_(),this.Qe=new ze(de)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(lh(i))if(r===0){const o=new Q(i.path);this.Ue(n,o,Fe.newNoDocument(o,re.min()))}else te(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=As(r).toUint8Array()}catch(l){if(l instanceof a2)return Di("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new S0(o,s,i)}catch(l){return Di(l instanceof _l?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&lh(a.target)){const l=new Q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Fe.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=pe();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new pf(e,n,this.Qe,this.ke,r);return this.ke=dn(),this.qe=t_(),this.Qe=new ze(de),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new e_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Pe(de),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new e_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function t_(){return new ze(Q.comparator)}function n_(){return new ze(Q.comparator)}const LM={asc:"ASCENDING",desc:"DESCENDING"},OM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MM={and:"AND",or:"OR"};class FM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wg(t,e){return t.useProto3Json||$c(e)?e:{value:e}}function pa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UM(t,e){return pa(t,e.toTimestamp())}function gt(t){return te(!!t),re.fromTimestamp(function(n){const r=Dr(n);return new Be(r.seconds,r.nanos)}(t))}function N0(t,e){return _g(t,e).canonicalString()}function _g(t,e){const n=function(s){return new Te(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function O2(t){const e=Te.fromString(t);return te(K2(e)),e}function wc(t,e){return N0(t.databaseId,e.path)}function Er(t,e){const n=O2(e);if(n.get(1)!==t.databaseId.projectId)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(U2(n))}function M2(t,e){return N0(t.databaseId,e)}function F2(t){const e=O2(t);return e.length===4?Te.emptyPath():U2(e)}function bg(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function U2(t){return te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function r_(t,e,n){return{name:wc(t,e),fields:n.value.mapValue.fields}}function BM(t,e,n){const r=Er(t,e.name),s=gt(e.updateTime),i=e.createTime?gt(e.createTime):re.min(),o=new bt({mapValue:{fields:e.fields}}),a=Fe.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function $M(t,e){return"found"in e?function(r,s){te(!!s.found),s.found.name,s.found.updateTime;const i=Er(r,s.found.name),o=gt(s.found.updateTime),a=s.found.createTime?gt(s.found.createTime):re.min(),l=new bt({mapValue:{fields:s.found.fields}});return Fe.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){te(!!s.missing),te(!!s.readTime);const i=Er(r,s.missing),o=gt(s.readTime);return Fe.newNoDocument(i,o)}(t,e):Z()}function zM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(te(h===void 0||typeof h=="string"),ot.fromBase64String(h||"")):(te(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?B.UNKNOWN:j2(u.code);return new K(h,u.message||"")}(o);n=new V2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Er(t,r.document.name),i=gt(r.document.updateTime),o=r.document.createTime?gt(r.document.createTime):re.min(),a=new bt({mapValue:{fields:r.document.fields}}),l=Fe.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new bd(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Er(t,r.document),i=r.readTime?gt(r.readTime):re.min(),o=Fe.newNoDocument(s,i),a=r.removedTargetIds||[];n=new bd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Er(t,r.document),i=r.removedTargetIds||[];n=new bd([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new RM(s,i),a=r.targetId;n=new D2(a,o)}}return n}function _c(t,e){let n;if(e instanceof Na)n={update:r_(t,e.key,e.value)};else if(e instanceof ka)n={delete:wc(t,e.key)};else if(e instanceof Mr)n={update:r_(t,e.key,e.data),updateMask:QM(e.fieldMask)};else{if(!(e instanceof b0))return Z();n={verify:wc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ha)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:UM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function Eg(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Ue.updateTime(gt(i.updateTime)):i.exists!==void 0?Ue.exists(i.exists):Ue.none()}(e.currentDocument):Ue.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)te(a.setToServerValue==="REQUEST_TIME"),l=new ha;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new Mi(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new Fi(h)}else"increment"in a?l=new fa(o,a.increment):Z();const u=qe.fromServerFormat(a.fieldPath);return new Kc(u,l)}(t,s)):[];if(e.update){e.update.name;const s=Er(t,e.update.name),i=new bt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new tn(u.map(h=>qe.fromServerFormat(h)))}(e.updateMask);return new Mr(s,i,o,n,r)}return new Na(s,i,n,r)}if(e.delete){const s=Er(t,e.delete);return new ka(s,n)}if(e.verify){const s=Er(t,e.verify);return new b0(s,n)}return Z()}function HM(t,e){return t&&t.length>0?(te(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?gt(s.updateTime):gt(i);return o.isEqual(re.min())&&(o=gt(i)),new CM(o,s.transformResults||[])}(n,e))):[]}function B2(t,e){return{documents:[M2(t,e.path)]}}function $2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=M2(t,s);const i=function(u){if(u.length!==0)return q2(Ne.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:bo(p.field),direction:KM(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function z2(t){let e=F2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){te(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=H2(f);return p instanceof Ne&&w0(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(_){return new xc(Eo(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,$c(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,g=f.values||[];return new ua(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,g=f.values||[];return new ua(g,p)}(n.endAt)),yM(e,s,o,i,a,"F",l,u)}function qM(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function H2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Eo(n.unaryFilter.field);return ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Eo(n.unaryFilter.field);return ve.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Eo(n.unaryFilter.field);return ve.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Eo(n.unaryFilter.field);return ve.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return ve.create(Eo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ne.create(n.compositeFilter.filters.map(r=>H2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function KM(t){return LM[t]}function WM(t){return OM[t]}function GM(t){return MM[t]}function bo(t){return{fieldPath:t.canonicalString()}}function Eo(t){return qe.fromServerFormat(t.fieldPath)}function q2(t){return t instanceof ve?function(n){if(n.op==="=="){if(U1(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NAN"}};if(F1(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(U1(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NAN"}};if(F1(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(n.field),op:WM(n.op),value:n.value}}}(t):t instanceof Ne?function(n){const r=n.getFilters().map(s=>q2(s));return r.length===1?r[0]:{compositeFilter:{op:GM(n.op),filters:r}}}(t):Z()}function QM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function K2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r,s,i=re.min(),o=re.min(),a=ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.ct=e}}function YM(t,e){let n;if(e.document)n=BM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Q.fromSegments(e.noDocument.path),s=Bi(e.noDocument.readTime);n=Fe.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z();{const r=Q.fromSegments(e.unknownDocument.path),s=Bi(e.unknownDocument.version);n=Fe.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new Be(s[0],s[1]);return re.fromTimestamp(i)}(e.readTime)),n}function s_(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:dh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:wc(i,o.key),fields:o.data.value.mapValue.fields,updateTime:pa(i,o.version.toTimestamp()),createTime:pa(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ui(e.version)};else{if(!e.isUnknownDocument())return Z();r.unknownDocument={path:n.path.toArray(),version:Ui(e.version)}}return r}function dh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ui(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bi(t){const e=new Be(t.seconds,t.nanoseconds);return re.fromTimestamp(e)}function di(t,e){const n=(e.baseMutations||[]).map(i=>Eg(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Eg(t.ct,i)),s=Be.fromMillis(e.localWriteTimeMs);return new E0(e.batchId,s,n,r)}function bl(t){const e=Bi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Bi(t.lastLimboFreeSnapshotVersion):re.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return te(i.documents.length===1),Nn(Hc(F2(i.documents[0])))}(t.query):function(i){return Nn(z2(i))}(t.query),new xr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ot.fromBase64String(t.resumeToken))}function G2(t,e){const n=Ui(e.snapshotVersion),r=Ui(e.lastLimboFreeSnapshotVersion);let s;s=lh(e.target)?B2(t.ct,e.target):$2(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oi(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Q2(t){const e=z2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uh(e,e.limit,"L"):e}function Lp(t,e){return new I0(e.largestBatchId,Eg(t.ct,e.overlayMutation))}function i_(t,e){const n=e.path.lastSegment();return[t,Kt(e.path.popLast()),n]}function o_(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ui(r.readTime),documentKey:Kt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{getBundleMetadata(e,n){return a_(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Bi(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return a_(e).put(function(s){return{bundleId:s.id,createTime:Ui(gt(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return l_(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Q2(i.bundledQuery),readTime:Bi(i.readTime)}}(r)})}saveNamedQuery(e,n){return l_(e).put(function(s){return{name:s.name,readTime:Ui(gt(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function a_(t){return dt(t,"bundles")}function l_(t){return dt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new mf(e,r)}getOverlay(e,n){return tl(e).get(i_(this.userId,n)).next(r=>r?Lp(this.serializer,r):null)}getOverlays(e,n){const r=Qn();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new I0(n,o);s.push(this.ht(e,a))}),O.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Kt(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(tl(e).j("collectionPathOverlayIndex",a))}),O.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Qn(),i=Kt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return tl(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Lp(this.serializer,l);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Qn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return tl(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,h)=>{const f=Lp(this.serializer,u);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>i)}ht(e,n){return tl(e).put(function(s,i,o){const[a,l,u]=i_(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:_c(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function tl(t){return dt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{Pt(e){return dt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?ot.fromUint8Array(r):ot.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Oe(e.integerValue));else if("doubleValue"in e){const r=Oe(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),pc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Dr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(As(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?l2(e)?this.dt(n,Number.MAX_SAFE_INTEGER):uf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Z()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(Oe(a)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),Q.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}hi.vt=new hi;function ZM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function c_(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=ZM(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class e5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=c_(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=c_(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class t5{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class n5{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class nl{constructor(){this.jt=new e5,this.Ht=new t5(this.jt),this.Jt=new n5(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fi(this.indexId,this.documentKey,this.arrayValue,r)}}function Gr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=u_(t.arrayValue,e.arrayValue),n!==0?n:(n=u_(t.directionalValue,e.directionalValue),n!==0?n:Q.comparator(t.documentKey,e.documentKey)))}function u_(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this.Xt=new Pe((n,r)=>qe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(te(e.collectionGroup===this.collectionId),this.nn)return!1;const n=hg(e);if(n!==void 0&&!this.sn(n))return!1;const r=oi(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Pe(qe.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new yd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new yd(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new yd(r.field,r.dir==="asc"?0:1)));return new ah(ah.UNKNOWN_ID,this.collectionId,n,fc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t){var e,n;if(te(t instanceof ve||t instanceof Ne),t instanceof ve){if(t instanceof y2){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>ve.create(t.field,"==",i)))||[];return Ne.create(s,"or")}return t}const r=t.filters.map(s=>Y2(s));return Ne.create(r,t.op)}function r5(t){if(t.getFilters().length===0)return[];const e=Sg(Y2(t));return te(J2(e)),Tg(e)||Ig(e)?[e]:e.getFilters()}function Tg(t){return t instanceof ve}function Ig(t){return t instanceof Ne&&w0(t)}function J2(t){return Tg(t)||Ig(t)||function(n){if(n instanceof Ne&&gg(n)){for(const r of n.getFilters())if(!Tg(r)&&!Ig(r))return!1;return!0}return!1}(t)}function Sg(t){if(te(t instanceof ve||t instanceof Ne),t instanceof ve)return t;if(t.filters.length===1)return Sg(t.filters[0]);const e=t.filters.map(r=>Sg(r));let n=Ne.create(e,t.op);return n=hh(n),J2(n)?n:(te(n instanceof Ne),te(da(n)),te(n.filters.length>1),n.filters.reduce((r,s)=>k0(r,s)))}function k0(t,e){let n;return te(t instanceof ve||t instanceof Ne),te(e instanceof ve||e instanceof Ne),n=t instanceof ve?e instanceof ve?function(s,i){return Ne.create([s,i],"and")}(t,e):h_(t,e):e instanceof ve?h_(e,t):function(s,i){if(te(s.filters.length>0&&i.filters.length>0),da(s)&&da(i))return p2(s,i.getFilters());const o=gg(s)?s:i,a=gg(s)?i:s,l=o.filters.map(u=>k0(u,a));return Ne.create(l,"or")}(t,e),hh(n)}function h_(t,e){if(da(e))return p2(e,t.getFilters());{const n=e.filters.map(r=>k0(t,r));return Ne.create(n,"or")}}function hh(t){if(te(t instanceof ve||t instanceof Ne),t instanceof ve)return t;const e=t.getFilters();if(e.length===1)return hh(e[0]);if(h2(t))return t;const n=e.map(s=>hh(s)),r=[];return n.forEach(s=>{s instanceof ve?r.push(s):s instanceof Ne&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Ne.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(){this.un=new C0}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(pn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(pn.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class C0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Pe(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Pe(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new Uint8Array(0);class i5{constructor(e,n){this.databaseId=n,this.cn=new C0,this.ln=new Ws(r=>Oi(r),(r,s)=>zc(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:Kt(s)};return f_(e).put(i)}return O.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[JS(n),""],!1,!0);return f_(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Gn(o.parent))}return r})}addFieldIndex(e,n){const r=rl(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=go(e);return i.next(a=>{o.put(o_(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=rl(e),s=go(e),i=mo(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=rl(e),r=mo(e),s=go(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return O.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new d_(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=mo(e);let s=!0;const i=new Map;return O.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=pe();const a=[];return O.forEach(i,(l,u)=>{H("IndexedDbIndexManager",`Using index ${function(x){return`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(I=>`${I.fieldPath}:${I.kind}`).join(",")}`}(l)} to execute ${Oi(n)}`);const h=function(x,I){const j=hg(I);if(j===void 0)return null;for(const D of ch(x,j.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null}(u,l),f=function(x,I){const j=new Map;for(const D of oi(I))for(const N of ch(x,D.fieldPath))switch(N.op){case"==":case"in":j.set(D.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return j.set(D.fieldPath.canonicalString(),N.value),Array.from(j.values())}return null}(u,l),p=function(x,I){const j=[];let D=!0;for(const N of oi(I)){const b=N.kind===0?q1(x,N.fieldPath,x.startAt):K1(x,N.fieldPath,x.startAt);j.push(b.value),D&&(D=b.inclusive)}return new ua(j,D)}(u,l),g=function(x,I){const j=[];let D=!0;for(const N of oi(I)){const b=N.kind===0?K1(x,N.fieldPath,x.endAt):q1(x,N.fieldPath,x.endAt);j.push(b.value),D&&(D=b.inclusive)}return new ua(j,D)}(u,l),_=this.In(l,u,p),w=this.In(l,u,g),T=this.Tn(l,u,f),E=this.En(l.indexId,h,_,p.inclusive,w,g.inclusive,T);return O.forEach(E,v=>r.G(v,n.limit).next(x=>{x.forEach(I=>{const j=Q.fromSegments(I.documentKey);o.has(j)||(o=o.add(j),a.push(j))})}))}).next(()=>a)}return O.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=r5(Ne.create(e.filters,"and")).map(r=>vg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),u=l/(n!=null?n.length:1),h=[];for(let f=0;f<l;++f){const p=n?this.dn(n[f/u]):Bu,g=this.An(e,p,r[f%u],s),_=this.Rn(e,p,i[f%u],o),w=a.map(T=>this.An(e,p,T,!0));h.push(...this.createRange(g,_,w))}return h}An(e,n,r,s){const i=new fi(e,Q.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new fi(e,Q.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new d_(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return O.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Pe(qe.comparator),h=!1;for(const f of l.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:u=u.add(p.field));for(const f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new nl;for(const s of oi(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);hi.vt.It(i,o)}return r.zt()}dn(e){const n=new nl;return hi.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new nl;return hi.vt.It(yc(this.databaseId,n),r.Yt(function(i){const o=oi(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new nl);let i=0;for(const o of oi(e)){const a=r[i++];for(const l of s)if(this.fn(n,o.fieldPath)&&vc(a))s=this.gn(s,o,a);else{const u=l.Yt(o.kind);hi.vt.It(a,u)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new nl;l.seed(a.zt()),hi.vt.It(o,l.Yt(n.kind)),i.push(l)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof ve&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=rl(e),s=go(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return O.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(h,f){const p=f?new fc(f.sequenceNumber,new pn(Bi(f.readTime),new Q(Gn(f.documentKey)),f.largestBatchId)):fc.empty(),g=h.fields.map(([_,w])=>new yd(qe.fromServerFormat(_),w));return new ah(h.indexId,h.collectionGroup,g,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:de(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=rl(e),i=go(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,l=>i.put(o_(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),O.forEach(a,l=>this.wn(e,s,l).next(u=>{const h=this.Sn(i,l);return u.isEqual(h)?O.resolve():this.bn(e,i,l,u,h)}))))})}Dn(e,n,r,s){return mo(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return mo(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=mo(e);let i=new Pe(Gr);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{i=i.add(new fi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}Sn(e,n){let r=new Pe(Gr);const s=this.Vn(n,e);if(s==null)return r;const i=hg(n);if(i!=null){const o=e.data.field(i.fieldPath);if(vc(o))for(const a of o.arrayValue.values||[])r=r.add(new fi(n.indexId,e.key,this.dn(a),s))}else r=r.add(new fi(n.indexId,e.key,Bu,s));return r}bn(e,n,r,s,i){H("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,h,f,p){const g=l.getIterator(),_=u.getIterator();let w=po(g),T=po(_);for(;w||T;){let E=!1,v=!1;if(w&&T){const x=h(w,T);x<0?v=!0:x>0&&(E=!0)}else w!=null?v=!0:E=!0;E?(f(T),T=po(_)):v?(p(w),w=po(g)):(w=po(g),T=po(_))}}(s,i,Gr,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),O.waitFor(o)}yn(e){let n=1;return go(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Gr(o,a)).filter((o,a,l)=>!a||Gr(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Gr(o,e),l=Gr(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&l<0)s.push(o),s.push(o.Zt());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,Bu,[]],l=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,Bu,[]];i.push(IDBKeyRange.bound(a,l))}return i}Cn(e,n){return Gr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(p_)}getMinOffset(e,n){return O.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||Z())).next(p_)}}function f_(t){return dt(t,"collectionParents")}function mo(t){return dt(t,"indexEntries")}function rl(t){return dt(t,"indexConfiguration")}function go(t){return dt(t,"indexState")}function p_(t){te(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;m0(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new pn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(h,f,p)=>(a++,p.delete()));i.push(l.next(()=>{te(a===1)}));const u=[];for(const h of n.mutations){const f=n2(e,h.key.path,n.batchId);i.push(s.delete(f)),u.push(h.key)}return O.waitFor(i).next(()=>u)}function fh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Z();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(41943040,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);class gf{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){te(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new gf(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qr(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=To(e),o=Qr(e);return o.add({}).next(a=>{te(typeof a=="number");const l=new E0(a,n,r,s),u=function(g,_,w){const T=w.baseMutations.map(v=>_c(g.ct,v)),E=w.mutations.map(v=>_c(g.ct,v));return{userId:_,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:T,mutations:E}}(this.serializer,this.userId,l),h=[];let f=new Pe((p,g)=>de(p.canonicalString(),g.canonicalString()));for(const p of s){const g=n2(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(u)),h.push(i.put(g,BO))}return f.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),O.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return Qr(e).get(n).next(r=>r?(te(r.userId===this.userId),di(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?O.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Qr(e).J({index:"userMutationsIndex",range:s},(o,a,l)=>{a.userId===this.userId&&(te(a.batchId>=r),i=di(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Qr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qr(e).U("userMutationsIndex",n).next(r=>r.map(s=>di(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=vd(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return To(e).J({range:s},(o,a,l)=>{const[u,h,f]=o,p=Gn(h);if(u===this.userId&&n.path.isEqual(p))return Qr(e).get(f).next(g=>{if(!g)throw Z();te(g.userId===this.userId),i.push(di(this.serializer,g))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pe(de);const s=[];return n.forEach(i=>{const o=vd(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=To(e).J({range:a},(u,h,f)=>{const[p,g,_]=u,w=Gn(g);p===this.userId&&i.path.isEqual(w)?r=r.add(_):f.done()});s.push(l)}),O.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=vd(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Pe(de);return To(e).J({range:o},(l,u,h)=>{const[f,p,g]=l,_=Gn(p);f===this.userId&&r.isPrefixOf(_)?_.length===s&&(a=a.add(g)):h.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Qr(e).get(i).next(o=>{if(o===null)throw Z();te(o.userId===this.userId),r.push(di(this.serializer,o))}))}),O.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return X2(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),O.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return To(e).J({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Gn(i[1]);s.push(l)}else a.done()}).next(()=>{te(s.length===0)})})}containsKey(e,n){return Z2(e,this.userId,n)}Nn(e){return eN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Z2(t,e,n){const r=vd(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return To(t).J({range:i,H:!0},(a,l,u)=>{const[h,f,p]=a;h===e&&f===s&&(o=!0),u.done()}).next(()=>o)}function Qr(t){return dt(t,"mutations")}function To(t){return dt(t,"documentMutations")}function eN(t){return dt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $i(0)}static kn(){return new $i(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new $i(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>re.fromTimestamp(new Be(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>yo(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(te(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return yo(e).J((o,a)=>{const l=bl(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>O.waitFor(i)).next(()=>s)}forEachTarget(e,n){return yo(e).J((r,s)=>{const i=bl(s);n(i)})}qn(e){return g_(e).get("targetGlobalKey").next(n=>(te(n!==null),n))}Qn(e,n){return g_(e).put("targetGlobalKey",n)}Kn(e,n){return yo(e).put(G2(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Oi(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return yo(e).J({range:s,index:"queryTargetsIndex"},(o,a,l)=>{const u=bl(a);zc(n,u.target)&&(i=u,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=os(e);return n.forEach(o=>{const a=Kt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(s)}removeMatchingKeys(e,n,r){const s=os(e);return O.forEach(n,i=>{const o=Kt(i.path);return O.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=os(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=os(e);let i=pe();return s.J({range:r,H:!0},(o,a,l)=>{const u=Gn(o[1]),h=new Q(u);i=i.add(h)}).next(()=>i)}containsKey(e,n){const r=Kt(n.path),s=IDBKeyRange.bound([r],[JS(r)],!1,!0);let i=0;return os(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,a],l,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}ot(e,n){return yo(e).get(n).next(r=>r?bl(r):null)}}function yo(t){return dt(t,"targets")}function g_(t){return dt(t,"targetGlobal")}function os(t){return dt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_([t,e],[n,r]){const s=de(t,n);return s===0?de(e,r):s}class a5{constructor(e){this.Un=e,this.buffer=new Pe(y_),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();y_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class l5{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){H("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ks(n)?H("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Zi(n)}await this.Hn(3e5)})}}class c5{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(In.oe);const r=new a5(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(m_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m_):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),wo()<=ye.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function u5(t,e){return new c5(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n){this.db=e,this.garbageCollector=u5(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return $u(e,r)}removeReference(e,n,r){return $u(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return $u(e,n)}nr(e,n){return function(s,i){let o=!1;return eN(s).Y(a=>Z2(s,a,i).next(l=>(l&&(o=!0),O.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,re.min()),os(e).delete(function(f){return[0,Kt(f.path)]}(o))))});s.push(l)}}).next(()=>O.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return $u(e,n)}tr(e,n){const r=os(e);let s,i=In.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(i!==In.oe&&n(new Q(Gn(s)),i),i=u,s=l):i=In.oe}).next(()=>{i!==In.oe&&n(new Q(Gn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $u(t,e){return os(t).put(function(r,s){return{targetId:0,path:Kt(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.changes=new Ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ei(e).put(r)}removeEntry(e,n,r){return ei(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],dh(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Fe.newInvalidDocument(n);return ei(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sl(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:Fe.newInvalidDocument(n)};return ei(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sl(n))},(s,i)=>{r={document:this.ir(n,i),size:fh(i)}}).next(()=>r)}getEntries(e,n){let r=dn();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=dn(),s=new ze(Q.comparator);return this._r(e,n,(i,o)=>{const a=this.ir(i,o);r=r.insert(i,a),s=s.insert(i,fh(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return O.resolve();let s=new Pe(w_);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(sl(s.first()),sl(s.last())),o=s.getIterator();let a=o.getNext();return ei(e).J({index:"documentKeyIndex",range:i},(l,u,h)=>{const f=Q.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&w_(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.$(sl(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),dh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ei(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let h=dn();for(const f of u){const p=this.ir(Q.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(qc(n,p)||s.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,n,r,s){let i=dn();const o=x_(n,r),a=x_(n,pn.max());return ei(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const f=this.ir(Q.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(f.key,f),i.size===s&&h.done()}).next(()=>i)}newChangeBuffer(e){return new f5(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return v_(e).get("remoteDocumentGlobalKey").next(n=>(te(!!n),n))}rr(e,n){return v_(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=YM(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(re.min())))return r}return Fe.newInvalidDocument(e)}}function nN(t){return new h5(t)}class f5 extends tN{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Ws(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Pe((i,o)=>de(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=s_(this.cr.serializer,o);s=s.add(i.path.popLast());const u=fh(l);r+=u-a.size,n.push(this.cr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=s_(this.cr.serializer,o.convertToNoDocument(re.min()));n.push(this.cr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function v_(t){return dt(t,"remoteDocumentGlobal")}function ei(t){return dt(t,"remoteDocumentsV14")}function sl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function x_(t,e){const n=e.documentKey.path.toArray();return[t,dh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function w_(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=de(n[i],r[i]),s)return s;return s=de(n.length,r.length),s||(s=de(n[n.length-2],r[r.length-2]),s||de(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Fl(r.mutation,s,tn.empty(),Be.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=Qn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=wl();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Qn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=dn();const o=Ml(),a=function(){return Ml()}();return n.forEach((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Mr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Fl(h.mutation,u,h.mutation.getFieldMask(),Be.now())):o.set(u.key,tn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new p5(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ml();let s=new ze((o,a)=>o-a),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||tn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(s.get(a.batchId)||pe()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=E2();h.forEach(p=>{if(!i.has(p)){const g=P2(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):v2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(Qn());let a=-1,l=i;return o.next(u=>O.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,pe())).next(h=>({batchId:a,changes:b2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=wl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=wl();return this.indexManager.getCollectionParents(e,i).next(a=>O.forEach(a,l=>{const u=function(f,p){return new Sa(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Fe.newInvalidDocument(h)))});let a=wl();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&Fl(h.mutation,u,tn.empty(),Be.now()),qc(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:gt(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Q2(s.bundledQuery),readTime:gt(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(){this.overlays=new ze(Q.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qn();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=Qn(),i=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ze((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Qn(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Qn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return O.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new I0(n,r));let i=this.Ir.get(n);i===void 0&&(i=pe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.Tr=new Pe(ft.Er),this.dr=new Pe(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new Te([])),r=new ft(n,e),s=new ft(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new Te([])),r=new ft(n,e),s=new ft(n,e+1);let i=pe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||de(e.wr,n.wr)}static Ar(e,n){return de(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Pe(ft.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new E0(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new ft(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pe(de);return n.forEach(s=>{const i=new ft(s,0),o=new ft(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new ft(new Q(i),0);let a=new Pe(de);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.wr)),!0)},o),O.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){te(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,s=>{const i=new ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ft(n,0),s=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e){this.Mr=e,this.docs=function(){return new ze(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Fe.newInvalidDocument(n))}getEntries(e,n){let r=dn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Fe.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=dn();const o=n.path,a=new Q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||m0(XS(h),r)<=0||(s.has(h.key)||qc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new w5(this)}getSize(e){return O.resolve(this.size)}}class w5 extends tN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.persistence=e,this.Nr=new Ws(n=>Oi(n),zc),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new P0,this.targetCount=0,this.kr=$i.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $i(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new In(0),this.Kr=!1,this.Kr=!0,this.$r=new y5,this.referenceDelegate=e(this),this.Ur=new _5(this),this.indexManager=new s5,this.remoteDocumentCache=function(s){return new x5(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new W2(n),this.Gr=new m5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new g5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new v5(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new b5(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class b5 extends e2{constructor(e){super(),this.currentSequenceNumber=e}}class yf{constructor(e){this.persistence=e,this.Jr=new P0,this.Yr=null}static Zr(e){return new yf(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const s=Q.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e){this.serializer=e}O(e,n,r,s){const i=new cf("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",D1,{unique:!0}),l.createObjectStore("documentMutations")}(e),__(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),__(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:re.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",D1,{unique:!0});const f=u.store("mutations"),p=h.map(g=>f.put(g));return O.waitFor(p)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:ZO});u.createIndex("collectionPathOverlayIndex",eM,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",tM,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:$O});u.createIndex("documentKeyIndex",zO),u.createIndex("collectionGroupIndex",HO)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:QO}).createIndex("sequenceNumberIndex",YO,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:JO}).createIndex("documentKeyIndex",XO,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=fh(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>O.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>O.forEach(a,l=>{te(l.userId===i.userId);const u=di(this.serializer,l);return X2(e,i.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,a)=>{const l=new Te(o),u=function(f){return[0,Kt(f)]}(l);i.push(n.get(u).next(h=>h?O.resolve():(f=>n.put({targetId:0,path:Kt(f),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>O.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:GO});const r=n.store("collectionParents"),s=new C0,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Kt(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Te(o);return i(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],u)=>{const h=Gn(a);return i(h.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=bl(s),o=G2(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const a=n.store("remoteDocumentsV14"),l=function(f){return f.document?new Q(Te.fromString(f.document.name).popFirst(5)):f.noDocument?Q.fromSegments(f.noDocument.path):f.unknownDocument?Q.fromSegments(f.unknownDocument.path):Z()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>O.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=nN(this.serializer),i=new sN(yf.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var u;let h=(u=a.get(l.userId))!==null&&u!==void 0?u:pe();di(this.serializer,l).keys().forEach(f=>h=h.add(f)),a.set(l.userId,h)}),O.forEach(a,(l,u)=>{const h=new wt(u),f=mf.lt(this.serializer,h),p=i.getIndexManager(h),g=gf.lt(h,this.serializer,p,i.referenceDelegate);return new rN(s,g,f,p).recalculateAndSaveOverlaysForDocumentKeys(new fg(n,In.oe),l).next()})})}}function __(t){t.createObjectStore("targetDocuments",{keyPath:KO}).createIndex("documentTargetsIndex",WO,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qO,{unique:!0}),t.createObjectStore("targetGlobal")}const Op="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class A0{constructor(e,n,r,s,i,o,a,l,u,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=a,this.ci=u,this.li=h,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!A0.D())throw new K(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new d5(this,s),this.Ai=n+"main",this.serializer=new W2(l),this.Ri=new Es(this.Ai,this.hi,new E5(this.serializer)),this.$r=new XM,this.Ur=new o5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nN(this.serializer),this.Gr=new JM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ht("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(B.FAILED_PRECONDITION,Op);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new In(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Ks(e))return H("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return il(e).get("owner").next(n=>O.resolve(this.vi(n)))}Ci(e){return zu(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=dt(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return O.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?O.resolve(!0):il(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new K(B.FAILED_PRECONDITION,Op);return!1}}return!(!this.networkEnabled||!this.inForeground)||zu(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&H("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new fg(e,In.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>zu(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return gf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new i5(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return mf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===17?sM:l===16?rM:l===15?y0:l===14?i2:l===13?s2:l===12?nM:l===11?r2:void Z()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,a=>(o=new fg(a,this.Qr?this.Qr.next():In.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new K(B.FAILED_PRECONDITION,ZS);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return il(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K(B.FAILED_PRECONDITION,Op)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return il(e).put("owner",n)}static D(){return Es.D()}bi(e){const n=il(e);return n.get("owner").next(r=>this.vi(r)?(H("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ht(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;rS()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return H("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ht("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ht("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function il(t){return dt(t,"owner")}function zu(t){return dt(t,"clientMetadata")}function T5(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new R0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return rS()?8:t2(ut())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new I5;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(wo()<=ye.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",_o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(wo()<=ye.DEBUG&&H("QueryEngine","Query:",_o(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(wo()<=ye.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",_o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):O.resolve())}Yi(e,n){if(W1(n))return O.resolve(null);let r=Nn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=uh(n,null,"F"),r=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,uh(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,s){return W1(n)||s.isEqual(re.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?O.resolve(null):(wo()<=ye.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_o(n)),this.rs(e,o,n,DO(s,-1)).next(a=>a))})}ts(e,n){let r=new Pe(w2(e));return n.forEach((s,i)=>{qc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return wo()<=ye.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",_o(n)),this.Ji.getDocumentsMatchingQuery(e,n,pn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ze(de),this._s=new Ws(i=>Oi(i),zc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function oN(t,e,n,r){return new S5(t,e,n,r)}async function aN(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=pe();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function N5(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,p=f.keys();let g=O.resolve();return p.forEach(_=>{g=g.next(()=>h.getEntry(l,_)).next(w=>{const T=u.docVersions.get(_);te(T!==null),w.version.compareTo(T)<0&&(f.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function lN(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function k5(t,e){const n=le(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(ot.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(w,T,E){return w.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(i,g))});let l=dn(),u=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(C5(i,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(re.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.os=s,i))}function C5(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=dn();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function P5(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function A5(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new xr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ng(t,e,n){const r=le(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ks(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function b_(t,e,n){const r=le(t);let s=re.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=le(l),p=f._s.get(h);return p!==void 0?O.resolve(f.os.get(p)):f.Ur.getTargetData(u,h)}(r,o,Nn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:pe())).next(a=>(R5(r,xM(e),a),{documents:a,Ts:i})))}function R5(t,e,n){let r=t.us.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class E_{constructor(){this.activeTargetIds=IM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cN{constructor(){this.so=new E_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new E_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu=null;function Mp(){return Hu===null?Hu=function(){return 268435456+Math.round(2147483648*Math.random())}():Hu++,"0x"+Hu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class L5 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Mp(),l=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,l,u,s).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Di("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ia}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=D5[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Mp();return new Promise((o,a)=>{const l=new HS;l.setWithCredentials(!0),l.listenOnce(qS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gd.NO_ERROR:const h=l.getResponseJson();H(jt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case gd.TIMEOUT:H(jt,`RPC '${e}' ${i} timed out`),a(new K(B.DEADLINE_EXCEEDED,"Request time out"));break;case gd.HTTP_ERROR:const f=l.getStatus();if(H(jt,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const _=function(T){const E=T.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(E)>=0?E:B.UNKNOWN}(g.status);a(new K(_,g.message))}else a(new K(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(B.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{H(jt,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);H(jt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=Mp(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GS(),a=WS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");H(jt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,g=!1;const _=new V5({Io:T=>{g?H(jt,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(p||(H(jt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),H(jt,`RPC '${e}' stream ${s} sending:`,T),f.send(T))},To:()=>f.close()}),w=(T,E,v)=>{T.listen(E,x=>{try{v(x)}catch(I){setTimeout(()=>{throw I},0)}})};return w(f,xl.EventType.OPEN,()=>{g||(H(jt,`RPC '${e}' stream ${s} transport opened.`),_.yo())}),w(f,xl.EventType.CLOSE,()=>{g||(g=!0,H(jt,`RPC '${e}' stream ${s} transport closed`),_.So())}),w(f,xl.EventType.ERROR,T=>{g||(g=!0,Di(jt,`RPC '${e}' stream ${s} transport errored:`,T),_.So(new K(B.UNAVAILABLE,"The operation could not be completed")))}),w(f,xl.EventType.MESSAGE,T=>{var E;if(!g){const v=T.data[0];te(!!v);const x=v,I=x.error||((E=x[0])===null||E===void 0?void 0:E.error);if(I){H(jt,`RPC '${e}' stream ${s} received error:`,I);const j=I.status;let D=function(S){const P=rt[S];if(P!==void 0)return j2(P)}(j),N=I.message;D===void 0&&(D=B.INTERNAL,N="Unknown error status: "+j+" with message "+I.message),g=!0,_.So(new K(D,N)),f.close()}else H(jt,`RPC '${e}' stream ${s} received:`,v),_.bo(v)}}),w(a,KS.STAT_EVENT,T=>{T.stat===dg.PROXY?H(jt,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===dg.NOPROXY&&H(jt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(){return typeof window<"u"?window:null}function Ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t){return new FM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new j0(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Ht(n.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class M5 extends uN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=zM(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?gt(o.readTime):re.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=bg(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=lh(l)?{documents:B2(i,l)}:{query:$2(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=L2(i,o.resumeToken);const u=wg(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=pa(i,o.snapshotVersion.toTimestamp());const u=wg(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=qM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=bg(this.serializer),n.removeTarget=e,this.a_(n)}}class F5 extends uN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return te(!!e.streamToken),this.lastStreamToken=e.streamToken,te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=HM(e.writeResults,e.commitTime),r=gt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=bg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_c(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,_g(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(B.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,_g(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class B5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ht(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{to(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=le(l);u.L_.add(4),await Gc(u),u.q_.set("Unknown"),u.L_.delete(4),await xf(u)}(this))})}),this.q_=new B5(r,s)}}async function xf(t){if(to(t))for(const e of t.B_)await e(!0)}async function Gc(t){for(const e of t.B_)await e(!1)}function dN(t,e){const n=le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),O0(n)?L0(n):Ca(n).r_()&&V0(n,e))}function D0(t,e){const n=le(t),r=Ca(n);n.N_.delete(e),r.r_()&&hN(n,e),n.N_.size===0&&(r.r_()?r.o_():to(n)&&n.q_.set("Unknown"))}function V0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ca(t).A_(e)}function hN(t,e){t.Q_.xe(e),Ca(t).R_(e)}function L0(t){t.Q_=new VM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ca(t).start(),t.q_.v_()}function O0(t){return to(t)&&!Ca(t).n_()&&t.N_.size>0}function to(t){return le(t).L_.size===0}function fN(t){t.Q_=void 0}async function z5(t){t.q_.set("Online")}async function H5(t){t.N_.forEach((e,n)=>{V0(t,e)})}async function q5(t,e){fN(t),O0(t)?(t.q_.M_(e),L0(t)):t.q_.set("Unknown")}async function K5(t,e,n){if(t.q_.set("Online"),e instanceof V2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ph(t,r)}else if(e instanceof bd?t.Q_.Ke(e):e instanceof D2?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{const r=await lN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(u);h&&i.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(ot.EMPTY_BYTE_STRING,h.snapshotVersion)),hN(i,l);const f=new xr(h.target,l,u,h.sequenceNumber);V0(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await ph(t,r)}}async function ph(t,e,n){if(!Ks(e))throw e;t.L_.add(1),await Gc(t),t.q_.set("Offline"),n||(n=()=>lN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await xf(t)})}function pN(t,e){return e().catch(n=>ph(t,n,e))}async function Qc(t){const e=le(t),n=js(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;W5(e);)try{const s=await P5(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,G5(e,s)}catch(s){await ph(e,s)}mN(e)&&gN(e)}function W5(t){return to(t)&&t.O_.length<10}function G5(t,e){t.O_.push(e);const n=js(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mN(t){return to(t)&&!js(t).n_()&&t.O_.length>0}function gN(t){js(t).start()}async function Q5(t){js(t).p_()}async function Y5(t){const e=js(t);for(const n of t.O_)e.m_(n.mutations)}async function J5(t,e,n){const r=t.O_.shift(),s=T0.from(r,e,n);await pN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Qc(t)}async function X5(t,e){e&&js(t).V_&&await async function(r,s){if(function(o){return R2(o)&&o!==B.ABORTED}(s.code)){const i=r.O_.shift();js(r).s_(),await pN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Qc(r)}}(t,e),mN(t)&&gN(t)}async function I_(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=to(n);n.L_.add(3),await Gc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await xf(n)}async function Z5(t,e){const n=le(t);e?(n.L_.delete(2),await xf(n)):e||(n.L_.add(2),await Gc(n),n.q_.set("Unknown"))}function Ca(t){return t.K_||(t.K_=function(n,r,s){const i=le(n);return i.w_(),new M5(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:z5.bind(null,t),Ro:H5.bind(null,t),mo:q5.bind(null,t),d_:K5.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),O0(t)?L0(t):t.q_.set("Unknown")):(await t.K_.stop(),fN(t))})),t.K_}function js(t){return t.U_||(t.U_=function(n,r,s){const i=le(n);return i.w_(),new F5(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Q5.bind(null,t),mo:X5.bind(null,t),f_:Y5.bind(null,t),g_:J5.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Qc(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new M0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function F0(t,e){if(Ht("AsyncQueue",`${e}: ${t}`),Ks(t))return new K(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=wl(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new Jo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Jo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(){this.W_=new ze(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ma{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ma(e,n,Jo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class t3{constructor(){this.queries=N_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=le(n),i=s.queries;s.queries=N_(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new K(B.ABORTED,"Firestore shutting down"))}}function N_(){return new Ws(t=>x2(t),df)}async function U0(t,e){const n=le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new e3,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=F0(o,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&$0(n)}async function B0(t,e){const n=le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function n3(t,e){const n=le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&$0(n)}function r3(t,e,n){const r=le(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function $0(t){t.Y_.forEach(e=>{e.next()})}var kg,k_;(k_=kg||(kg={})).ea="default",k_.Cache="cache";class z0{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ma(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.key=e}}class vN{constructor(e){this.key=e}}class s3{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=w2(e),this.Ra=new Jo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new S_,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=qc(this.query,f)?f:null,_=!!p&&this.mutatedKeys.has(p.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;p&&g?p.data.isEqual(g.data)?_!==w&&(r.track({type:3,doc:g}),T=!0):this.ga(p,g)||(r.track({type:2,doc:g}),T=!0,(l&&this.Aa(g,l)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),T=!0):p&&!g&&(r.track({type:1,doc:p}),T=!0,(l||u)&&(a=!0)),T&&(g?(o=o.add(g),i=w?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(g,_){const w=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return w(g)-w(_)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new ma(this.query,e.Ra,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new S_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new vN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new yN(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ma.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class i3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class o3{constructor(e){this.key=e,this.va=!1}}class a3{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ws(a=>x2(a),df),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(Q.comparator),this.Na=new Map,this.La=new P0,this.Ba={},this.ka=new Map,this.qa=$i.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function l3(t,e,n=!0){const r=TN(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await xN(r,e,n,!0),s}async function c3(t,e){const n=TN(t);await xN(n,e,!0,!1)}async function xN(t,e,n,r){const s=await A5(t.localStore,Nn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await u3(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&dN(t.remoteStore,s),a}async function u3(t,e,n,r,s){t.Ka=(f,p,g)=>async function(w,T,E,v){let x=T.view.ma(E);x.ns&&(x=await b_(w.localStore,T.query,!1).then(({documents:N})=>T.view.ma(N,x)));const I=v&&v.targetChanges.get(T.targetId),j=v&&v.targetMismatches.get(T.targetId)!=null,D=T.view.applyChanges(x,w.isPrimaryClient,I,j);return P_(w,T.targetId,D.wa),D.snapshot}(t,f,p,g);const i=await b_(t.localStore,e,!0),o=new s3(e,i.Ts),a=o.ma(i.documents),l=Wc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);P_(t,n,u.wa);const h=new i3(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function d3(t,e,n){const r=le(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!df(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ng(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&D0(r.remoteStore,s.targetId),Cg(r,s.targetId)}).catch(Zi)):(Cg(r,s.targetId),await Ng(r.localStore,s.targetId,!0))}async function h3(t,e){const n=le(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),D0(n.remoteStore,r.targetId))}async function f3(t,e,n){const r=IN(t);try{const s=await function(o,a){const l=le(o),u=Be.now(),h=a.reduce((g,_)=>g.add(_.key),pe());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=dn(),w=pe();return l.cs.getEntries(g,h).next(T=>{_=T,_.forEach((E,v)=>{v.isValidDocument()||(w=w.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,_)).next(T=>{f=T;const E=[];for(const v of a){const x=AM(v,f.get(v.key).overlayedDocument);x!=null&&E.push(new Mr(v.key,x,u2(x.value.mapValue),Ue.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,E,a)}).next(T=>{p=T;const E=T.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(g,T.batchId,E)})}).then(()=>({batchId:p.batchId,changes:b2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new ze(de)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await Yc(r,s.changes),await Qc(r.remoteStore)}catch(s){const i=F0(s,"Failed to persist write");n.reject(i)}}async function wN(t,e){const n=le(t);try{const r=await k5(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?te(o.va):s.removedDocuments.size>0&&(te(o.va),o.va=!1))}),await Yc(n,r,e)}catch(r){await Zi(r)}}function C_(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=le(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(u=!0)}),u&&$0(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function p3(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new ze(Q.comparator);o=o.insert(i,Fe.newNoDocument(i,re.min()));const a=pe().add(i),l=new pf(re.min(),new Map,new ze(de),o,a);await wN(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),H0(r)}else await Ng(r.localStore,e,!1).then(()=>Cg(r,e,n)).catch(Zi)}async function m3(t,e){const n=le(t),r=e.batch.batchId;try{const s=await N5(n.localStore,e);bN(n,r,null),_N(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yc(n,s)}catch(s){await Zi(s)}}async function g3(t,e,n){const r=le(t);try{const s=await function(o,a){const l=le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(te(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);bN(r,e,n),_N(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yc(r,s)}catch(s){await Zi(s)}}function _N(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function bN(t,e,n){const r=le(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Cg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||EN(t,r)})}function EN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(D0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),H0(t))}function P_(t,e,n){for(const r of n)r instanceof yN?(t.La.addReference(r.key,e),y3(t,r)):r instanceof vN?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||EN(t,r.key)):Z()}function y3(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),H0(t))}function H0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(Te.fromString(e)),r=t.qa.next();t.Na.set(r,new o3(n)),t.Oa=t.Oa.insert(n,r),dN(t.remoteStore,new xr(Nn(Hc(n.path)),r,"TargetPurposeLimboResolution",In.oe))}}async function Yc(t,e,n){const r=le(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=R0.Wi(l.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,u){const h=le(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(u,p=>O.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>O.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Ks(f))throw f;H("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.os.get(p),_=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(p,w)}}}(r.localStore,i))}async function v3(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await aN(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new K(B.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yc(n,r.hs)}}function x3(t,e){const n=le(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let s=pe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function TN(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p3.bind(null,e),e.Ca.d_=n3.bind(null,e.eventManager),e.Ca.$a=r3.bind(null,e.eventManager),e}function IN(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=g3.bind(null,e),e}class bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return oN(this.persistence,new iN,e.initialUser,this.serializer)}Ga(e){return new sN(yf.Zr,this.serializer)}Wa(e){return new cN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bc.provider={build:()=>new bc};class w3 extends bc{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await IN(this.Ja.syncEngine),await Qc(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return oN(this.persistence,new iN,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new l5(r,e.asyncQueue,n)}Ha(e,n){const r=new MO(n,this.persistence);return new OO(e.asyncQueue,r)}Ga(e){const n=T5(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new A0(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,O5(),Ed(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new cN}}class mh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>C_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=v3.bind(null,this.syncEngine),await Z5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new t3}()}createDatastore(e){const n=vf(e.databaseInfo.databaseId),r=function(i){return new L5(i)}(e.databaseInfo);return function(i,o,a,l){return new U5(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new $5(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>C_(this.syncEngine,n,0),function(){return T_.D()?new T_:new j5}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,h){const f=new a3(s,i,o,a,l,u);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=le(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Gc(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mh.provider={build:()=>new mh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ht("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=le(s),a={documents:i.map(f=>wc(o.serializer,f))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Te.emptyPath(),a,i.length),u=new Map;l.forEach(f=>{const p=$M(o.serializer,f);u.set(p.key.toString(),p)});const h=[];return i.forEach(f=>{const p=u.get(f.toString());te(!!p),h.push(p)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ka(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=Q.fromPath(r);this.mutations.push(new b0(s,this.precondition(s)))}),await async function(r,s){const i=le(r),o={writes:s.map(a=>_c(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,Te.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Z();n=re.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new K(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(re.min())?Ue.exists(!1):Ue.updateTime(n):Ue.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(re.min()))throw new K(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(n)}return Ue.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new j0(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new _3(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!$c(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!R2(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=wt.UNAUTHENTICATED,this.clientId=YS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=F0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Fp(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await aN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function A_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await T3(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>I_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>I_(e.remoteStore,s)),t._onlineComponents=e}async function T3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Di("Error using user provided cache. Falling back to memory cache: "+n),await Fp(t,new bc)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await Fp(t,new bc);return t._offlineComponents}async function K0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await A_(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await A_(t,new mh))),t._onlineComponents}function I3(t){return K0(t).then(e=>e.syncEngine)}function S3(t){return K0(t).then(e=>e.datastore)}async function gh(t){const e=await K0(t),n=e.eventManager;return n.onListen=l3.bind(null,e.syncEngine),n.onUnlisten=d3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=c3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=h3.bind(null,e.syncEngine),n}function N3(t,e,n={}){const r=new zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new q0({next:p=>{h.Za(),o.enqueueAndForget(()=>B0(i,f));const g=p.docs.has(a);!g&&p.fromCache?u.reject(new K(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?u.reject(new K(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new z0(Hc(a.path),h,{includeMetadataChanges:!0,_a:!0});return U0(i,f)}(await gh(t),t.asyncQueue,e,n,r)),r.promise}function k3(t,e,n={}){const r=new zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new q0({next:p=>{h.Za(),o.enqueueAndForget(()=>B0(i,f)),p.fromCache&&l.source==="server"?u.reject(new K(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new z0(a,h,{includeMetadataChanges:!0,_a:!0});return U0(i,f)}(await gh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t,e,n){if(!n)throw new K(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function C3(t,e,n,r){if(e===!0&&r===!0)throw new K(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function j_(t){if(!Q.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function D_(t){if(Q.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Tt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wf(t);throw new K(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _f{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new IO;switch(r.type){case"firstParty":return new CO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=R_.get(n);r&&(H("ComponentProvider","Removing Datastore"),R_.delete(n),r.terminate())}(this),Promise.resolve()}}function P3(t,e,n,r={}){var s;const i=(t=Tt(t,_f))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=wt.MOCK_USER;else{a=nS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new K(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new wt(u)}t._authCredentials=new SO(new QS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fr(this.firestore,e,this._query)}}class It{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}}class Ts extends Fr{constructor(e,n,r){super(e,n,Hc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new Q(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function Wt(t,e,...n){if(t=$e(t),NN("collection","path",e),t instanceof _f){const r=Te.fromString(e,...n);return D_(r),new Ts(t,null,r)}{if(!(t instanceof It||t instanceof Ts))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return D_(r),new Ts(t.firestore,null,r)}}function We(t,e,...n){if(t=$e(t),arguments.length===1&&(e=YS.newId()),NN("doc","path",e),t instanceof _f){const r=Te.fromString(e,...n);return j_(r),new It(t,null,new Q(r))}{if(!(t instanceof It||t instanceof Ts))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return j_(r),new It(t.firestore,t instanceof Ts?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new j0(this,"async_queue_retry"),this.Vu=()=>{const r=Ed();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ed();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new zn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ks(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ht("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=M0.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function O_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Rn extends _f{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new L_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new L_(e),this._firestoreClient=void 0,await e}}}function A3(t,e){const n=typeof t=="object"?t:n0(),r=typeof t=="string"?t:"(default)",s=sf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ZI("firestore");i&&P3(s,...i)}return s}function Pa(t){if(t._terminated)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kN(t),t._firestoreClient}function kN(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,h){return new oM(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,SN(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new E3(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function R3(t,e){Di("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return j3(t,mh.provider,{build:r=>new w3(r,n.cacheSizeBytes,void 0)}),Promise.resolve()}function j3(t,e,n){if((t=Tt(t,Rn))._firestoreClient||t._terminated)throw new K(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new K(B.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},kN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zi(ot.fromBase64String(e))}catch(n){throw new K(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zi(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=/^__.*__$/;class V3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Na(e,this.data,n,this.fieldTransforms)}}class CN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function PN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class bf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new bf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return yh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(PN(this.Cu)&&D3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class L3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||vf(e)}Qu(e,n,r,s=!1){return new bf({Cu:e,methodName:n,qu:r,path:qe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ra(t){const e=t._freezeSettings(),n=vf(t._databaseId);return new L3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ef(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);tv("Data must be an object, but it was:",o,r);const a=RN(r,o);let l,u;if(i.merge)l=new tn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Pg(e,f,n);if(!o.contains(p))throw new K(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);DN(h,p)||h.push(p)}l=new tn(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new V3(new bt(a),l,u)}class Tf extends no{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}function AN(t,e,n){return new bf({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Q0 extends no{_toFieldTransform(e){return new Kc(e.path,new ha)}isEqual(e){return e instanceof Q0}}class Y0 extends no{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=AN(this,e,!0),r=this.Ku.map(i=>ro(i,n)),s=new Mi(r);return new Kc(e.path,s)}isEqual(e){return e instanceof Y0&&oa(this.Ku,e.Ku)}}class J0 extends no{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=AN(this,e,!0),r=this.Ku.map(i=>ro(i,n)),s=new Fi(r);return new Kc(e.path,s)}isEqual(e){return e instanceof J0&&oa(this.Ku,e.Ku)}}class X0 extends no{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new fa(e.serializer,I2(e.serializer,this.$u));return new Kc(e.path,n)}isEqual(e){return e instanceof X0&&this.$u===e.$u}}function Z0(t,e,n,r){const s=t.Qu(1,e,n);tv("Data must be an object, but it was:",s,r);const i=[],o=bt.empty();eo(r,(l,u)=>{const h=nv(e,l,n);u=$e(u);const f=s.Nu(h);if(u instanceof Tf)i.push(h);else{const p=ro(u,f);p!=null&&(i.push(h),o.set(h,p))}});const a=new tn(i);return new CN(o,a,s.fieldTransforms)}function ev(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Pg(e,r,n)],l=[s];if(i.length%2!=0)throw new K(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Pg(e,i[p])),l.push(i[p+1]);const u=[],h=bt.empty();for(let p=a.length-1;p>=0;--p)if(!DN(u,a[p])){const g=a[p];let _=l[p];_=$e(_);const w=o.Nu(g);if(_ instanceof Tf)u.push(g);else{const T=ro(_,w);T!=null&&(u.push(g),h.set(g,T))}}const f=new tn(u);return new CN(h,f,o.fieldTransforms)}function O3(t,e,n,r=!1){return ro(n,t.Qu(r?4:3,e))}function ro(t,e){if(jN(t=$e(t)))return tv("Unsupported field value:",e,t),RN(t,e);if(t instanceof no)return function(r,s){if(!PN(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=ro(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Be.fromDate(r);return{timestampValue:pa(s.serializer,i)}}if(r instanceof Be){const i=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pa(s.serializer,i)}}if(r instanceof W0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zi)return{bytesValue:L2(s.serializer,r._byteString)};if(r instanceof It){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:N0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof G0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return _0(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${wf(r)}`)}(t,e)}function RN(t,e){const n={};return o2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(t,(r,s)=>{const i=ro(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function jN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof W0||t instanceof zi||t instanceof It||t instanceof no||t instanceof G0)}function tv(t,e,n){if(!jN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=wf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Pg(t,e,n){if((e=$e(e))instanceof Aa)return e._internalPath;if(typeof e=="string")return nv(t,e);throw yh("Field path arguments must be of type string or ",t,!1,void 0,n)}const M3=new RegExp("[~\\*/\\[\\]]");function nv(t,e,n){if(e.search(M3)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Aa(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K(B.INVALID_ARGUMENT,a+t+l)}function DN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(If("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class F3 extends vh{data(){return super.data()}}function If(t,e){return typeof e=="string"?nv(t,e):e instanceof Aa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rv{}class sv extends rv{}function Hi(t,e,...n){let r=[];e instanceof rv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof iv).length,a=i.filter(l=>l instanceof Sf).length;if(o>1||o>0&&a>0)throw new K(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Sf extends sv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sf(e,n,r)}_apply(e){const n=this._parse(e);return LN(e._query,n),new Fr(e.firestore,e.converter,xg(e._query,n))}_parse(e){const n=Ra(e.firestore);return function(i,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){U_(f,h);const g=[];for(const _ of f)g.push(F_(l,i,_));p={arrayValue:{values:g}}}else p=F_(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||U_(f,h),p=O3(a,o,f,h==="in"||h==="not-in");return ve.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ec(t,e,n){const r=e,s=If("where",t);return Sf._create(s,r,n)}class iv extends rv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new iv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ne.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)LN(o,l),o=xg(o,l)}(e._query,n),new Fr(e.firestore,e.converter,xg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ov extends sv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ov(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xc(i,o)}(e._query,this._field,this._direction);return new Fr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Sa(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Nf(t,e="asc"){const n=e,r=If("orderBy",t);return ov._create(r,n)}class av extends sv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new av(e,n,r)}_apply(e){return new Fr(e.firestore,e.converter,uh(e._query,this._limit,this._limitType))}}function M_(t){return av._create("limit",t,"F")}function F_(t,e,n){if(typeof(n=$e(n))=="string"){if(n==="")throw new K(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!v2(e)&&n.indexOf("/")!==-1)throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!Q.isDocumentKey(r))throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yc(t,new Q(r))}if(n instanceof It)return yc(t,n._key);throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wf(n)}.`)}function U_(t,e){if(!Array.isArray(t)||t.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LN(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ON{convertValue(e,n="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return eo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Oe(o.doubleValue));return new G0(i)}convertGeoPoint(e){return new W0(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=x0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);te(K2(r));const s=new Vi(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||Ht(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class U3 extends ON{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lv extends vh{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(If("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Td extends lv{data(e={}){return super.data(e)}}class MN{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Oo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Td(this._firestore,this._userDataWriter,r.key,r,new Oo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Td(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Oo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Td(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Oo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:B3(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function B3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t){t=Tt(t,It);const e=Tt(t.firestore,Rn);return N3(Pa(e),t._key).then(n=>FN(e,t,n))}class Cf extends ON{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function $3(t){t=Tt(t,Fr);const e=Tt(t.firestore,Rn),n=Pa(e),r=new Cf(e);return VN(t._query),k3(n,t._query).then(s=>new MN(e,r,t,s))}function cv(t,e,n){t=Tt(t,It);const r=Tt(t.firestore,Rn),s=kf(t.converter,e,n);return Jc(r,[Ef(Ra(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ue.none())])}function Tr(t,e,n,...r){t=Tt(t,It);const s=Tt(t.firestore,Rn),i=Ra(s);let o;return o=typeof(e=$e(e))=="string"||e instanceof Aa?ev(i,"updateDoc",t._key,e,n,r):Z0(i,"updateDoc",t._key,e),Jc(s,[o.toMutation(t._key,Ue.exists(!0))])}function z3(t){return Jc(Tt(t.firestore,Rn),[new ka(t._key,Ue.none())])}function qi(t,e){const n=Tt(t.firestore,Rn),r=We(t),s=kf(t.converter,e);return Jc(n,[Ef(Ra(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ue.exists(!1))]).then(()=>r)}function Ds(t,...e){var n,r,s;t=$e(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||O_(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(O_(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let l,u,h;if(t instanceof It)u=Tt(t.firestore,Rn),h=Hc(t._key.path),l={next:f=>{e[o]&&e[o](FN(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Tt(t,Fr);u=Tt(f.firestore,Rn),h=f._query;const p=new Cf(u);l={next:g=>{e[o]&&e[o](new MN(u,p,f,g))},error:e[o+1],complete:e[o+2]},VN(t._query)}return function(p,g,_,w){const T=new q0(w),E=new z0(g,T,_);return p.asyncQueue.enqueueAndForget(async()=>U0(await gh(p),E)),()=>{T.Za(),p.asyncQueue.enqueueAndForget(async()=>B0(await gh(p),E))}}(Pa(u),h,a,l)}function Jc(t,e){return function(r,s){const i=new zn;return r.asyncQueue.enqueueAndForget(async()=>f3(await I3(r),s,i)),i.promise}(Pa(t),e)}function FN(t,e,n){const r=n.docs.get(e._key),s=new Cf(t);return new lv(t,s,e._key,r,new Oo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ra(e)}set(e,n,r){this._verifyNotCommitted();const s=as(e,this._firestore),i=kf(s.converter,n,r),o=Ef(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Ue.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=as(e,this._firestore);let o;return o=typeof(n=$e(n))=="string"||n instanceof Aa?ev(this._dataReader,"WriteBatch.update",i._key,n,r,s):Z0(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Ue.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=as(e,this._firestore);return this._mutations=this._mutations.concat(new ka(n._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function as(t,e){if((t=$e(t)).firestore!==e)throw new K(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3 extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ra(n)}get(n){const r=as(n,this._firestore),s=new U3(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return Z();const o=i[0];if(o.isFoundDocument())return new vh(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new vh(this._firestore,s,r._key,null,r.converter);throw Z()})}set(n,r,s){const i=as(n,this._firestore),o=kf(i.converter,r,s),a=Ef(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=as(n,this._firestore);let a;return a=typeof(r=$e(r))=="string"||r instanceof Aa?ev(this._dataReader,"Transaction.update",o._key,r,s,i):Z0(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=as(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=as(e,this._firestore),r=new Cf(this._firestore);return super.get(e).then(s=>new lv(this._firestore,r,n._key,s._document,new Oo(!1,!1),n.converter))}}function uv(t,e,n){t=Tt(t,Rn);const r=Object.assign(Object.assign({},H3),n);return function(i){if(i.maxAttempts<1)throw new K(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new zn;return i.asyncQueue.enqueueAndForget(async()=>{const u=await S3(i);new b3(i.asyncQueue,u,a,o,l).au()}),l.promise}(Pa(t),s=>e(new K3(t,s)),r)}function Lt(){return new Q0("serverTimestamp")}function Ag(...t){return new Y0("arrayUnion",t)}function B_(...t){return new J0("arrayRemove",t)}function Rg(t){return new X0("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(t){return Pa(t=Tt(t,Rn)),new q3(t,e=>Jc(t,e))}(function(e,n=!0){(function(s){Ia=s})(Xi),Pi(new Ps("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Rn(new NO(r.getProvider("auth-internal")),new AO(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vi(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Zn(A1,"4.7.3",e),Zn(A1,"4.7.3","esm2017")})();var G3="firebase",Q3="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(G3,Q3,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="firebasestorage.googleapis.com",Y3="storageBucket",J3=2*60*1e3,X3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends sr{constructor(e,n,r=0){super(Up(e),`Firebase Storage: ${n} (${Up(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ir.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Up(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var rr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(rr||(rr={}));function Up(t){return"storage/"+t}function Z3(){const t="An unknown error occurred, please check the error payload for server response.";return new ir(rr.UNKNOWN,t)}function eF(){return new ir(rr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tF(){return new ir(rr.CANCELED,"User canceled the upload/download.")}function nF(t){return new ir(rr.INVALID_URL,"Invalid URL '"+t+"'.")}function rF(t){return new ir(rr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $_(t){return new ir(rr.INVALID_ARGUMENT,t)}function BN(){return new ir(rr.APP_DELETED,"The Firebase app was deleted.")}function sF(t){return new ir(rr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Fn.makeFromUrl(e,n)}catch{return new Fn(e,"")}if(r.path==="")return r;throw rF(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${s}/o${p}`,"i"),_={bucket:1,path:3},w=n===UN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",E=new RegExp(`^https?://${w}/${s}/${T}`,"i"),x=[{regex:a,indices:l,postModify:i},{regex:g,indices:_,postModify:u},{regex:E,indices:{bucket:1,path:2},postModify:u}];for(let I=0;I<x.length;I++){const j=x[I],D=j.regex.exec(e);if(D){const N=D[j.indices.bucket];let b=D[j.indices.path];b||(b=""),r=new Fn(N,b),j.postModify(r);break}}if(r==null)throw nF(e);return r}}class iF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...T){u||(u=!0,e.apply(null,T))}function f(T){s=setTimeout(()=>{s=null,t(g,l())},T)}function p(){i&&clearTimeout(i)}function g(T,...E){if(u){p();return}if(T){p(),h.call(null,T,...E);return}if(l()||o){p(),h.call(null,T,...E);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let _=!1;function w(T){_||(_=!0,p(),!u&&(s!==null?(T||(a=2),clearTimeout(s),f(0)):T||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,w(!0)},n),w}function aF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(t){return t!==void 0}function z_(t,e,n,r){if(r<e)throw $_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw $_(`Invalid value for '${t}'. Expected ${n} or less.`)}function cF(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var wh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(wh||(wh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e,n,r,s,i,o,a,l,u,h,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,_)=>{this.resolve_=g,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new qu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===wh.NO_ERROR,l=i.getStatus();if(!a||uF(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===wh.ABORT;r(!1,new qu(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new qu(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());lF(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Z3();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?BN():tF();o(l)}else{const l=eF();o(l)}};this.canceled_?n(!1,new qu(!1,null,!0)):this.backoffId_=oF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function hF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function fF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function mF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function gF(t,e,n,r,s,i,o=!0){const a=cF(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return pF(u,e),hF(u,n),fF(u,i),mF(u,r),new dF(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function vF(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this._service=e,n instanceof Fn?this._location=n:this._location=Fn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new _h(e,n)}get root(){const e=new Fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vF(this._location.path)}get storage(){return this._service}get parent(){const e=yF(this._location.path);if(e===null)return null;const n=new Fn(this._location.bucket,e);return new _h(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw sF(e)}}function H_(t,e){const n=e==null?void 0:e[Y3];return n==null?null:Fn.makeFromBucketSpec(n,t)}function xF(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:nS(s,t.app.options.projectId))}class wF{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=UN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=J3,this._maxUploadRetryTime=X3,this._requests=new Set,s!=null?this._bucket=Fn.makeFromBucketSpec(s,this._host):this._bucket=H_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fn.makeFromBucketSpec(this._url,e):this._bucket=H_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){z_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){z_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _h(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new iF(BN());{const o=gF(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const q_="@firebase/storage",K_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="storage";function _F(t=n0(),e){t=$e(t);const r=sf(t,$N).getImmediate({identifier:e}),s=ZI("storage");return s&&bF(r,...s),r}function bF(t,e,n,r={}){xF(t,e,n,r)}function EF(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new wF(n,r,s,e,Xi)}function TF(){Pi(new Ps($N,EF,"PUBLIC").setMultipleInstances(!0)),Zn(q_,K_,""),Zn(q_,K_,"esm2017")}TF();const IF={apiKey:"AIzaSyBH2cfQxaQLvKhYrQ6dYm4vcuiw0Xbv17Q",authDomain:"new-sankalpa-app.firebaseapp.com",projectId:"new-sankalpa-app",storageBucket:"new-sankalpa-app.firebasestorage.app",messagingSenderId:"484434742594",appId:"1:484434742594:web:220653dc47b96e9e254cdb",measurementId:"G-WWB92V7ZP4"},dv=aS(IF),ol=EO(dv),he=A3(dv);_F(dv);R3(he).catch(t=>{t.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):t.code==="unimplemented"?console.warn("The current browser does not support all of the features required to enable persistence"):console.warn("Failed to enable persistence:",t)});const zN=C.createContext(void 0),Yt=()=>{const t=C.useContext(zN);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Ku=t=>{switch(t){case"auth/invalid-credential":return"ভুল ইমেইল বা পাসওয়ার্ড। দয়া করে আবার চেষ্টা করুন।";case"auth/user-not-found":return"এই ইমেইল ঠিকানায় কোনো অ্যাকাউন্ট পাওয়া যায়নি।";case"auth/wrong-password":return"ভুল পাসওয়ার্ড। দয়া করে আবার চেষ্টা করুন।";case"auth/invalid-email":return"দয়া করে একটি বৈধ ইমেইল ঠিকানা লিখুন।";case"auth/user-disabled":return"এই অ্যাকাউন্টটি নিষ্ক্রিয় করা হয়েছে। সাহায্যের জন্য যোগাযোগ করুন।";case"auth/too-many-requests":return"অনেকবার ভুল চেষ্টা। কিছুক্ষণ পর আবার চেষ্টা করুন।";case"auth/email-already-in-use":return"এই ইমেইল দিয়ে ইতিমধ্যে একটি অ্যাকাউন্ট আছে। লগইন করার চেষ্টা করুন।";case"auth/weak-password":return"পাসওয়ার্ড কমপক্ষে ৬ অক্ষরের হতে হবে।";case"auth/operation-not-allowed":return"এই সাইন-ইন পদ্ধতি সক্রিয় নয়। সাহায্যের জন্য যোগাযোগ করুন।";case"auth/popup-closed-by-user":return"সাইন-ইন বাতিল করা হয়েছে। দয়া করে আবার চেষ্টা করুন।";case"auth/popup-blocked":return"পপ-আপ ব্লক করা হয়েছে। দয়া করে পপ-আপ অনুমতি দিন।";case"auth/network-request-failed":return"নেটওয়ার্ক সমস্যা। ইন্টারনেট সংযোগ চেক করুন।";case"auth/requires-recent-login":return"নিরাপত্তার জন্য আবার লগইন করুন।";case"auth/account-exists-with-different-credential":return"এই ইমেইল দিয়ে অন্য পদ্ধতিতে অ্যাকাউন্ট আছে।";default:return"একটি অপ্রত্যাশিত সমস্যা হয়েছে। দয়া করে আবার চেষ্টা করুন।"}},SF=({children:t})=>{const[e,n]=C.useState(null),[r,s]=C.useState(null),[i,o]=C.useState(!0),a=async w=>{try{const T=await xh(We(he,"users",w.uid));if(T.exists()){const E=T.data();s(E)}else await l(w,w.displayName||"User")}catch(T){console.error("Error fetching user data:",T),Y.error("ব্যবহারকারীর তথ্য লোড করতে সমস্যা হয়েছে")}},l=async(w,T,E="bn")=>{try{const v={uid:w.uid,email:w.email||"",displayName:T||w.displayName||"User",level:1,xp:0,coins:50,streak:0,lastCheckIn:"",createdAt:new Date().toISOString(),language:E,following:[],followers:[],inventory:[],unlocked_items:{themes:[],badges:[],music:[],features:[]},active_theme:"default",last_daily_popup:"",streakStartDate:Lt(),currentBadge:"clown"};await cv(We(he,"users",w.uid),{...v,createdAt:Lt(),lastCheckIn:Lt(),streakStartDate:Lt()}),s(v),Y.success("স্বাগতম! আপনার অ্যাকাউন্ট তৈরি হয়েছে! 🎉")}catch(v){throw console.error("Error creating user data:",v),Y.error("ব্যবহারকারীর তথ্য সংরক্ষণে সমস্যা হয়েছে"),v}},u=async(w,T)=>{try{const E=await oL(ol,w,T);return Y.success("স্বাগতম! সফলভাবে লগইন হয়েছে! 🎉"),E}catch(E){const v=Ku(E.code);throw Y.error(v),E}},h=async(w,T,E)=>{try{const v=await iL(ol,w,T);return await lL(v.user,{displayName:E}),await l(v.user,E),v}catch(v){const x=Ku(v.code);throw Y.error(x),v}},f=async()=>{try{const w=new fr;w.setCustomParameters({prompt:"select_account"});const T=await RL(ol,w);return(await xh(We(he,"users",T.user.uid))).exists()||await l(T.user,T.user.displayName||"User"),Y.success("Google দিয়ে সফলভাবে লগইন হয়েছে! 🎉"),T}catch(w){const T=Ku(w.code);throw Y.error(T),w}},p=async()=>{try{await hL(ol),s(null),Y.success("সফলভাবে লগআউট হয়েছে!")}catch(w){const T=Ku(w.code);throw Y.error(T),w}},g=async w=>{if(e)try{if(w.level&&r&&w.level>r.level){const v=(w.level-r.level)*50;w.coins=(w.coins||r.coins)+v,Y.success(`লেভেল আপ! +${v} বোনাস কয়েন! 🎉`,{duration:4e3})}const T={...w,updatedAt:Lt()};await Tr(We(he,"users",e.uid),T),s(E=>E?{...E,...w}:null)}catch(T){throw console.error("Error updating user data:",T),Y.error("তথ্য আপডেট করতে সমস্যা হয়েছে"),T}};C.useEffect(()=>dL(ol,async T=>{try{n(T),T?await a(T):s(null)}catch(E){console.error("Auth state change error:",E)}finally{o(!1)}}),[]);const _={currentUser:e,userData:r,login:u,signup:h,loginWithGoogle:f,logout:p,updateUserData:g,loading:i};return c.jsx(zN.Provider,{value:_,children:t})},HN=C.createContext(void 0),so=()=>{const t=C.useContext(HN);if(t===void 0)throw new Error("useUserContext must be used within a UserContextProvider");return t},NF=({children:t})=>{const{currentUser:e}=Yt(),[n,r]=C.useState({themes:[],badges:[],music:[],features:[]}),[s,i]=C.useState("default"),[o,a]=C.useState(""),[l,u]=C.useState(!0);C.useEffect(()=>{if(!e){u(!1);return}return Ds(We(he,"users",e.uid),_=>{if(_.exists()){const w=_.data();r(w.unlocked_items||{themes:[],badges:[],music:[],features:[]}),i(w.active_theme||"default"),a(w.last_daily_popup||"")}u(!1)},_=>{console.error("Error listening to user document:",_),_.code!=="permission-denied"&&console.warn("User context listener error:",_.message),u(!1)})},[e]);const p={unlockedItems:n,activeTheme:s,lastDailyPopup:o,updateUserContext:g=>{g.unlockedItems&&r(g.unlockedItems),g.activeTheme&&i(g.activeTheme),g.lastDailyPopup&&a(g.lastDailyPopup)},hasUnlockedItem:(g,_)=>{var w;return((w=n[g])==null?void 0:w.includes(_))||!1},loading:l};return c.jsx(HN.Provider,{value:p,children:t})},qN=C.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Pf=C.createContext({}),Af=C.createContext(null),Rf=typeof document<"u",hv=Rf?C.useLayoutEffect:C.useEffect,KN=C.createContext({strict:!1}),fv=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),kF="framerAppearId",WN="data-"+fv(kF);function CF(t,e,n,r){const{visualElement:s}=C.useContext(Pf),i=C.useContext(KN),o=C.useContext(Af),a=C.useContext(qN).reducedMotion,l=C.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;C.useInsertionEffect(()=>{u&&u.update(n,o)});const h=C.useRef(!!(n[WN]&&!window.HandoffComplete));return hv(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),C.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function Mo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function PF(t,e,n){return C.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Mo(n)&&(n.current=r))},[e])}function Tc(t){return typeof t=="string"||Array.isArray(t)}function jf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const pv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mv=["initial",...pv];function Df(t){return jf(t.animate)||mv.some(e=>Tc(t[e]))}function GN(t){return!!(Df(t)||t.variants)}function AF(t,e){if(Df(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Tc(n)?n:void 0,animate:Tc(r)?r:void 0}}return t.inherit!==!1?e:{}}function RF(t){const{initial:e,animate:n}=AF(t,C.useContext(Pf));return C.useMemo(()=>({initial:e,animate:n}),[W_(e),W_(n)])}function W_(t){return Array.isArray(t)?t.join(" "):t}const G_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ic={};for(const t in G_)Ic[t]={isEnabled:e=>G_[t].some(n=>!!e[n])};function jF(t){for(const e in t)Ic[e]={...Ic[e],...t[e]}}const gv=C.createContext({}),QN=C.createContext({}),DF=Symbol.for("motionComponentSymbol");function VF({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&jF(t);function i(a,l){let u;const h={...C.useContext(qN),...a,layoutId:LF(a)},{isStatic:f}=h,p=RF(a),g=r(a,f);if(!f&&Rf){p.visualElement=CF(s,g,h,e);const _=C.useContext(QN),w=C.useContext(KN).strict;p.visualElement&&(u=p.visualElement.loadFeatures(h,w,t,_))}return C.createElement(Pf.Provider,{value:p},u&&p.visualElement?C.createElement(u,{visualElement:p.visualElement,...h}):null,n(s,a,PF(g,p.visualElement,l),g,f,p.visualElement))}const o=C.forwardRef(i);return o[DF]=s,o}function LF({layoutId:t}){const e=C.useContext(gv).id;return e&&t!==void 0?e+"-"+t:t}function OF(t){function e(r,s={}){return VF(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const MF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yv(t){return typeof t!="string"||t.includes("-")?!1:!!(MF.indexOf(t)>-1||/[A-Z]/.test(t))}const bh={};function FF(t){Object.assign(bh,t)}const Xc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],io=new Set(Xc);function YN(t,{layout:e,layoutId:n}){return io.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!bh[t]||t==="opacity")}const on=t=>!!(t&&t.getVelocity),UF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BF=Xc.length;function $F(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<BF;o++){const a=Xc[o];if(t[a]!==void 0){const l=UF[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const JN=t=>e=>typeof e=="string"&&e.startsWith(t),XN=JN("--"),jg=JN("var(--"),zF=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,HF=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Vs=(t,e,n)=>Math.min(Math.max(n,t),e),oo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ul={...oo,transform:t=>Vs(0,1,t)},Wu={...oo,default:1},Bl=t=>Math.round(t*1e5)/1e5,Vf=/(-)?([\d]*\.?[\d])+/g,ZN=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,qF=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Zc(t){return typeof t=="string"}const eu=t=>({test:e=>Zc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Yr=eu("deg"),tr=eu("%"),oe=eu("px"),KF=eu("vh"),WF=eu("vw"),Q_={...tr,parse:t=>tr.parse(t)/100,transform:t=>tr.transform(t*100)},Y_={...oo,transform:Math.round},ek={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,size:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,rotate:Yr,rotateX:Yr,rotateY:Yr,rotateZ:Yr,scale:Wu,scaleX:Wu,scaleY:Wu,scaleZ:Wu,skew:Yr,skewX:Yr,skewY:Yr,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:Ul,originX:Q_,originY:Q_,originZ:oe,zIndex:Y_,fillOpacity:Ul,strokeOpacity:Ul,numOctaves:Y_};function vv(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,u=!1,h=!0;for(const f in e){const p=e[f];if(XN(f)){i[f]=p;continue}const g=ek[f],_=HF(p,g);if(io.has(f)){if(l=!0,o[f]=_,!h)continue;p!==(g.default||0)&&(h=!1)}else f.startsWith("origin")?(u=!0,a[f]=_):s[f]=_}if(e.transform||(l||r?s.transform=$F(t.transform,n,h,r):s.transform&&(s.transform="none")),u){const{originX:f="50%",originY:p="50%",originZ:g=0}=a;s.transformOrigin=`${f} ${p} ${g}`}}const xv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tk(t,e,n){for(const r in e)!on(e[r])&&!YN(r,n)&&(t[r]=e[r])}function GF({transformTemplate:t},e,n){return C.useMemo(()=>{const r=xv();return vv(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function QF(t,e,n){const r=t.style||{},s={};return tk(s,r,t),Object.assign(s,GF(t,e,n)),t.transformValues?t.transformValues(s):s}function YF(t,e,n){const r={},s=QF(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const JF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Eh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||JF.has(t)}let nk=t=>!Eh(t);function XF(t){t&&(nk=e=>e.startsWith("on")?!Eh(e):t(e))}try{XF(require("@emotion/is-prop-valid").default)}catch{}function ZF(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(nk(s)||n===!0&&Eh(s)||!e&&!Eh(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function J_(t,e,n){return typeof t=="string"?t:oe.transform(e+n*t)}function e6(t,e,n){const r=J_(e,t.x,t.width),s=J_(n,t.y,t.height);return`${r} ${s}`}const t6={offset:"stroke-dashoffset",array:"stroke-dasharray"},n6={offset:"strokeDashoffset",array:"strokeDasharray"};function r6(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?t6:n6;t[i.offset]=oe.transform(-r);const o=oe.transform(e),a=oe.transform(n);t[i.array]=`${o} ${a}`}function wv(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},h,f,p){if(vv(t,u,h,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:_,dimensions:w}=t;g.transform&&(w&&(_.transform=g.transform),delete g.transform),w&&(s!==void 0||i!==void 0||_.transform)&&(_.transformOrigin=e6(w,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&r6(g,o,a,l,!1)}const rk=()=>({...xv(),attrs:{}}),_v=t=>typeof t=="string"&&t.toLowerCase()==="svg";function s6(t,e,n,r){const s=C.useMemo(()=>{const i=rk();return wv(i,e,{enableHardwareAcceleration:!1},_v(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};tk(i,t.style,t),s.style={...i,...s.style}}return s}function i6(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(yv(n)?s6:YF)(r,i,o,n),h={...ZF(r,typeof n=="string",t),...l,ref:s},{children:f}=r,p=C.useMemo(()=>on(f)?f.get():f,[f]);return C.createElement(n,{...h,children:p})}}function sk(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const ik=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ok(t,e,n,r){sk(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(ik.has(s)?s:fv(s),e.attrs[s])}function bv(t,e){const{style:n}=t,r={};for(const s in n)(on(n[s])||e.style&&on(e.style[s])||YN(s,t))&&(r[s]=n[s]);return r}function ak(t,e){const n=bv(t,e);for(const r in t)if(on(t[r])||on(e[r])){const s=Xc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function Ev(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function lk(t){const e=C.useRef(null);return e.current===null&&(e.current=t()),e.current}const Th=t=>Array.isArray(t),o6=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),a6=t=>Th(t)?t[t.length-1]||0:t;function Id(t){const e=on(t)?t.get():t;return o6(e)?e.toValue():e}function l6({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:c6(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const ck=t=>(e,n)=>{const r=C.useContext(Pf),s=C.useContext(Af),i=()=>l6(t,e,r,s);return n?i():lk(i)};function c6(t,e,n,r){const s={},i=r(t,{});for(const p in i)s[p]=Id(i[p]);let{initial:o,animate:a}=t;const l=Df(t),u=GN(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;return f&&typeof f!="boolean"&&!jf(f)&&(Array.isArray(f)?f:[f]).forEach(g=>{const _=Ev(t,g);if(!_)return;const{transitionEnd:w,transition:T,...E}=_;for(const v in E){let x=E[v];if(Array.isArray(x)){const I=h?x.length-1:0;x=x[I]}x!==null&&(s[v]=x)}for(const v in w)s[v]=w[v]}),s}const tt=t=>t;class X_{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function u6(t){let e=new X_,n=new X_,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,u=!1,h=!1)=>{const f=h&&s,p=f?e:n;return u&&o.add(l),p.add(l)&&f&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const h=e.order[u];h(l),o.has(h)&&(a.schedule(h),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const Gu=["prepare","read","update","preRender","render","postRender"],d6=40;function h6(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Gu.reduce((f,p)=>(f[p]=u6(()=>n=!0),f),{}),o=f=>i[f].process(s),a=()=>{const f=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(f-s.timestamp,d6),1),s.timestamp=f,s.isProcessing=!0,Gu.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:Gu.reduce((f,p)=>{const g=i[p];return f[p]=(_,w=!1,T=!1)=>(n||l(),g.schedule(_,w,T)),f},{}),cancel:f=>Gu.forEach(p=>i[p].cancel(f)),state:s,steps:i}}const{schedule:je,cancel:Vr,state:Dt,steps:Bp}=h6(typeof requestAnimationFrame<"u"?requestAnimationFrame:tt,!0),f6={useVisualState:ck({scrapeMotionValuesFromProps:ak,createRenderState:rk,onMount:(t,e,{renderState:n,latestValues:r})=>{je.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),je.render(()=>{wv(n,r,{enableHardwareAcceleration:!1},_v(e.tagName),t.transformTemplate),ok(e,n)})}})},p6={useVisualState:ck({scrapeMotionValuesFromProps:bv,createRenderState:xv})};function m6(t,{forwardMotionProps:e=!1},n,r){return{...yv(t)?f6:p6,preloadedFeatures:n,useRender:i6(e),createVisualElement:r,Component:t}}function wr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const uk=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Lf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const g6=t=>e=>uk(e)&&t(e,Lf(e));function Ir(t,e,n,r){return wr(t,e,g6(n),r)}const y6=(t,e)=>n=>e(t(n)),Is=(...t)=>t.reduce(y6);function dk(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Z_=dk("dragHorizontal"),eb=dk("dragVertical");function hk(t){let e=!1;if(t==="y")e=eb();else if(t==="x")e=Z_();else{const n=Z_(),r=eb();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function fk(){const t=hk(!0);return t?(t(),!1):!0}class Gs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function tb(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||fk())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&je.update(()=>a[r](i,o))};return Ir(t.current,n,s,{passive:!t.getProps()[r]})}class v6 extends Gs{mount(){this.unmount=Is(tb(this.node,!0),tb(this.node,!1))}unmount(){}}class x6 extends Gs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Is(wr(this.node.current,"focus",()=>this.onFocus()),wr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const pk=(t,e)=>e?t===e?!0:pk(t,e.parentElement):!1;function $p(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Lf(n))}class w6 extends Gs{constructor(){super(...arguments),this.removeStartListeners=tt,this.removeEndListeners=tt,this.removeAccessibleListeners=tt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Ir(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:f}=this.node.getProps();je.update(()=>{!f&&!pk(this.node.current,a.target)?h&&h(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Ir(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Is(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||$p("up",(l,u)=>{const{onTap:h}=this.node.getProps();h&&je.update(()=>h(l,u))})};this.removeEndListeners(),this.removeEndListeners=wr(this.node.current,"keyup",o),$p("down",(a,l)=>{this.startPress(a,l)})},n=wr(this.node.current,"keydown",e),r=()=>{this.isPressing&&$p("cancel",(i,o)=>this.cancelPress(i,o))},s=wr(this.node.current,"blur",r);this.removeAccessibleListeners=Is(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&je.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!fk()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&je.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Ir(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=wr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Is(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Dg=new WeakMap,zp=new WeakMap,_6=t=>{const e=Dg.get(t.target);e&&e(t)},b6=t=>{t.forEach(_6)};function E6({root:t,...e}){const n=t||document;zp.has(n)||zp.set(n,{});const r=zp.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(b6,{root:t,...e})),r[s]}function T6(t,e,n){const r=E6(e);return Dg.set(t,n),r.observe(t),()=>{Dg.delete(t),r.unobserve(t)}}const I6={some:0,all:1};class S6 extends Gs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:I6[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=u?h:f;p&&p(l)};return T6(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(N6(e,n))&&this.startObserver()}unmount(){}}function N6({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const k6={inView:{Feature:S6},tap:{Feature:w6},focus:{Feature:x6},hover:{Feature:v6}};function mk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function C6(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function P6(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Of(t,e,n){const r=t.getProps();return Ev(r,e,n!==void 0?n:r.custom,C6(t),P6(t))}let Ih=tt;const Ei=t=>t*1e3,Sr=t=>t/1e3,A6={current:!1},gk=t=>Array.isArray(t)&&typeof t[0]=="number";function yk(t){return!!(!t||typeof t=="string"&&vk[t]||gk(t)||Array.isArray(t)&&t.every(yk))}const El=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,vk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:El([0,.65,.55,1]),circOut:El([.55,0,1,.45]),backIn:El([.31,.01,.66,-.59]),backOut:El([.33,1.53,.69,.99])};function xk(t){if(t)return gk(t)?El(t):Array.isArray(t)?t.map(xk):vk[t]}function R6(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const h=xk(a);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function j6(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const wk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,D6=1e-7,V6=12;function L6(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=wk(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>D6&&++a<V6);return o}function tu(t,e,n,r){if(t===e&&n===r)return tt;const s=i=>L6(i,0,1,t,n);return i=>i===0||i===1?i:wk(s(i),e,r)}const O6=tu(.42,0,1,1),M6=tu(0,0,.58,1),_k=tu(.42,0,.58,1),F6=t=>Array.isArray(t)&&typeof t[0]!="number",bk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Ek=t=>e=>1-t(1-e),Tv=t=>1-Math.sin(Math.acos(t)),Tk=Ek(Tv),U6=bk(Tv),Ik=tu(.33,1.53,.69,.99),Iv=Ek(Ik),B6=bk(Iv),$6=t=>(t*=2)<1?.5*Iv(t):.5*(2-Math.pow(2,-10*(t-1))),nb={linear:tt,easeIn:O6,easeInOut:_k,easeOut:M6,circIn:Tv,circInOut:U6,circOut:Tk,backIn:Iv,backInOut:B6,backOut:Ik,anticipate:$6},rb=t=>{if(Array.isArray(t)){Ih(t.length===4);const[e,n,r,s]=t;return tu(e,n,r,s)}else if(typeof t=="string")return Ih(nb[t]!==void 0),nb[t];return t},Sv=(t,e)=>n=>!!(Zc(n)&&qF.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Sk=(t,e,n)=>r=>{if(!Zc(r))return r;const[s,i,o,a]=r.match(Vf);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},z6=t=>Vs(0,255,t),Hp={...oo,transform:t=>Math.round(z6(t))},xi={test:Sv("rgb","red"),parse:Sk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Hp.transform(t)+", "+Hp.transform(e)+", "+Hp.transform(n)+", "+Bl(Ul.transform(r))+")"};function H6(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Vg={test:Sv("#"),parse:H6,transform:xi.transform},Fo={test:Sv("hsl","hue"),parse:Sk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+tr.transform(Bl(e))+", "+tr.transform(Bl(n))+", "+Bl(Ul.transform(r))+")"},Bt={test:t=>xi.test(t)||Vg.test(t)||Fo.test(t),parse:t=>xi.test(t)?xi.parse(t):Fo.test(t)?Fo.parse(t):Vg.parse(t),transform:t=>Zc(t)?t:t.hasOwnProperty("red")?xi.transform(t):Fo.transform(t)},Ke=(t,e,n)=>-n*t+n*e+t;function qp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function q6({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=qp(l,a,t+1/3),i=qp(l,a,t),o=qp(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Kp=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},K6=[Vg,xi,Fo],W6=t=>K6.find(e=>e.test(t));function sb(t){const e=W6(t);let n=e.parse(t);return e===Fo&&(n=q6(n)),n}const Nk=(t,e)=>{const n=sb(t),r=sb(e),s={...n};return i=>(s.red=Kp(n.red,r.red,i),s.green=Kp(n.green,r.green,i),s.blue=Kp(n.blue,r.blue,i),s.alpha=Ke(n.alpha,r.alpha,i),xi.transform(s))};function G6(t){var e,n;return isNaN(t)&&Zc(t)&&(((e=t.match(Vf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(ZN))===null||n===void 0?void 0:n.length)||0)>0}const kk={regex:zF,countKey:"Vars",token:"${v}",parse:tt},Ck={regex:ZN,countKey:"Colors",token:"${c}",parse:Bt.parse},Pk={regex:Vf,countKey:"Numbers",token:"${n}",parse:oo.parse};function Wp(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function Sh(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Wp(n,kk),Wp(n,Ck),Wp(n,Pk),n}function Ak(t){return Sh(t).values}function Rk(t){const{values:e,numColors:n,numVars:r,tokenised:s}=Sh(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(kk.token,o[l]):l<r+n?a=a.replace(Ck.token,Bt.transform(o[l])):a=a.replace(Pk.token,Bl(o[l]));return a}}const Q6=t=>typeof t=="number"?0:t;function Y6(t){const e=Ak(t);return Rk(t)(e.map(Q6))}const Ls={test:G6,parse:Ak,createTransformer:Rk,getAnimatableNone:Y6},jk=(t,e)=>n=>`${n>0?e:t}`;function Dk(t,e){return typeof t=="number"?n=>Ke(t,e,n):Bt.test(t)?Nk(t,e):t.startsWith("var(")?jk(t,e):Lk(t,e)}const Vk=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>Dk(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},J6=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Dk(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},Lk=(t,e)=>{const n=Ls.createTransformer(e),r=Sh(t),s=Sh(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Is(Vk(r.values,s.values),n):jk(t,e)},Sc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},ib=(t,e)=>n=>Ke(t,e,n);function X6(t){return typeof t=="number"?ib:typeof t=="string"?Bt.test(t)?Nk:Lk:Array.isArray(t)?Vk:typeof t=="object"?J6:ib}function Z6(t,e,n){const r=[],s=n||X6(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||tt:e;a=Is(l,a)}r.push(a)}return r}function Ok(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Ih(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Z6(e,r,s),a=o.length,l=u=>{let h=0;if(a>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=Sc(t[h],t[h+1],u);return o[h](f)};return n?u=>l(Vs(t[0],t[i-1],u)):l}function eU(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Sc(0,e,r);t.push(Ke(n,1,s))}}function tU(t){const e=[0];return eU(e,t.length-1),e}function nU(t,e){return t.map(n=>n*e)}function rU(t,e){return t.map(()=>e||_k).splice(0,t.length-1)}function Nh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=F6(r)?r.map(rb):rb(r),i={done:!1,value:e[0]},o=nU(n&&n.length===e.length?n:tU(e),t),a=Ok(o,e,{ease:Array.isArray(s)?s:rU(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function Mk(t,e){return e?t*(1e3/e):0}const sU=5;function Fk(t,e,n){const r=Math.max(e-sU,0);return Mk(n-t(r),e-r)}const Gp=.001,iU=.01,oU=10,aU=.05,lU=1;function cU({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=Vs(aU,lU,o),t=Vs(iU,oU,Sr(t)),o<1?(s=u=>{const h=u*o,f=h*t,p=h-n,g=Lg(u,o),_=Math.exp(-f);return Gp-p/g*_},i=u=>{const f=u*o*t,p=f*n+n,g=Math.pow(o,2)*Math.pow(u,2)*t,_=Math.exp(-f),w=Lg(Math.pow(u,2),o);return(-s(u)+Gp>0?-1:1)*((p-g)*_)/w}):(s=u=>{const h=Math.exp(-u*t),f=(u-n)*t+1;return-Gp+h*f},i=u=>{const h=Math.exp(-u*t),f=(n-u)*(t*t);return h*f});const a=5/t,l=dU(s,i,a);if(t=Ei(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const uU=12;function dU(t,e,n){let r=n;for(let s=1;s<uU;s++)r=r-t(r)/e(r);return r}function Lg(t,e){return t*Math.sqrt(1-e*e)}const hU=["duration","bounce"],fU=["stiffness","damping","mass"];function ob(t,e){return e.some(n=>t[n]!==void 0)}function pU(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!ob(t,fU)&&ob(t,hU)){const n=cU(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function Uk({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:u,duration:h,velocity:f,isResolvedFromDuration:p}=pU({...r,velocity:-Sr(r.velocity||0)}),g=f||0,_=l/(2*Math.sqrt(a*u)),w=i-s,T=Sr(Math.sqrt(a/u)),E=Math.abs(w)<5;n||(n=E?.01:2),e||(e=E?.005:.5);let v;if(_<1){const x=Lg(T,_);v=I=>{const j=Math.exp(-_*T*I);return i-j*((g+_*T*w)/x*Math.sin(x*I)+w*Math.cos(x*I))}}else if(_===1)v=x=>i-Math.exp(-T*x)*(w+(g+T*w)*x);else{const x=T*Math.sqrt(_*_-1);v=I=>{const j=Math.exp(-_*T*I),D=Math.min(x*I,300);return i-j*((g+_*T*w)*Math.sinh(D)+x*w*Math.cosh(D))/x}}return{calculatedDuration:p&&h||null,next:x=>{const I=v(x);if(p)o.done=x>=h;else{let j=g;x!==0&&(_<1?j=Fk(v,x,I):j=0);const D=Math.abs(j)<=n,N=Math.abs(i-I)<=e;o.done=D&&N}return o.value=o.done?i:I,o}}}function ab({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},g=b=>a!==void 0&&b<a||l!==void 0&&b>l,_=b=>a===void 0?l:l===void 0||Math.abs(a-b)<Math.abs(l-b)?a:l;let w=n*e;const T=f+w,E=o===void 0?T:o(T);E!==T&&(w=E-f);const v=b=>-w*Math.exp(-b/r),x=b=>E+v(b),I=b=>{const S=v(b),P=x(b);p.done=Math.abs(S)<=u,p.value=p.done?E:P};let j,D;const N=b=>{g(p.value)&&(j=b,D=Uk({keyframes:[p.value,_(p.value)],velocity:Fk(x,b,p.value),damping:s,stiffness:i,restDelta:u,restSpeed:h}))};return N(0),{calculatedDuration:null,next:b=>{let S=!1;return!D&&j===void 0&&(S=!0,I(b),N(b)),j!==void 0&&b>j?D.next(b-j):(!S&&I(b),p)}}}const mU=t=>{const e=({timestamp:n})=>t(n);return{start:()=>je.update(e,!0),stop:()=>Vr(e),now:()=>Dt.isProcessing?Dt.timestamp:performance.now()}},lb=2e4;function cb(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<lb;)e+=n,r=t.next(e);return e>=lb?1/0:e}const gU={decay:ab,inertia:ab,tween:Nh,keyframes:Nh,spring:Uk};function kh({autoplay:t=!0,delay:e=0,driver:n=mU,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:h,onUpdate:f,...p}){let g=1,_=!1,w,T;const E=()=>{T=new Promise(ee=>{w=ee})};E();let v;const x=gU[s]||Nh;let I;x!==Nh&&typeof r[0]!="number"&&(I=Ok([0,100],r,{clamp:!1}),r=[0,100]);const j=x({...p,keyframes:r});let D;a==="mirror"&&(D=x({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let N="idle",b=null,S=null,P=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=cb(j));const{calculatedDuration:R}=j;let V=1/0,A=1/0;R!==null&&(V=R+o,A=V*(i+1)-o);let ne=0;const me=ee=>{if(S===null)return;g>0&&(S=Math.min(S,ee)),g<0&&(S=Math.min(ee-A/g,S)),b!==null?ne=b:ne=Math.round(ee-S)*g;const ue=ne-e*(g>=0?1:-1),xe=g>=0?ue<0:ue>A;ne=Math.max(ue,0),N==="finished"&&b===null&&(ne=A);let yt=ne,ht=j;if(i){const Ur=Math.min(ne,A)/V;let vn=Math.floor(Ur),F=Ur%1;!F&&Ur>=1&&(F=1),F===1&&vn--,vn=Math.min(vn,i+1),!!(vn%2)&&(a==="reverse"?(F=1-F,o&&(F-=o/V)):a==="mirror"&&(ht=D)),yt=Vs(0,1,F)*V}const at=xe?{done:!1,value:r[0]}:ht.next(yt);I&&(at.value=I(at.value));let{done:Jt}=at;!xe&&R!==null&&(Jt=g>=0?ne>=A:ne<=0);const ja=b===null&&(N==="finished"||N==="running"&&Jt);return f&&f(at.value),ja&&z(),at},fe=()=>{v&&v.stop(),v=void 0},se=()=>{N="idle",fe(),w(),E(),S=P=null},z=()=>{N="finished",h&&h(),fe(),w()},$=()=>{if(_)return;v||(v=n(me));const ee=v.now();l&&l(),b!==null?S=ee-b:(!S||N==="finished")&&(S=ee),N==="finished"&&E(),P=S,b=null,N="running",v.start()};t&&$();const G={then(ee,ue){return T.then(ee,ue)},get time(){return Sr(ne)},set time(ee){ee=Ei(ee),ne=ee,b!==null||!v||g===0?b=ee:S=v.now()-ee/g},get duration(){const ee=j.calculatedDuration===null?cb(j):j.calculatedDuration;return Sr(ee)},get speed(){return g},set speed(ee){ee===g||!v||(g=ee,G.time=Sr(ne))},get state(){return N},play:$,pause:()=>{N="paused",b=ne},stop:()=>{_=!0,N!=="idle"&&(N="idle",u&&u(),se())},cancel:()=>{P!==null&&me(P),se()},complete:()=>{N="finished"},sample:ee=>(S=0,me(ee))};return G}function yU(t){let e;return()=>(e===void 0&&(e=t()),e)}const vU=yU(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xU=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Qu=10,wU=2e4,_U=(t,e)=>e.type==="spring"||t==="backgroundColor"||!yk(e.ease);function bU(t,e,{onUpdate:n,onComplete:r,...s}){if(!(vU()&&xU.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const h=()=>{l=new Promise(x=>{a=x})};h();let{keyframes:f,duration:p=300,ease:g,times:_}=s;if(_U(e,s)){const x=kh({...s,repeat:0,delay:0});let I={done:!1,value:f[0]};const j=[];let D=0;for(;!I.done&&D<wU;)I=x.sample(D),j.push(I.value),D+=Qu;_=void 0,f=j,p=D-Qu,g="linear"}const w=R6(t.owner.current,e,f,{...s,duration:p,ease:g,times:_}),T=()=>{u=!1,w.cancel()},E=()=>{u=!0,je.update(T),a(),h()};return w.onfinish=()=>{u||(t.set(j6(f,s)),r&&r(),E())},{then(x,I){return l.then(x,I)},attachTimeline(x){return w.timeline=x,w.onfinish=null,tt},get time(){return Sr(w.currentTime||0)},set time(x){w.currentTime=Ei(x)},get speed(){return w.playbackRate},set speed(x){w.playbackRate=x},get duration(){return Sr(p)},play:()=>{o||(w.play(),Vr(T))},pause:()=>w.pause(),stop:()=>{if(o=!0,w.playState==="idle")return;const{currentTime:x}=w;if(x){const I=kh({...s,autoplay:!1});t.setWithVelocity(I.sample(x-Qu).value,I.sample(x).value,Qu)}E()},complete:()=>{u||w.finish()},cancel:E}}function EU({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:tt,pause:tt,stop:tt,then:i=>(i(),Promise.resolve()),cancel:tt,complete:tt});return e?kh({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const TU={type:"spring",stiffness:500,damping:25,restSpeed:10},IU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),SU={type:"keyframes",duration:.8},NU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kU=(t,{keyframes:e})=>e.length>2?SU:io.has(t)?t.startsWith("scale")?IU(e[1]):TU:NU,Og=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ls.test(e)||e==="0")&&!e.startsWith("url(")),CU=new Set(["brightness","contrast","saturate","opacity"]);function PU(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Vf)||[];if(!r)return t;const s=n.replace(r,"");let i=CU.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const AU=/([a-z-]*)\(.*?\)/g,Mg={...Ls,getAnimatableNone:t=>{const e=t.match(AU);return e?e.map(PU).join(" "):t}},RU={...ek,color:Bt,backgroundColor:Bt,outlineColor:Bt,fill:Bt,stroke:Bt,borderColor:Bt,borderTopColor:Bt,borderRightColor:Bt,borderBottomColor:Bt,borderLeftColor:Bt,filter:Mg,WebkitFilter:Mg},Nv=t=>RU[t];function Bk(t,e){let n=Nv(t);return n!==Mg&&(n=Ls),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const $k=t=>/^0[^.\s]+$/.test(t);function jU(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||$k(t)}function DU(t,e,n,r){const s=Og(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),jU(i[u])&&l.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&l.length&&a)for(let u=0;u<l.length;u++){const h=l[u];i[h]=Bk(e,a)}return i}function VU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}function kv(t,e){return t[e]||t.default||t}const LU={skipAnimations:!1},Cv=(t,e,n,r={})=>s=>{const i=kv(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Ei(o);const l=DU(e,t,n,i),u=l[0],h=l[l.length-1],f=Og(t,u),p=Og(t,h);let g={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:_=>{e.set(_),i.onUpdate&&i.onUpdate(_)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(VU(i)||(g={...g,...kU(t,g)}),g.duration&&(g.duration=Ei(g.duration)),g.repeatDelay&&(g.repeatDelay=Ei(g.repeatDelay)),!f||!p||A6.current||i.type===!1||LU.skipAnimations)return EU(g);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const _=bU(e,t,g);if(_)return _}return kh(g)};function Ch(t){return!!(on(t)&&t.add)}const zk=t=>/^\-?\d*\.?\d+$/.test(t);function Pv(t,e){t.indexOf(e)===-1&&t.push(e)}function Av(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Rv{constructor(){this.subscriptions=[]}add(e){return Pv(this.subscriptions,e),()=>Av(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const OU=t=>!isNaN(parseFloat(t));class MU{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Dt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,je.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>je.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=OU(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Rv);const r=this.events[e].add(n);return e==="change"?()=>{r(),je.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Mk(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ga(t,e){return new MU(t,e)}const Hk=t=>e=>e.test(t),FU={test:t=>t==="auto",parse:t=>t},qk=[oo,oe,tr,Yr,WF,KF,FU],al=t=>qk.find(Hk(t)),UU=[...qk,Bt,Ls],BU=t=>UU.find(Hk(t));function $U(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ga(n))}function zU(t,e){const n=Of(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=a6(i[o]);$U(t,o,a)}}function HU(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],u=e[l];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),h!=null&&(typeof h=="string"&&(zk(h)||$k(h))?h=parseFloat(h):!BU(h)&&Ls.test(u)&&(h=Bk(l,u)),t.addValue(l,ga(h,{owner:t})),n[l]===void 0&&(n[l]=h),h!==null&&t.setBaseTarget(l,h))}}function qU(t,e){return e?(e[t]||e.default||e).from:void 0}function KU(t,e,n){const r={};for(const s in t){const i=qU(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function WU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function GU(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function Kk(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const u=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const f in a){const p=t.getValue(f),g=a[f];if(!p||g===void 0||h&&WU(h,f))continue;const _={delay:n,elapsed:0,...kv(i||{},f)};if(window.HandoffAppearAnimations){const E=t.getProps()[WN];if(E){const v=window.HandoffAppearAnimations(E,f,p,je);v!==null&&(_.elapsed=v,_.isHandoff=!0)}}let w=!_.isHandoff&&!GU(p,g);if(_.type==="spring"&&(p.getVelocity()||_.velocity)&&(w=!1),p.animation&&(w=!1),w)continue;p.start(Cv(f,p,g,t.shouldReduceMotion&&io.has(f)?{type:!1}:_));const T=p.animation;Ch(l)&&(l.add(f),T.then(()=>l.remove(f))),u.push(T)}return o&&Promise.all(u).then(()=>{o&&zU(t,o)}),u}function Fg(t,e,n={}){const r=Of(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Kk(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return QU(t,e,u+l,h,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,u]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function QU(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(YU).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(Fg(u,e,{...i,delay:n+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function YU(t,e){return t.sortNodePosition(e)}function JU(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Fg(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Fg(t,e,n);else{const s=typeof e=="function"?Of(t,e,n.custom):e;r=Promise.all(Kk(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const XU=[...pv].reverse(),ZU=pv.length;function e9(t){return e=>Promise.all(e.map(({animation:n,options:r})=>JU(t,n,r)))}function t9(t){let e=e9(t);const n=r9();let r=!0;const s=(l,u)=>{const h=Of(t,u);if(h){const{transition:f,transitionEnd:p,...g}=h;l={...l,...g,...p}}return l};function i(l){e=l(t)}function o(l,u){const h=t.getProps(),f=t.getVariantContext(!0)||{},p=[],g=new Set;let _={},w=1/0;for(let E=0;E<ZU;E++){const v=XU[E],x=n[v],I=h[v]!==void 0?h[v]:f[v],j=Tc(I),D=v===u?x.isActive:null;D===!1&&(w=E);let N=I===f[v]&&I!==h[v]&&j;if(N&&r&&t.manuallyAnimateOnMount&&(N=!1),x.protectedKeys={..._},!x.isActive&&D===null||!I&&!x.prevProp||jf(I)||typeof I=="boolean")continue;let S=n9(x.prevProp,I)||v===u&&x.isActive&&!N&&j||E>w&&j,P=!1;const R=Array.isArray(I)?I:[I];let V=R.reduce(s,{});D===!1&&(V={});const{prevResolvedValues:A={}}=x,ne={...A,...V},me=fe=>{S=!0,g.has(fe)&&(P=!0,g.delete(fe)),x.needsAnimating[fe]=!0};for(const fe in ne){const se=V[fe],z=A[fe];if(_.hasOwnProperty(fe))continue;let $=!1;Th(se)&&Th(z)?$=!mk(se,z):$=se!==z,$?se!==void 0?me(fe):g.add(fe):se!==void 0&&g.has(fe)?me(fe):x.protectedKeys[fe]=!0}x.prevProp=I,x.prevResolvedValues=V,x.isActive&&(_={..._,...V}),r&&t.blockInitialAnimation&&(S=!1),S&&(!N||P)&&p.push(...R.map(fe=>({animation:fe,options:{type:v,...l}})))}if(g.size){const E={};g.forEach(v=>{const x=t.getBaseTarget(v);x!==void 0&&(E[v]=x)}),p.push({animation:E})}let T=!!p.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(T=!1),r=!1,T?e(p):Promise.resolve()}function a(l,u,h){var f;if(n[l].isActive===u)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(g=>{var _;return(_=g.animationState)===null||_===void 0?void 0:_.setActive(l,u)}),n[l].isActive=u;const p=o(h,l);for(const g in n)n[g].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function n9(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!mk(e,t):!1}function ti(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function r9(){return{animate:ti(!0),whileInView:ti(),whileHover:ti(),whileTap:ti(),whileDrag:ti(),whileFocus:ti(),exit:ti()}}class s9 extends Gs{constructor(e){super(e),e.animationState||(e.animationState=t9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),jf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let i9=0;class o9 extends Gs{constructor(){super(...arguments),this.id=i9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const a9={animation:{Feature:s9},exit:{Feature:o9}},ub=(t,e)=>Math.abs(t-e);function l9(t,e){const n=ub(t.x,e.x),r=ub(t.y,e.y);return Math.sqrt(n**2+r**2)}class Wk{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Yp(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=l9(f.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:_}=f,{timestamp:w}=Dt;this.history.push({..._,timestamp:w});const{onStart:T,onMove:E}=this.handlers;p||(T&&T(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Qp(p,this.transformPagePoint),je.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:_,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Yp(f.type==="pointercancel"?this.lastMoveEventInfo:Qp(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,T),_&&_(f,T)},!uk(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Lf(e),a=Qp(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=Dt;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,Yp(a,this.history)),this.removeListeners=Is(Ir(this.contextWindow,"pointermove",this.handlePointerMove),Ir(this.contextWindow,"pointerup",this.handlePointerUp),Ir(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Vr(this.updatePoint)}}function Qp(t,e){return e?{point:e(t.point)}:t}function db(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Yp({point:t},e){return{point:t,delta:db(t,Gk(e)),offset:db(t,c9(e)),velocity:u9(e,.1)}}function c9(t){return t[0]}function Gk(t){return t[t.length-1]}function u9(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Gk(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Ei(e)));)n--;if(!r)return{x:0,y:0};const i=Sr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function mn(t){return t.max-t.min}function Ug(t,e=0,n=.01){return Math.abs(t-e)<=n}function hb(t,e,n,r=.5){t.origin=r,t.originPoint=Ke(e.min,e.max,t.origin),t.scale=mn(n)/mn(e),(Ug(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ke(n.min,n.max,t.origin)-t.originPoint,(Ug(t.translate)||isNaN(t.translate))&&(t.translate=0)}function $l(t,e,n,r){hb(t.x,e.x,n.x,r?r.originX:void 0),hb(t.y,e.y,n.y,r?r.originY:void 0)}function fb(t,e,n){t.min=n.min+e.min,t.max=t.min+mn(e)}function d9(t,e,n){fb(t.x,e.x,n.x),fb(t.y,e.y,n.y)}function pb(t,e,n){t.min=e.min-n.min,t.max=t.min+mn(e)}function zl(t,e,n){pb(t.x,e.x,n.x),pb(t.y,e.y,n.y)}function h9(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ke(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ke(n,t,r.max):Math.min(t,n)),t}function mb(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function f9(t,{top:e,left:n,bottom:r,right:s}){return{x:mb(t.x,n,s),y:mb(t.y,e,r)}}function gb(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function p9(t,e){return{x:gb(t.x,e.x),y:gb(t.y,e.y)}}function m9(t,e){let n=.5;const r=mn(t),s=mn(e);return s>r?n=Sc(e.min,e.max-r,t.min):r>s&&(n=Sc(t.min,t.max-s,e.min)),Vs(0,1,n)}function g9(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Bg=.35;function y9(t=Bg){return t===!1?t=0:t===!0&&(t=Bg),{x:yb(t,"left","right"),y:yb(t,"top","bottom")}}function yb(t,e,n){return{min:vb(t,e),max:vb(t,n)}}function vb(t,e){return typeof t=="number"?t:t[e]||0}const xb=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uo=()=>({x:xb(),y:xb()}),wb=()=>({min:0,max:0}),st=()=>({x:wb(),y:wb()});function wn(t){return[t("x"),t("y")]}function Qk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function v9({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function x9(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Jp(t){return t===void 0||t===1}function $g({scale:t,scaleX:e,scaleY:n}){return!Jp(t)||!Jp(e)||!Jp(n)}function ai(t){return $g(t)||Yk(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Yk(t){return _b(t.x)||_b(t.y)}function _b(t){return t&&t!=="0%"}function Ph(t,e,n){const r=t-n,s=e*r;return n+s}function bb(t,e,n,r,s){return s!==void 0&&(t=Ph(t,s,r)),Ph(t,n,r)+e}function zg(t,e=0,n=1,r,s){t.min=bb(t.min,e,n,r,s),t.max=bb(t.max,e,n,r,s)}function Jk(t,{x:e,y:n}){zg(t.x,e.translate,e.scale,e.originPoint),zg(t.y,n.translate,n.scale,n.originPoint)}function w9(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Bo(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Jk(t,o)),r&&ai(i.latestValues)&&Bo(t,i.latestValues))}e.x=Eb(e.x),e.y=Eb(e.y)}function Eb(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Zr(t,e){t.min=t.min+e,t.max=t.max+e}function Tb(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=Ke(t.min,t.max,i);zg(t,e[n],e[r],o,e.scale)}const _9=["x","scaleX","originX"],b9=["y","scaleY","originY"];function Bo(t,e){Tb(t.x,e,_9),Tb(t.y,e,b9)}function Xk(t,e){return Qk(x9(t.getBoundingClientRect(),e))}function E9(t,e,n){const r=Xk(t,n),{scroll:s}=e;return s&&(Zr(r.x,s.offset.x),Zr(r.y,s.offset.y)),r}const Zk=({current:t})=>t?t.ownerDocument.defaultView:null,T9=new WeakMap;class I9{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=st(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Lf(h,"page").point)},i=(h,f)=>{const{drag:p,dragPropagation:g,onDragStart:_}=this.getProps();if(p&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=hk(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wn(T=>{let E=this.getAxisMotionValue(T).get()||0;if(tr.test(E)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[T];x&&(E=mn(x)*(parseFloat(E)/100))}}this.originPoint[T]=E}),_&&je.update(()=>_(h,f),!1,!0);const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:_,onDrag:w}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:T}=f;if(g&&this.currentDirection===null){this.currentDirection=S9(T),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",f.point,T),this.updateAxis("y",f.point,T),this.visualElement.render(),w&&w(h,f)},a=(h,f)=>this.stop(h,f),l=()=>wn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Wk(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Zk(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&je.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Yu(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=h9(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Mo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=f9(s.layoutBox,n):this.constraints=!1,this.elastic=y9(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&wn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=g9(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Mo(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=E9(r,s.root,this.visualElement.getTransformPagePoint());let o=p9(s.layout.layoutBox,i);if(n){const a=n(v9(o));this.hasMutatedConstraints=!!a,a&&(o=Qk(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=wn(h=>{if(!Yu(h,n,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=s?200:1e6,g=s?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,_)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Cv(e,r,0,n))}stopAnimation(){wn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){wn(n=>{const{drag:r}=this.getProps();if(!Yu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Ke(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Mo(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};wn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=m9({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wn(o=>{if(!Yu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Ke(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;T9.set(this.visualElement,this);const e=this.visualElement.current,n=Ir(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Mo(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=wr(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(wn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Bg,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Yu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function S9(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class N9 extends Gs{constructor(e){super(e),this.removeGroupControls=tt,this.removeListeners=tt,this.controls=new I9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ib=t=>(e,n)=>{t&&je.update(()=>t(e,n))};class k9 extends Gs{constructor(){super(...arguments),this.removePointerDownListener=tt}onPointerDown(e){this.session=new Wk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Ib(e),onStart:Ib(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&je.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Ir(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function C9(){const t=C.useContext(Af);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=C.useId();return C.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const Sd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Sb(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ll={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(oe.test(t))t=parseFloat(t);else return t;const n=Sb(t,e.target.x),r=Sb(t,e.target.y);return`${n}% ${r}%`}},P9={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ls.parse(t);if(s.length>5)return r;const i=Ls.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const u=Ke(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class A9 extends iy.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;FF(R9),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Sd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||je.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function eC(t){const[e,n]=C9(),r=C.useContext(gv);return iy.createElement(A9,{...t,layoutGroup:r,switchLayoutGroup:C.useContext(QN),isPresent:e,safeToRemove:n})}const R9={borderRadius:{...ll,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ll,borderTopRightRadius:ll,borderBottomLeftRadius:ll,borderBottomRightRadius:ll,boxShadow:P9},tC=["TopLeft","TopRight","BottomLeft","BottomRight"],j9=tC.length,Nb=t=>typeof t=="string"?parseFloat(t):t,kb=t=>typeof t=="number"||oe.test(t);function D9(t,e,n,r,s,i){s?(t.opacity=Ke(0,n.opacity!==void 0?n.opacity:1,V9(r)),t.opacityExit=Ke(e.opacity!==void 0?e.opacity:1,0,L9(r))):i&&(t.opacity=Ke(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<j9;o++){const a=`border${tC[o]}Radius`;let l=Cb(e,a),u=Cb(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||kb(l)===kb(u)?(t[a]=Math.max(Ke(Nb(l),Nb(u),r),0),(tr.test(u)||tr.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Ke(e.rotate||0,n.rotate||0,r))}function Cb(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const V9=nC(0,.5,Tk),L9=nC(.5,.95,tt);function nC(t,e,n){return r=>r<t?0:r>e?1:n(Sc(t,e,r))}function Pb(t,e){t.min=e.min,t.max=e.max}function xn(t,e){Pb(t.x,e.x),Pb(t.y,e.y)}function Ab(t,e,n,r,s){return t-=e,t=Ph(t,1/n,r),s!==void 0&&(t=Ph(t,1/s,r)),t}function O9(t,e=0,n=1,r=.5,s,i=t,o=t){if(tr.test(e)&&(e=parseFloat(e),e=Ke(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ke(i.min,i.max,r);t===i&&(a-=e),t.min=Ab(t.min,e,n,a,s),t.max=Ab(t.max,e,n,a,s)}function Rb(t,e,[n,r,s],i,o){O9(t,e[n],e[r],e[s],e.scale,i,o)}const M9=["x","scaleX","originX"],F9=["y","scaleY","originY"];function jb(t,e,n,r){Rb(t.x,e,M9,n?n.x:void 0,r?r.x:void 0),Rb(t.y,e,F9,n?n.y:void 0,r?r.y:void 0)}function Db(t){return t.translate===0&&t.scale===1}function rC(t){return Db(t.x)&&Db(t.y)}function U9(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function sC(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Vb(t){return mn(t.x)/mn(t.y)}class B9{constructor(){this.members=[]}add(e){Pv(this.members,e),e.scheduleRender()}remove(e){if(Av(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Lb(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:h}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const $9=(t,e)=>t.depth-e.depth;class z9{constructor(){this.children=[],this.isDirty=!1}add(e){Pv(this.children,e),this.isDirty=!0}remove(e){Av(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort($9),this.isDirty=!1,this.children.forEach(e)}}function H9(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Vr(r),t(i-e))};return je.read(r,!0),()=>Vr(r)}function q9(t){window.MotionDebug&&window.MotionDebug.record(t)}function K9(t){return t instanceof SVGElement&&t.tagName!=="svg"}function W9(t,e,n){const r=on(t)?t:ga(t);return r.start(Cv("",r,e,n)),r.animation}const Ob=["","X","Y","Z"],G9={visibility:"hidden"},Mb=1e3;let Q9=0;const li={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function iC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Q9++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,li.totalNodes=li.resolvedTargetDeltas=li.recalculatedProjection=0,this.nodes.forEach(X9),this.nodes.forEach(rB),this.nodes.forEach(sB),this.nodes.forEach(Z9),q9(li)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new z9)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Rv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=K9(o),this.instance=o;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=H9(p,250),Sd.hasAnimatedSinceResize&&(Sd.hasAnimatedSinceResize=!1,this.nodes.forEach(Ub))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:g,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||cB,{onLayoutAnimationStart:T,onLayoutAnimationComplete:E}=h.getProps(),v=!this.targetLayout||!sC(this.targetLayout,_)||g,x=!p&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,x);const I={...kv(w,"layout"),onPlay:T,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else p||Ub(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Vr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iB),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Fb);return}this.isUpdating||this.nodes.forEach(tB),this.isUpdating=!1,this.nodes.forEach(nB),this.nodes.forEach(Y9),this.nodes.forEach(J9),this.clearAllSnapshots();const a=performance.now();Dt.delta=Vs(0,1e3/60,a-Dt.timestamp),Dt.timestamp=a,Dt.isProcessing=!0,Bp.update.process(Dt),Bp.preRender.process(Dt),Bp.render.process(Dt),Dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(eB),this.sharedNodes.forEach(oB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,je.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){je.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=st(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!rC(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||ai(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),uB(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return st();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Zr(a.x,l.offset.x),Zr(a.y,l.offset.y)),a}removeElementScroll(o){const a=st();xn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:f}=u;if(u!==this.root&&h&&f.layoutScroll){if(h.isRoot){xn(a,o);const{scroll:p}=this.root;p&&(Zr(a.x,-p.offset.x),Zr(a.y,-p.offset.y))}Zr(a.x,h.offset.x),Zr(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=st();xn(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Bo(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ai(h.latestValues)&&Bo(l,h.latestValues)}return ai(this.latestValues)&&Bo(l,this.latestValues),l}removeTransform(o){const a=st();xn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!ai(u.latestValues))continue;$g(u.latestValues)&&u.updateSnapshot();const h=st(),f=u.measurePageBox();xn(h,f),jb(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return ai(this.latestValues)&&jb(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Dt.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=st(),this.relativeTargetOrigin=st(),zl(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=st(),this.targetWithTransforms=st()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),d9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xn(this.target,this.layout.layoutBox),Jk(this.target,this.targetDelta)):xn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=st(),this.relativeTargetOrigin=st(),zl(this.relativeTargetOrigin,this.target,g.target),xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}li.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||$g(this.parent.latestValues)||Yk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Dt.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;xn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;w9(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:_}=a;if(!_){this.projectionTransform&&(this.projectionDelta=Uo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Uo(),this.projectionDeltaWithTransform=Uo());const w=this.projectionTransform;$l(this.projectionDelta,this.layoutCorrected,_,this.latestValues),this.projectionTransform=Lb(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==p||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),li.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},f=Uo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=st(),g=l?l.source:void 0,_=this.layout?this.layout.source:void 0,w=g!==_,T=this.getStack(),E=!T||T.members.length<=1,v=!!(w&&!E&&this.options.crossfade===!0&&!this.path.some(lB));this.animationProgress=0;let x;this.mixTargetDelta=I=>{const j=I/1e3;Bb(f.x,o.x,j),Bb(f.y,o.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aB(this.relativeTarget,this.relativeTargetOrigin,p,j),x&&U9(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=st()),xn(x,this.relativeTarget)),w&&(this.animationValues=h,D9(h,u,this.latestValues,j,v,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Vr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=je.update(()=>{Sd.hasAnimatedSinceResize=!0,this.currentAnimation=W9(0,Mb,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&oC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||st();const f=mn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=mn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}xn(a,l),Bo(a,h),$l(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new B9),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<Ob.length;h++){const f="rotate"+Ob[h];l[f]&&(u[f]=l[f],o.setStaticValue(f,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return G9;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Id(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Id(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ai(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Lb(this.projectionDeltaWithTransform,this.treeScale,p),h&&(u.transform=h(p,u.transform));const{x:g,y:_}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${_.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const w in bh){if(p[w]===void 0)continue;const{correct:T,applyTo:E}=bh[w],v=u.transform==="none"?p[w]:T(p[w],f);if(E){const x=E.length;for(let I=0;I<x;I++)u[E[I]]=v}else u[w]=v}return this.options.layoutId&&(u.pointerEvents=f===this?Id(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Fb),this.root.sharedNodes.clear()}}}function Y9(t){t.updateLayout()}function J9(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?wn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],g=mn(p);p.min=r[f].min,p.max=p.min+g}):oC(i,n.layoutBox,r)&&wn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],g=mn(r[f]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=Uo();$l(a,r,n.layoutBox);const l=Uo();o?$l(l,t.applyTransform(s,!0),n.measuredBox):$l(l,r,n.layoutBox);const u=!rC(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:g}=f;if(p&&g){const _=st();zl(_,n.layoutBox,p.layoutBox);const w=st();zl(w,r,g.layoutBox),sC(_,w)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=_,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function X9(t){li.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Z9(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function eB(t){t.clearSnapshot()}function Fb(t){t.clearMeasurements()}function tB(t){t.isLayoutDirty=!1}function nB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ub(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function rB(t){t.resolveTargetDelta()}function sB(t){t.calcProjection()}function iB(t){t.resetRotation()}function oB(t){t.removeLeadSnapshot()}function Bb(t,e,n){t.translate=Ke(e.translate,0,n),t.scale=Ke(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function $b(t,e,n,r){t.min=Ke(e.min,n.min,r),t.max=Ke(e.max,n.max,r)}function aB(t,e,n,r){$b(t.x,e.x,n.x,r),$b(t.y,e.y,n.y,r)}function lB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const cB={duration:.45,ease:[.4,0,.1,1]},zb=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Hb=zb("applewebkit/")&&!zb("chrome/")?Math.round:tt;function qb(t){t.min=Hb(t.min),t.max=Hb(t.max)}function uB(t){qb(t.x),qb(t.y)}function oC(t,e,n){return t==="position"||t==="preserve-aspect"&&!Ug(Vb(e),Vb(n),.2)}const dB=iC({attachResizeListener:(t,e)=>wr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xp={current:void 0},aC=iC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Xp.current){const t=new dB({});t.mount(window),t.setOptions({layoutScroll:!0}),Xp.current=t}return Xp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),hB={pan:{Feature:k9},drag:{Feature:N9,ProjectionNode:aC,MeasureLayout:eC}},fB=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function pB(t){const e=fB.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Hg(t,e,n=1){const[r,s]=pB(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return zk(o)?parseFloat(o):o}else return jg(s)?Hg(s,e,n+1):s}function mB(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!jg(i))return;const o=Hg(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!jg(i))continue;const o=Hg(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const gB=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),lC=t=>gB.has(t),yB=t=>Object.keys(t).some(lC),Kb=t=>t===oo||t===oe,Wb=(t,e)=>parseFloat(t.split(", ")[e]),Gb=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return Wb(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?Wb(i[1],t):0}},vB=new Set(["x","y","z"]),xB=Xc.filter(t=>!vB.has(t));function wB(t){const e=[];return xB.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const ya={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Gb(4,13),y:Gb(5,14)};ya.translateX=ya.x;ya.translateY=ya.y;const _B=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=ya[u](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const h=e.getValue(u);h&&h.jump(a[u]),t[u]=ya[u](l,i)}),t},bB=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(lC);let i=[],o=!1;const a=[];if(s.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let h=n[l],f=al(h);const p=e[l];let g;if(Th(p)){const _=p.length,w=p[0]===null?1:0;h=p[w],f=al(h);for(let T=w;T<_&&p[T]!==null;T++)g?Ih(al(p[T])===g):g=al(p[T])}else g=al(p);if(f!==g)if(Kb(f)&&Kb(g)){const _=u.get();typeof _=="string"&&u.set(parseFloat(_)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&g===oe&&(e[l]=p.map(parseFloat))}else f!=null&&f.transform&&(g!=null&&g.transform)&&(h===0||p===0)?h===0?u.set(g.transform(h)):e[l]=f.transform(p):(o||(i=wB(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=_B(e,t,a);return i.length&&i.forEach(([h,f])=>{t.getValue(h).set(f)}),t.render(),Rf&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function EB(t,e,n,r){return yB(e)?bB(t,e,n,r):{target:e,transitionEnd:r}}const TB=(t,e,n,r)=>{const s=mB(t,e,r);return e=s.target,r=s.transitionEnd,EB(t,e,n,r)},qg={current:null},cC={current:!1};function IB(){if(cC.current=!0,!!Rf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>qg.current=t.matches;t.addListener(e),e()}else qg.current=!1}function SB(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(on(i))t.addValue(s,i),Ch(r)&&r.add(s);else if(on(o))t.addValue(s,ga(i,{owner:t})),Ch(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,ga(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Qb=new WeakMap,uC=Object.keys(Ic),NB=uC.length,Yb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],kB=mv.length;class CB{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>je.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Df(n),this.isVariantNode=GN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const f in h){const p=h[f];a[f]!==void 0&&on(p)&&(p.set(a[f],!1),Ch(u)&&u.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Qb.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),cC.current||IB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Qb.delete(this.current),this.projection&&this.projection.unmount(),Vr(this.notifyUpdate),Vr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=io.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&je.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<NB;l++){const u=uC[l],{isEnabled:h,Feature:f,ProjectionNode:p,MeasureLayout:g}=Ic[u];p&&(o=p),h(n)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:h,dragConstraints:f,layoutScroll:p,layoutRoot:g}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!h||f&&Mo(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:p,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):st()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Yb.length;r++){const s=Yb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=SB(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<kB;r++){const s=mv[r],i=this.props[s];(Tc(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ga(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Ev(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!on(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Rv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class dC extends CB{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=KU(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){HU(this,r,o);const a=TB(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function PB(t){return window.getComputedStyle(t)}class AB extends dC{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(io.has(n)){const r=Nv(n);return r&&r.default||0}else{const r=PB(e),s=(XN(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Xk(e,n)}build(e,n,r,s){vv(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return bv(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;on(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){sk(e,n,r,s)}}class RB extends dC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(io.has(n)){const r=Nv(n);return r&&r.default||0}return n=ik.has(n)?n:fv(n),e.getAttribute(n)}measureInstanceViewportBox(){return st()}scrapeMotionValuesFromProps(e,n){return ak(e,n)}build(e,n,r,s){wv(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){ok(e,n,r,s)}mount(e){this.isSVGTag=_v(e.tagName),super.mount(e)}}const jB=(t,e)=>yv(t)?new RB(e,{enableHardwareAcceleration:!1}):new AB(e,{enableHardwareAcceleration:!0}),DB={layout:{ProjectionNode:aC,MeasureLayout:eC}},VB={...a9,...k6,...hB,...DB},U=OF((t,e)=>m6(t,e,VB,jB));function hC(){const t=C.useRef(!1);return hv(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function LB(){const t=hC(),[e,n]=C.useState(0),r=C.useCallback(()=>{t.current&&n(e+1)},[e]);return[C.useCallback(()=>je.postRender(r),[r]),e]}class OB extends C.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function MB({children:t,isPresent:e}){const n=C.useId(),r=C.useRef(null),s=C.useRef({width:0,height:0,top:0,left:0});return C.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),C.createElement(OB,{isPresent:e,childRef:r,sizeRef:s},C.cloneElement(t,{ref:r}))}const Zp=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=lk(FB),l=C.useId(),u=C.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return C.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),C.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=C.createElement(MB,{isPresent:n},t)),C.createElement(Af.Provider,{value:u},t)};function FB(){return new Map}function UB(t){return C.useEffect(()=>()=>t(),[])}const ci=t=>t.key||"";function BB(t,e){t.forEach(n=>{const r=ci(n);e.set(r,n)})}function $B(t){const e=[];return C.Children.forEach(t,n=>{C.isValidElement(n)&&e.push(n)}),e}const Ss=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=C.useContext(gv).forceRender||LB()[0],l=hC(),u=$B(t);let h=u;const f=C.useRef(new Map).current,p=C.useRef(h),g=C.useRef(new Map).current,_=C.useRef(!0);if(hv(()=>{_.current=!1,BB(u,g),p.current=h}),UB(()=>{_.current=!0,g.clear(),f.clear()}),_.current)return C.createElement(C.Fragment,null,h.map(v=>C.createElement(Zp,{key:ci(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},v)));h=[...h];const w=p.current.map(ci),T=u.map(ci),E=w.length;for(let v=0;v<E;v++){const x=w[v];T.indexOf(x)===-1&&!f.has(x)&&f.set(x,void 0)}return o==="wait"&&f.size&&(h=[]),f.forEach((v,x)=>{if(T.indexOf(x)!==-1)return;const I=g.get(x);if(!I)return;const j=w.indexOf(x);let D=v;if(!D){const N=()=>{f.delete(x);const b=Array.from(g.keys()).filter(S=>!T.includes(S));if(b.forEach(S=>g.delete(S)),p.current=u.filter(S=>{const P=ci(S);return P===x||b.includes(P)}),!f.size){if(l.current===!1)return;a(),r&&r()}};D=C.createElement(Zp,{key:ci(I),isPresent:!1,onExitComplete:N,custom:e,presenceAffectsLayout:i,mode:o},I),f.set(x,D)}h.splice(j,0,D)}),h=h.map(v=>{const x=v.key;return f.has(x)?v:C.createElement(Zp,{key:ci(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),C.createElement(C.Fragment,null,f.size?h:h.map(v=>C.cloneElement(v)))};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(t,e)=>{const n=C.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...u},h)=>C.createElement("svg",{ref:h,...zB,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${HB(t)}`,a].join(" "),...u},[...e.map(([f,p])=>C.createElement(f,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=J("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=J("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=J("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=J("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=J("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=J("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=J("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=J("Cherry",[["path",{d:"M2 17a5 5 0 0 0 10 0c0-2.76-2.5-5-5-3-2.5-2-5 .24-5 3Z",key:"cvxqlc"}],["path",{d:"M12 17a5 5 0 0 0 10 0c0-2.76-2.5-5-5-3-2.5-2-5 .24-5 3Z",key:"1ostrc"}],["path",{d:"M7 14c3.22-2.91 4.29-8.75 5-12 1.66 2.38 4.94 9 5 12",key:"hqx58h"}],["path",{d:"M22 9c-4.29 0-7.14-2.33-10-7 5.71 0 10 4.67 10 7Z",key:"eykp1o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=J("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=J("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=J("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=J("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=J("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=J("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=J("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=J("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=J("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=J("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=J("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=J("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=J("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=J("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=J("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=J("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=J("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=J("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=J("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=J("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=J("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=J("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=J("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=J("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=J("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=J("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=J("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=J("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=J("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=J("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=J("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=J("Sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=J("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=J("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=J("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=J("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=J("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=J("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=J("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=J("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=J("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=J("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=J("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b$=[{code:"bn",name:"বাংলা",flag:"🇧🇩"},{code:"en",name:"English",flag:"🇺🇸"},{code:"hi",name:"हिन्दी",flag:"🇮🇳"},{code:"ur",name:"اردو",flag:"🇵🇰"}],E$=({onLanguageSelect:t})=>{const{t:e}=an();return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:c.jsx(gC,{className:"w-8 h-8 text-blue-600"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"সঙ্কল্প"}),c.jsx("p",{className:"text-gray-600",children:e("selectLanguage")})]}),c.jsx("div",{className:"space-y-3",children:b$.map(n=>c.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(n.code),className:"w-full p-4 bg-gray-50 hover:bg-blue-50 rounded-xl border-2 border-transparent hover:border-blue-200 transition-all duration-200 flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:"text-2xl",children:n.flag}),c.jsx("span",{className:"text-lg font-medium text-gray-800",children:n.name})]})},n.code))}),c.jsx("div",{className:"mt-8 text-center",children:c.jsx("p",{className:"text-sm text-gray-500",children:"A companion for your journey of self-control and personal growth"})})]})})},T$=({onClose:t})=>{const{t:e,i18n:n}=an(),{currentUser:r}=Yt(),s=Yi(),[i,o]=C.useState(!1),l=(()=>{const f=n.language;return f==="bn"||f==="ur"?{quote:f==="bn"?"তোমাদের মধ্যে সর্বোত্তম ঐ ব্যক্তি, যে ব্যক্তি নিজ চরিত্রকে সর্বোৎকৃষ্ট হিসেবে গঠন করে।":"تم میں سے بہترین وہ شخص ہے جو اپنے کردار کو بہترین بناتا ہے۔",source:f==="bn"?"- (বুখারী ও মুসলিম)":"- (بخاری و مسلم)",donationMessage:f==="bn"?"আমাদের এই যাত্রাকে সচল রাখতে এবং অন্যদের সাহায্য করতে আপনার সহায়তার প্রয়োজন। অল্প দানও একটি বড় পরিবর্তন আনতে পারে।":"ہمارے اس سفر کو جاری رکھنے اور دوسروں کی مدد کے لیے آپ کی مدد درکار ہے۔ تھوڑا سا عطیہ بھی بڑی تبدیلی لا سکتا ہے۔",buttonText:f==="bn"?"সহায়তা করুন":"مدد کریں"}:{quote:"The best of people are those who benefit others and strive for excellence in character.",source:"- Universal Wisdom",donationMessage:"Help us keep this journey alive and support others on their path. Even a small contribution can make a big difference.",buttonText:"Support Us"}})(),u=async()=>{o(!0);try{r&&await Tr(We(he,"users",r.uid),{last_daily_popup:new Date().toDateString()}),s("/profile"),t()}catch(f){console.error("Error updating popup status:",f)}finally{o(!1)}},h=async()=>{try{r&&await Tr(We(he,"users",r.uid),{last_daily_popup:new Date().toDateString()}),t()}catch(f){console.error("Error updating popup status:",f),t()}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:50},className:"bg-white rounded-3xl w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl",children:[c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:h,className:"absolute top-4 right-4 z-10 p-2 bg-white bg-opacity-80 rounded-full hover:bg-opacity-100 transition-all shadow-lg",children:c.jsx(Os,{className:"w-5 h-5 text-gray-600"})}),c.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-orange-400 via-pink-500 to-purple-600 rounded-t-3xl flex items-center justify-center overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"}),c.jsx(U.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring",stiffness:200},className:"relative z-10",children:c.jsx(f$,{className:"w-16 h-16 text-white drop-shadow-lg"})}),c.jsx("div",{className:"absolute top-8 left-8 w-4 h-4 bg-white bg-opacity-30 rounded-full animate-pulse"}),c.jsx("div",{className:"absolute bottom-12 right-12 w-6 h-6 bg-white bg-opacity-20 rounded-full animate-pulse delay-1000"}),c.jsx("div",{className:"absolute top-16 right-8 w-3 h-3 bg-white bg-opacity-40 rounded-full animate-pulse delay-500"})]})]}),c.jsxs("div",{className:"p-8",children:[c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-center mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:n.language==="bn"?"শুভ সকাল!":n.language==="ur"?"صبح بخیر!":"Good Morning!"}),c.jsx("p",{className:"text-gray-600 text-sm",children:n.language==="bn"?"আজকের জন্য একটি অনুপ্রেরণামূলক বার্তা":n.language==="ur"?"آج کے لیے ایک متاثر کن پیغام":"An inspiring message for today"})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-6 border-l-4 border-indigo-500",children:[c.jsxs("blockquote",{className:"text-gray-800 text-lg leading-relaxed mb-3 font-medium",children:['"',l.quote,'"']}),c.jsx("cite",{className:"text-indigo-600 text-sm font-medium",children:l.source})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mb-8",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[c.jsx(Wi,{className:"w-5 h-5 text-red-500"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:n.language==="bn"?"আমাদের সাহায্য করুন":n.language==="ur"?"ہماری مدد کریں":"Help Us"})]}),c.jsx("p",{className:"text-gray-700 leading-relaxed text-sm",children:l.donationMessage})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"space-y-3",children:[c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,disabled:i,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-4 rounded-xl font-semibold hover:from-green-700 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 flex items-center justify-center space-x-2",children:[c.jsx(Wi,{className:"w-5 h-5"}),c.jsx("span",{children:i?"Loading...":l.buttonText})]}),c.jsx("button",{onClick:h,className:"w-full text-gray-600 py-3 rounded-xl font-medium hover:bg-gray-100 transition-colors",children:n.language==="bn"?"পরে দেখব":n.language==="ur"?"بعد میں دیکھوں گا":"Maybe Later"})]})]})]})})},I$=()=>{const{t}=an(),{login:e,loginWithGoogle:n}=Yt(),r=Yi(),[s,i]=C.useState(""),[o,a]=C.useState(""),[l,u]=C.useState(!1),[h,f]=C.useState(!1),[p,g]=C.useState({}),_=()=>{const x={};return s.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(x.email="বৈধ ইমেইল ঠিকানা লিখুন"):x.email="ইমেইল লিখুন",o||(x.password="পাসওয়ার্ড লিখুন"),g(x),Object.keys(x).length===0},w=async x=>{if(x.preventDefault(),!!_()){f(!0),g({});try{await e(s.trim(),o),r("/dashboard")}catch(I){console.error("Login error:",I)}finally{f(!1)}}},T=async()=>{f(!0),g({});try{await n(),r("/dashboard")}catch(x){console.error("Google login error:",x)}finally{f(!1)}},E=x=>p[x]?"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors border-red-300 bg-red-50":"border-gray-300",v=x=>p[x]?"w-full pl-10 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors border-red-300 bg-red-50":"border-gray-300";return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"সঙ্কল্প"}),c.jsx("p",{className:"text-gray-600",children:t("login")})]}),c.jsxs("form",{onSubmit:w,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("email")}),c.jsxs("div",{className:"relative",children:[c.jsx(yC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"email",value:s,onChange:x=>{i(x.target.value),p.email&&g(I=>({...I,email:""}))},className:E("email"),placeholder:"your@email.com",disabled:h}),p.email&&c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:c.jsx(En,{className:"w-5 h-5 text-red-500"})})]}),p.email&&c.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[c.jsx(En,{className:"w-4 h-4 mr-1"}),p.email]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("password")}),c.jsxs("div",{className:"relative",children:[c.jsx(Yg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:l?"text":"password",value:o,onChange:x=>{a(x.target.value),p.password&&g(I=>({...I,password:""}))},className:v("password"),placeholder:"••••••••",disabled:h}),c.jsx("button",{type:"button",onClick:()=>u(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:h,children:l?c.jsx(Wg,{className:"w-5 h-5"}):c.jsx(Gg,{className:"w-5 h-5"})})]}),p.password&&c.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[c.jsx(En,{className:"w-4 h-4 mr-1"}),p.password]})]}),c.jsxs(U.button,{whileHover:{scale:h?1:1.02},whileTap:{scale:h?1:.98},type:"submit",disabled:h,className:"w-full bg-blue-600 text-white py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[h&&c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),c.jsx("span",{children:h?"লগইন হচ্ছে...":t("login")})]})]}),c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-300"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-2 bg-white text-gray-500",children:"অথবা"})})]}),c.jsxs(U.button,{whileHover:{scale:h?1:1.02},whileTap:{scale:h?1:.98},onClick:T,disabled:h,className:"w-full mt-4 bg-white border border-gray-300 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285f4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34a853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#fbbc05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#ea4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),c.jsx("span",{children:h?"প্রক্রিয়াকরণ...":t("loginWithGoogle")})]})]}),c.jsx("div",{className:"mt-8 text-center",children:c.jsxs("p",{className:"text-gray-600",children:[t("dontHaveAccount")," ",c.jsx($I,{to:"/signup",className:"text-blue-600 hover:text-blue-700 font-medium",children:t("signup")})]})})]})})},S$=()=>{const{t}=an(),{signup:e,loginWithGoogle:n}=Yt(),r=Yi(),[s,i]=C.useState(""),[o,a]=C.useState(""),[l,u]=C.useState(""),[h,f]=C.useState(""),[p,g]=C.useState(!1),[_,w]=C.useState(!1),[T,E]=C.useState(!1),[v,x]=C.useState({}),I=()=>{const S={};return h.trim()?h.trim().length<2&&(S.displayName="নাম কমপক্ষে ২ অক্ষরের হতে হবে"):S.displayName="নাম লিখুন",s.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(S.email="বৈধ ইমেইল ঠিকানা লিখুন"):S.email="ইমেইল লিখুন",o?o.length<6&&(S.password="পাসওয়ার্ড কমপক্ষে ৬ অক্ষরের হতে হবে"):S.password="পাসওয়ার্ড লিখুন",l?o!==l&&(S.confirmPassword="পাসওয়ার্ড মিলছে না"):S.confirmPassword="পাসওয়ার্ড নিশ্চিত করুন",x(S),Object.keys(S).length===0},j=async S=>{if(S.preventDefault(),!!I()){E(!0),x({});try{await e(s.trim(),o,h.trim()),r("/dashboard")}catch(P){console.error("Signup error:",P)}finally{E(!1)}}},D=async()=>{E(!0),x({});try{await n(),r("/dashboard")}catch(S){console.error("Google signup error:",S)}finally{E(!1)}},N=S=>v[S]?"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors border-red-300 bg-red-50":"border-gray-300",b=S=>v[S]?"w-full pl-10 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors border-red-300 bg-red-50":"border-gray-300";return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"সঙ্কল্প"}),c.jsx("p",{className:"text-gray-600",children:t("createAccount")})]}),c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"আপনার নাম *"}),c.jsxs("div",{className:"relative",children:[c.jsx(Lv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",value:h,onChange:S=>{f(S.target.value),v.displayName&&x(P=>({...P,displayName:""}))},className:N("displayName"),placeholder:"আপনার নাম লিখুন",disabled:T}),v.displayName&&c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:c.jsx(En,{className:"w-5 h-5 text-red-500"})})]}),v.displayName&&c.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[c.jsx(En,{className:"w-4 h-4 mr-1"}),v.displayName]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("email")," *"]}),c.jsxs("div",{className:"relative",children:[c.jsx(yC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"email",value:s,onChange:S=>{i(S.target.value),v.email&&x(P=>({...P,email:""}))},className:N("email"),placeholder:"your@email.com",disabled:T}),v.email&&c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:c.jsx(En,{className:"w-5 h-5 text-red-500"})})]}),v.email&&c.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[c.jsx(En,{className:"w-4 h-4 mr-1"}),v.email]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("password")," *"]}),c.jsxs("div",{className:"relative",children:[c.jsx(Yg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:p?"text":"password",value:o,onChange:S=>{a(S.target.value),v.password&&x(P=>({...P,password:""}))},className:b("password"),placeholder:"••••••••",disabled:T}),c.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:T,children:p?c.jsx(Wg,{className:"w-5 h-5"}):c.jsx(Gg,{className:"w-5 h-5"})})]}),v.password&&c.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[c.jsx(En,{className:"w-4 h-4 mr-1"}),v.password]}),o&&o.length>=6&&!v.password&&c.jsxs("p",{className:"mt-1 text-sm text-green-600 flex items-center",children:[c.jsx(Ns,{className:"w-4 h-4 mr-1"}),"পাসওয়ার্ড ঠিক আছে"]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("confirmPassword")," *"]}),c.jsxs("div",{className:"relative",children:[c.jsx(Yg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:_?"text":"password",value:l,onChange:S=>{u(S.target.value),v.confirmPassword&&x(P=>({...P,confirmPassword:""}))},className:b("confirmPassword"),placeholder:"••••••••",disabled:T}),c.jsx("button",{type:"button",onClick:()=>w(!_),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:T,children:_?c.jsx(Wg,{className:"w-5 h-5"}):c.jsx(Gg,{className:"w-5 h-5"})})]}),v.confirmPassword&&c.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[c.jsx(En,{className:"w-4 h-4 mr-1"}),v.confirmPassword]}),l&&o===l&&!v.confirmPassword&&c.jsxs("p",{className:"mt-1 text-sm text-green-600 flex items-center",children:[c.jsx(Ns,{className:"w-4 h-4 mr-1"}),"পাসওয়ার্ড মিলেছে"]})]}),c.jsxs(U.button,{whileHover:{scale:T?1:1.02},whileTap:{scale:T?1:.98},type:"submit",disabled:T,className:"w-full bg-blue-600 text-white py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[T&&c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),c.jsx("span",{children:T?"অ্যাকাউন্ট তৈরি হচ্ছে...":t("createAccount")})]})]}),c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-300"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-2 bg-white text-gray-500",children:"অথবা"})})]}),c.jsxs(U.button,{whileHover:{scale:T?1:1.02},whileTap:{scale:T?1:.98},onClick:D,disabled:T,className:"w-full mt-4 bg-white border border-gray-300 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285f4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34a853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#fbbc05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#ea4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),c.jsx("span",{children:T?"প্রক্রিয়াকরণ...":t("loginWithGoogle")})]})]}),c.jsx("div",{className:"mt-8 text-center",children:c.jsxs("p",{className:"text-gray-600",children:[t("alreadyHaveAccount")," ",c.jsx($I,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:t("login")})]})}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("p",{className:"text-xs text-gray-500",children:"অ্যাকাউন্ট তৈরি করে আপনি আমাদের শর্তাবলী এবং গোপনীয়তা নীতিতে সম্মত হচ্ছেন।"})})]})})},ni=[{question:"A bat and a ball cost $1.10 in total. The bat costs $1.00 more than the ball. How much does the ball cost?",options:["$0.10","$0.05","$0.15","$0.20"],correct:1,explanation:"The ball costs $0.05. If the ball costs $0.05, then the bat costs $1.05 ($1.00 more than the ball). Together they cost $1.10."},{question:"If it takes 5 machines 5 minutes to make 5 widgets, how long would it take 100 machines to make 100 widgets?",options:["5 minutes","100 minutes","20 minutes","1 minute"],correct:0,explanation:"5 minutes. Each machine makes 1 widget in 5 minutes, so 100 machines make 100 widgets in 5 minutes."},{question:"In a lake, there is a patch of lily pads. Every day, the patch doubles in size. If it takes 48 days for the patch to cover the entire lake, how long would it take for the patch to cover half of the lake?",options:["24 days","47 days","46 days","25 days"],correct:1,explanation:"47 days. Since the patch doubles every day, it was half the size the day before it covered the entire lake."},{question:"You have 12 balls that look identical. One of them is either heavier or lighter than the others. Using a balance scale only 3 times, how can you identify the different ball?",options:["Divide into groups of 4","Divide into groups of 6","Weigh them one by one","It's impossible"],correct:0,explanation:"Divide into groups of 4. First weighing compares two groups of 4. Based on the result, you can narrow down to the group containing the different ball, then use 2 more weighings to identify it."},{question:"A man lives on the 20th floor of an apartment building. Every morning he takes the elevator down to the ground floor. When he comes home, he takes the elevator to the 10th floor and walks the rest of the way... except on rainy days, when he takes the elevator all the way to the 20th floor. Why?",options:["He's exercising","He's short and can't reach the 20th floor button","The elevator is broken","He likes walking"],correct:1,explanation:"He's too short to reach the 20th floor button, but can reach the 10th floor button. On rainy days, he has an umbrella which he can use to press the 20th floor button."}],N$=({onClose:t,onComplete:e})=>{const{t:n}=an(),[r,s]=C.useState(0),[i,o]=C.useState(null),[a,l]=C.useState(!1),[u,h]=C.useState(0),[f,p]=C.useState(!1),g=ni[r],_=E=>{o(E),l(!0),E===g.correct&&h(u+1)},w=()=>{r<ni.length-1?(s(r+1),o(null),l(!1)):(p(!0),e&&e())},T=()=>{t()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:c.jsx(Kg,{className:"w-5 h-5 text-purple-600"})}),c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:n("mentalWorkout")})]}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(Os,{className:"w-5 h-5 text-gray-500"})})]}),f?c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[c.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx(Ns,{className:"w-10 h-10 text-white"})}),c.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Workout Complete!"}),c.jsxs("p",{className:"text-gray-600 mb-4",children:["You scored ",u," out of ",ni.length," puzzles correctly."]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6",children:[c.jsx("p",{className:"text-green-800 font-medium",children:"🎉 Mental workout completed!"}),c.jsx("p",{className:"text-green-700 text-sm",children:"You earned 10 coins for strengthening your mind."})]}),c.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:T,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-xl font-medium hover:from-purple-700 hover:to-indigo-700 transition-all",children:"Finish"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("span",{className:"text-sm text-gray-500",children:["Question ",r+1," of ",ni.length]}),c.jsxs("span",{className:"text-sm text-gray-500",children:["Score: ",u,"/",ni.length]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/ni.length*100}%`}})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"text-gray-800 mb-4 leading-relaxed",children:g.question}),c.jsx("div",{className:"space-y-3",children:g.options.map((E,v)=>c.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>!a&&_(v),disabled:a,className:`w-full p-3 rounded-xl text-left transition-all duration-200 ${a?v===g.correct?"bg-green-100 border-2 border-green-500 text-green-700":i===v?"bg-red-100 border-2 border-red-500 text-red-700":"bg-gray-100 text-gray-500":i===v?"bg-blue-100 border-2 border-blue-500":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"}`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:E}),a&&c.jsxs("div",{children:[v===g.correct&&c.jsx(Ns,{className:"w-5 h-5 text-green-500"}),i===v&&v!==g.correct&&c.jsx(_$,{className:"w-5 h-5 text-red-500"})]})]})},v))})]}),a&&c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-blue-50 rounded-xl",children:[c.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Explanation:"}),c.jsx("p",{className:"text-blue-700 text-sm",children:g.explanation})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:n("close")}),a&&c.jsx(U.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:w,className:"px-6 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors",children:r<ni.length-1?"Next":"Finish"})]})]})]})})},k$=({onClose:t})=>{const{t:e}=an(),{currentUser:n}=Yt(),[r,s]=C.useState(""),[i,o]=C.useState([]),[a,l]=C.useState(!1),[u,h]=C.useState(!1);C.useEffect(()=>{if(!n)return;const p=Hi(Wt(he,"diaryEntries"),Ec("userId","==",n.uid),Nf("createdAt","desc"));return Ds(p,_=>{const w=[];_.forEach(T=>{w.push({id:T.id,...T.data()})}),o(w),h(!1)},_=>{if(console.error("Query with orderBy failed:",_),_.code==="failed-precondition"){h(!0);const w=Hi(Wt(he,"diaryEntries"),Ec("userId","==",n.uid));return Ds(w,E=>{const v=[];E.forEach(x=>{v.push({id:x.id,...x.data()})}),v.sort((x,I)=>{var N,b,S,P;const j=((b=(N=x.createdAt)==null?void 0:N.toDate)==null?void 0:b.call(N))||new Date(x.createdAt);return(((P=(S=I.createdAt)==null?void 0:S.toDate)==null?void 0:P.call(S))||new Date(I.createdAt)).getTime()-j.getTime()}),o(v)})}})},[n]);const f=async()=>{if(!(!r.trim()||!n)){l(!0);try{await qi(Wt(he,"diaryEntries"),{content:r.trim(),date:new Date().toDateString(),userId:n.uid,createdAt:new Date}),s(""),Y.success("Gratitude entry saved!")}catch(p){console.error("Error saving entry:",p),Y.error("Failed to save entry")}finally{l(!1)}}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:c.jsx(pC,{className:"w-5 h-5 text-blue-600"})}),c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:e("gratitudeDiary")})]}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(Os,{className:"w-5 h-5 text-gray-500"})})]}),u&&c.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-xl",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"Note:"})," For optimal performance, please create the required database index in your Firebase Console. Entries are currently sorted on the client side."]})}),c.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl",children:[c.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"What are you grateful for today?"}),c.jsx("textarea",{value:r,onChange:p=>s(p.target.value),placeholder:"Write about something you're grateful for...",className:"w-full h-32 p-3 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),c.jsx("div",{className:"flex justify-end mt-3",children:c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,disabled:!r.trim()||a,className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[c.jsx(wC,{className:"w-4 h-4"}),c.jsx("span",{children:a?"Saving...":e("save")})]})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Previous Entries"}),c.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.length===0?c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No entries yet. Start your gratitude journey!"}):i.map(p=>c.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-white border border-gray-200 rounded-xl",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx(Mf,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-500",children:p.date})]}),c.jsx("p",{className:"text-gray-700",children:p.content})]},p.id))})]})]})})},_C=({isOpen:t,onClose:e})=>{const{currentUser:n}=Yt(),[r,s]=C.useState([]),[i,o]=C.useState(!0);return C.useEffect(()=>{if(!n||!t){o(!1);return}const a=Hi(Wt(he,"relapseEntries"),Ec("userId","==",n.uid),Nf("timestamp","desc"));return Ds(a,u=>{const h=[];u.forEach(f=>{h.push({id:f.id,...f.data()})}),s(h),o(!1)},u=>{console.error("Error fetching relapse entries:",u),o(!1)})},[n,t]),t?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-60",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md max-h-[80vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(y$,{className:"w-5 h-5 text-red-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"রিল্যাপ্স হিস্টরি"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Relapse History"})]})]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(Os,{className:"w-5 h-5 text-gray-500"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:i?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading history..."})]}):r.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("span",{className:"text-2xl",children:"🎉"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"কোনো রিল্যাপ্স নেই!"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"আপনি এখনো কোনো রিল্যাপ্স রেকর্ড করেননি। চালিয়ে যান!"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx(En,{className:"w-4 h-4 text-red-600"}),c.jsxs("span",{className:"font-medium text-red-800",children:["মোট রিল্যাপ্স: ",r.length]})]}),c.jsx("p",{className:"text-red-700 text-sm",children:"প্রতিটি রিল্যাপ্স থেকে শিখুন এবং আরও শক্তিশালী হয়ে ফিরে আসুন।"})]}),r.map((a,l)=>c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[c.jsx(Mf,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:a.date}),c.jsxs("span",{className:"text-xs text-gray-500",children:["#",r.length-l]})]}),a.reason?c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(Ah,{className:"w-4 h-4 text-gray-500 mt-0.5 flex-shrink-0"}),c.jsx("div",{className:"flex-1",children:c.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.reason})})]}):c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ah,{className:"w-4 h-4 text-gray-400"}),c.jsx("p",{className:"text-xs text-gray-500 italic",children:"কোনো কারণ উল্লেখ করা হয়নি"})]})]},a.id))]})}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,className:"w-full bg-gray-600 text-white py-3 rounded-xl hover:bg-gray-700 transition-colors font-medium",children:"বন্ধ করুন"})})]})}):null},bC=({isOpen:t,onConfirm:e,onCancel:n,loading:r})=>{const{currentUser:s}=Yt(),[i,o]=C.useState(""),[a,l]=C.useState(!1),[u,h]=C.useState(!1),f=async()=>{if(a&&i.trim()&&s)try{await qi(Wt(he,"relapseEntries"),{userId:s.uid,reason:i.trim(),date:new Date().toDateString(),timestamp:Lt(),createdAt:Lt()}),Y.success("Relapse entry saved")}catch(g){console.error("Error saving relapse entry:",g),Y.error("Failed to save relapse entry")}o(""),l(!1),e()},p=()=>{o(""),l(!1),n()};return t?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(qB,{className:"w-8 h-8 text-red-600"})}),c.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"নতুন করে শুরু?"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"আপনি কি নিশ্চিত যে আপনি নতুন করে শুরু করতে চান?"}),c.jsx("p",{className:"text-red-600 text-xs mt-2",children:"এটি আপনার বর্তমান স্ট্রিক রিসেট করে দেবে এবং আপনার ব্যাজ 'Clown' এ ফিরে যাবে।"})]}),a?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"কেন আপনি রিসেট করছেন? (ঐচ্ছিক)"}),c.jsx("button",{onClick:()=>h(!0),className:"p-1 text-blue-600 hover:text-blue-800 transition-colors",title:"View History",children:c.jsx(Qg,{className:"w-4 h-4"})})]}),c.jsx("textarea",{value:i,onChange:g=>o(g.target.value),placeholder:"আপনার অনুভূতি বা কারণ লিখুন...",className:"w-full h-24 p-3 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"এটি আপনাকে ভবিষ্যতে আরও ভালো করতে সাহায্য করবে"})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:p,disabled:r,className:"flex-1 px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors disabled:opacity-50",children:"বাতিল"}),c.jsx(U.button,{whileHover:{scale:r?1:1.02},whileTap:{scale:r?1:.98},onClick:f,disabled:r,className:"flex-1 bg-red-600 text-white px-4 py-3 rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:r?"রিসেট করা হচ্ছে...":"নিশ্চিত করুন"})]})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-center space-x-2 bg-blue-100 text-blue-700 py-3 rounded-xl hover:bg-blue-200 transition-colors",children:[c.jsx(Qg,{className:"w-4 h-4"}),c.jsx("span",{children:"পূর্বের রিল্যাপ্স দেখুন"})]}),c.jsxs("button",{onClick:()=>l(!0),className:"w-full flex items-center justify-center space-x-2 bg-orange-100 text-orange-700 py-3 rounded-xl hover:bg-orange-200 transition-colors",children:[c.jsx(Ah,{className:"w-4 h-4"}),c.jsx("span",{children:"কারণ লিখতে চান?"})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:p,disabled:r,className:"flex-1 px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors disabled:opacity-50",children:"বাতিল"}),c.jsx(U.button,{whileHover:{scale:r?1:1.02},whileTap:{scale:r?1:.98},onClick:f,disabled:r,className:"flex-1 bg-red-600 text-white px-4 py-3 rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:r?"রিসেট করা হচ্ছে...":"হ্যাঁ, রিসেট করুন"})]})]})]})}),c.jsx(_C,{isOpen:u,onClose:()=>h(!1)})]}):null},C$=({embedded:t=!1})=>{an();const{currentUser:e,userData:n,updateUserData:r}=Yt(),{activeTheme:s}=so(),[i,o]=C.useState(!1),[a,l]=C.useState(!1),[u,h]=C.useState(!1),[f,p]=C.useState(!1),[g,_]=C.useState(""),w=(n==null?void 0:n.active_stake)||null,T=((n==null?void 0:n.coins)||0)>=100;C.useEffect(()=>{if(!(w!=null&&w.isActive))return;const D=()=>{var ne,me;const b=new Date,P=(((me=(ne=w.endDate)==null?void 0:ne.toDate)==null?void 0:me.call(ne))||new Date(w.endDate)).getTime()-b.getTime();if(P<=0){_("Challenge Ended"),E();return}const R=Math.floor(P/(1e3*60*60*24)),V=Math.floor(P%(1e3*60*60*24)/(1e3*60*60)),A=Math.floor(P%(1e3*60*60)/(1e3*60));_(`${R}d ${V}h ${A}m`)};D();const N=setInterval(D,6e4);return()=>clearInterval(N)},[w]);const E=async()=>{var D,N;if(!(!e||!(w!=null&&w.isActive)||!n))try{const b=new Date,S=((N=(D=w.endDate)==null?void 0:D.toDate)==null?void 0:N.call(D))||new Date(w.endDate);b>=S&&(n.streak>=7?(await r({coins:n.coins+w.rewardAmount,active_stake:null}),Y.success(`🎉 Challenge completed! You earned ${w.rewardAmount} coins!`,{duration:5e3})):(await r({active_stake:null}),Y.error("Challenge failed. Better luck next time!",{duration:4e3})))}catch(b){console.error("Error checking stake outcome:",b)}},v=async()=>{if(!(!e||!n||!T)){h(!0);try{await uv(he,async D=>{const N=We(he,"users",e.uid),b=await D.get(N);if(!b.exists())throw new Error("User document does not exist");const S=b.data().coins||0;if(S<100)throw new Error("Insufficient coins");const P=new Date,R=new Date;R.setDate(R.getDate()+7);const V={stakeAmount:100,rewardAmount:150,startDate:P,endDate:R,isActive:!0};D.update(N,{coins:S-100,active_stake:V})}),await r({coins:n.coins-100}),o(!1),Y.success("Weekly challenge started! Good luck! 🍀")}catch(D){console.error("Error starting challenge:",D),Y.error("Failed to start challenge. Please try again.")}finally{h(!1)}}},x=async()=>{if(!(!e||!n||!(w!=null&&w.isActive))){p(!0);try{const D={streakStartDate:Lt(),streak:0,currentBadge:"clown",active_stake:{...w,isActive:!1}};await r(D),l(!1),Y.error("চ্যালেঞ্জ বাতিল হয়ে গেছে এবং নতুন যাত্রা শুরু হয়েছে।",{duration:5e3})}catch(D){console.error("Error losing challenge:",D),Y.error("সমস্যা হয়েছে, আবার চেষ্টা করুন।")}finally{p(!1)}}},j=(()=>{switch(s){case"ocean-theme":return{cardBg:"bg-gradient-to-br from-blue-100 to-cyan-50",accent:"from-blue-500 to-cyan-600",border:"border-blue-200"};default:return{cardBg:"bg-white",accent:"from-indigo-500 to-purple-600",border:"border-gray-200"}}})();return c.jsxs("div",{className:"w-full",children:[c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${j.cardBg} rounded-xl shadow-lg p-6 border ${j.border}`,children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${j.accent} rounded-full flex items-center justify-center`,children:c.jsx(eE,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"সাপ্তাহিক চ্যালেঞ্জ"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Weekly Challenge"})]})]}),w!=null&&w.isActive?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx(Ns,{className:"w-5 h-5 text-green-600"}),c.jsx("span",{className:"font-semibold text-green-800",children:"Challenge Active"})]}),c.jsxs("p",{className:"text-green-700 text-sm mb-3",children:["Keep your streak for ",g," to win ",w.rewardAmount," coins!"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[c.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[c.jsx("div",{className:"font-bold text-gray-800",children:w.stakeAmount}),c.jsx("div",{className:"text-gray-500",children:"Coins Staked"})]}),c.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[c.jsx("div",{className:"font-bold text-green-600",children:w.rewardAmount}),c.jsx("div",{className:"text-gray-500",children:"Potential Reward"})]})]})]}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 p-4 bg-orange-50 rounded-xl",children:[c.jsx(mC,{className:"w-6 h-6 text-orange-500"}),c.jsxs("span",{className:"text-lg font-bold text-orange-700",children:[(n==null?void 0:n.streak)||0," Day Streak"]})]}),c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(!0),className:"w-full bg-red-500 text-white py-3 rounded-xl font-medium hover:bg-red-600 transition-colors flex items-center justify-center space-x-2",children:[c.jsx(jv,{className:"w-4 h-4"}),c.jsx("span",{children:"আমি চ্যালেঞ্জটি হেরে গিয়েছি"})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[c.jsx("p",{className:"text-blue-800 text-sm leading-relaxed mb-3",children:"আপনার ১০০ কয়েন বাজি রেখে ৭ দিনের একটি নতুন যাত্রা শুরু করুন। সফল হলে ১৫০ কয়েন পুরস্কার জিতুন!"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[c.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[c.jsx(kn,{className:"w-4 h-4 text-yellow-600"}),c.jsx("span",{className:"font-bold text-gray-800",children:"100"})]}),c.jsx("div",{className:"text-gray-500",children:"Stake Amount"})]}),c.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[c.jsx(Zg,{className:"w-4 h-4 text-green-600"}),c.jsx("span",{className:"font-bold text-green-600",children:"150"})]}),c.jsx("div",{className:"text-gray-500",children:"Reward"})]})]})]}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),c.jsx("span",{children:"Maintain your streak for 7 consecutive days"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),c.jsx("span",{children:"Complete daily check-ins"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),c.jsx("span",{children:"Win 150 coins if successful"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),c.jsx("span",{children:"Lose 100 coins if you break the streak"})]})]}),c.jsx(U.button,{whileHover:{scale:T?1.02:1},whileTap:{scale:T?.98:1},onClick:()=>o(!0),disabled:!T,className:`w-full py-4 rounded-xl font-semibold transition-all duration-200 ${T?`bg-gradient-to-r ${j.accent} text-white hover:shadow-lg`:"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:T?c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(kn,{className:"w-5 h-5"}),c.jsx("span",{children:"১০০ কয়েন দিয়ে চ্যালেঞ্জ শুরু করুন"})]}):c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(En,{className:"w-5 h-5"}),c.jsx("span",{children:"অপর্যাপ্ত কয়েন (১০০ প্রয়োজন)"})]})}),!T&&c.jsxs("p",{className:"text-center text-xs text-red-500",children:["আরও ",100-((n==null?void 0:n.coins)||0)," কয়েন প্রয়োজন"]})]})]}),c.jsx(Ss,{children:i&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(eE,{className:"w-8 h-8 text-white"})}),c.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"চ্যালেঞ্জ নিশ্চিত করুন"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"আপনি কি ৭ দিনের চ্যালেঞ্জ শুরু করতে চান?"})]}),c.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Stake Amount:"}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(kn,{className:"w-4 h-4 text-yellow-600"}),c.jsx("span",{className:"font-bold",children:"100 coins"})]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Potential Reward:"}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Zg,{className:"w-4 h-4 text-green-600"}),c.jsx("span",{className:"font-bold text-green-600",children:"150 coins"})]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Duration:"}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Mf,{className:"w-4 h-4 text-blue-600"}),c.jsx("span",{className:"font-bold",children:"7 days"})]})]})]})}),c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(En,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-yellow-800 text-sm font-medium mb-1",children:"Important:"}),c.jsx("p",{className:"text-yellow-700 text-xs",children:"If you break your streak during the 7-day period, you will lose your 100 coins. Make sure you're ready for the commitment!"})]})]})}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>o(!1),className:"flex-1 px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"বাতিল"}),c.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,disabled:u,className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-3 rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:u?"শুরু করা হচ্ছে...":"চ্যালেঞ্জ শুরু করুন"})]})]})})}),c.jsx(bC,{isOpen:a,onConfirm:x,onCancel:()=>l(!1),loading:f})]})},P$=()=>{var me,fe,se,z;const{hasUnlockedItem:t}=so(),{currentUser:e}=Yt(),[n,r]=C.useState(!1),[s,i]=C.useState(!1),[o,a]=C.useState(.5),[l,u]=C.useState(0),[h,f]=C.useState(!1),[p,g]=C.useState([]),[_,w]=C.useState(!1),[T,E]=C.useState(!1),v=C.useRef(null),x=C.useRef(null),I=t("music","focus-music"),D=[...[{id:"default-1",name:"Peaceful Meditation",duration:"10:00",description:"Calm instrumental for deep focus",url:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav"},{id:"default-2",name:"Nature Sounds",duration:"15:00",description:"Rain and forest ambience",url:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav"},{id:"default-3",name:"Zen Garden",duration:"12:00",description:"Traditional meditation music",url:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav"}],...p.map($=>({id:$.id,name:$.name,duration:$.duration,description:"Custom uploaded track",url:$.url}))];C.useEffect(()=>{if(!e||!I)return;const $=Hi(Wt(he,"customTracks"),Ec("userId","==",e.uid));return Ds($,ee=>{const ue=[];ee.forEach(xe=>{ue.push({id:xe.id,...xe.data()})}),g(ue)})},[e,I]),C.useEffect(()=>{v.current&&(v.current.volume=o,v.current.muted=s)},[o,s]);const N=()=>{if(!I||!v.current)return;const $=D[l];$&&(n?v.current.pause():(v.current.src=$.url,v.current.play().catch(G=>{console.error("Error playing audio:",G),Y.error("Failed to play audio")})),r(!n))},b=()=>{i(!s)},S=()=>{u($=>($+1)%D.length),r(!1)},P=()=>{u($=>($-1+D.length)%D.length),r(!1)},R=$=>{const G=parseFloat($.target.value);a(G),i(G===0)},V=async $=>{var ee;const G=(ee=$.target.files)==null?void 0:ee[0];if(!(!G||!e)){if(!G.type.startsWith("audio/")){Y.error("Please select an audio file");return}if(G.size>10*1024*1024){Y.error("File size must be less than 10MB");return}E(!0);try{const ue=URL.createObjectURL(G),xe=new Audio(ue);await new Promise(at=>{xe.addEventListener("loadedmetadata",at)});const yt=`${Math.floor(xe.duration/60)}:${Math.floor(xe.duration%60).toString().padStart(2,"0")}`;await qi(Wt(he,"customTracks"),{name:G.name.replace(/\.[^/.]+$/,""),fileName:G.name,duration:yt,userId:e.uid,createdAt:new Date,fileSize:G.size,fileType:G.type});const ht=new FileReader;ht.onload=()=>{localStorage.setItem(`audio_${G.name}`,ht.result)},ht.readAsDataURL(G),Y.success("Track uploaded successfully!"),w(!1)}catch(ue){console.error("Error uploading track:",ue),Y.error("Failed to upload track")}finally{E(!1)}}},A=async($,G)=>{try{await z3(We(he,"customTracks",$)),localStorage.removeItem(`audio_${G}`),Y.success("Track deleted successfully")}catch(ee){console.error("Error deleting track:",ee),Y.error("Failed to delete track")}},ne=$=>{u($),r(!1),v.current&&v.current.pause()};return I?c.jsxs(c.Fragment,{children:[c.jsxs(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>f(!h),className:"fixed top-20 right-4 z-30 bg-gradient-to-r from-purple-500 to-indigo-600 text-white p-3 rounded-full shadow-lg hover:shadow-xl transition-all",title:"Focus Music Player",children:[c.jsx(Ju,{className:"w-6 h-6"}),n&&c.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"})]}),c.jsx(Ss,{children:h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:50},className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl max-h-[90vh] flex flex-col",children:[c.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-700 text-white p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:c.jsx(Ju,{className:"w-5 h-5"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-bold",children:"Focus Music"}),c.jsx("p",{className:"text-purple-200 text-sm",children:"Meditation & Focus"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>w(!0),className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors",title:"Upload custom track",children:c.jsx(xC,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors",children:c.jsx(Os,{className:"w-5 h-5"})})]})]})}),D.length>0&&c.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-indigo-50",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-400 to-indigo-500 rounded-full flex items-center justify-center mx-auto mb-3",children:c.jsx(Ju,{className:"w-10 h-10 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:(me=D[l])==null?void 0:me.name}),c.jsx("p",{className:"text-gray-600 text-sm",children:(fe=D[l])==null?void 0:fe.description}),c.jsx("p",{className:"text-gray-500 text-xs mt-1",children:(se=D[l])==null?void 0:se.duration})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx(U.div,{className:"bg-gradient-to-r from-purple-500 to-indigo-600 h-2 rounded-full",initial:{width:"0%"},animate:{width:n?"45%":"0%"},transition:{duration:2,repeat:n?1/0:0}})}),c.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[c.jsx("span",{children:"0:00"}),c.jsx("span",{children:(z=D[l])==null?void 0:z.duration})]})]})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-6 mb-6",children:[c.jsx(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:P,disabled:D.length===0,className:"p-2 text-gray-600 hover:text-purple-600 transition-colors disabled:opacity-50",children:c.jsx(c$,{className:"w-6 h-6"})}),c.jsx(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:N,disabled:D.length===0,className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all disabled:opacity-50",children:n?c.jsx(vC,{className:"w-8 h-8"}):c.jsx(Jg,{className:"w-8 h-8 ml-1"})}),c.jsx(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:S,disabled:D.length===0,className:"p-2 text-gray-600 hover:text-purple-600 transition-colors disabled:opacity-50",children:c.jsx(u$,{className:"w-6 h-6"})})]}),c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx("button",{onClick:b,className:"p-2 text-gray-600 hover:text-purple-600 transition-colors",children:s||o===0?c.jsx(w$,{className:"w-5 h-5"}):c.jsx(x$,{className:"w-5 h-5"})}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:s?0:o,onChange:R,className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #8b5cf6 0%, #8b5cf6 ${(s?0:o)*100}%, #e5e7eb ${(s?0:o)*100}%, #e5e7eb 100%)`}})]})]}),c.jsx("div",{className:"border-t border-gray-200 flex-1 overflow-y-auto",children:D.length===0?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx(Ju,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 mb-2",children:"No tracks available"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Upload your first custom track to get started"})]}):D.map(($,G)=>c.jsx(U.div,{whileHover:{backgroundColor:"#f3f4f6"},className:`p-4 transition-colors ${G===l?"bg-purple-50 border-r-4 border-purple-500":"hover:bg-gray-50"}`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("button",{onClick:()=>ne(G),className:"flex-1 text-left",children:[c.jsx("h4",{className:`font-medium ${G===l?"text-purple-700":"text-gray-800"}`,children:$.name}),c.jsx("p",{className:"text-gray-600 text-sm",children:$.description})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-gray-500 text-xs",children:$.duration}),G===l&&n&&c.jsxs("div",{className:"flex items-center space-x-1 mt-1 justify-end",children:[c.jsx("div",{className:"w-1 h-3 bg-purple-500 rounded animate-pulse"}),c.jsx("div",{className:"w-1 h-2 bg-purple-400 rounded animate-pulse delay-100"}),c.jsx("div",{className:"w-1 h-4 bg-purple-500 rounded animate-pulse delay-200"})]})]}),p.find(ee=>ee.id===$.id)&&c.jsx("button",{onClick:()=>{const ee=p.find(ue=>ue.id===$.id);ee&&A($.id,ee.fileName)},className:"p-1 text-red-500 hover:text-red-700 transition-colors",title:"Delete track",children:c.jsx(m$,{className:"w-4 h-4"})})]})]})},$.id))}),c.jsx("audio",{ref:v,onEnded:()=>r(!1),onError:()=>{r(!1),Y.error("Error playing audio file")}})]})})}),c.jsx(Ss,{children:_&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-60",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Upload Custom Track"}),c.jsx("button",{onClick:()=>w(!1),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(Os,{className:"w-5 h-5 text-gray-500"})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-purple-400 transition-colors",children:[c.jsx(v$,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 mb-2",children:"Click to upload an audio file"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Supports MP3, WAV, M4A (max 10MB)"}),c.jsx("input",{ref:x,type:"file",accept:"audio/*",onChange:V,className:"hidden"}),c.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var $;return($=x.current)==null?void 0:$.click()},disabled:T,className:"mt-4 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-2 rounded-xl hover:from-purple-600 hover:to-indigo-700 transition-all disabled:opacity-50",children:T?"Uploading...":"Choose File"})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[c.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Tips for best experience:"}),c.jsxs("ul",{className:"text-blue-700 text-sm space-y-1",children:[c.jsx("li",{children:"• Use high-quality audio files for better sound"}),c.jsx("li",{children:"• Instrumental or ambient music works best for focus"}),c.jsx("li",{children:"• Keep file sizes under 10MB for faster loading"}),c.jsx("li",{children:"• Files are stored locally on your device"})]})]})]})]})})})]}):null},nu=()=>{const{t}=an(),e=Ea(),n=Yi(),r=[{icon:t$,label:t("dashboard"),path:"/dashboard",isActive:e.pathname==="/dashboard"},{icon:Xo,label:t("community"),path:"/community",isActive:e.pathname==="/community"},{icon:Nc,label:t("rewards"),path:"/rewards",isActive:e.pathname==="/rewards"},{icon:Lv,label:t("profile"),path:"/profile",isActive:e.pathname==="/profile"}];return c.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 z-40",children:c.jsx("div",{className:"max-w-4xl mx-auto",children:c.jsxs("div",{className:"flex justify-around items-center",children:[r.slice(0,2).map(s=>c.jsxs(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(s.path),className:`flex flex-col items-center py-2 px-4 rounded-xl transition-all duration-200 ${s.isActive?"bg-blue-100 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[c.jsx(s.icon,{className:`w-6 h-6 mb-1 ${s.isActive?"text-blue-600":"text-gray-400"}`}),c.jsx("span",{className:"text-xs font-medium",children:s.label})]},s.path)),c.jsxs(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n("/urge-helper"),className:`relative w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg ${e.pathname==="/urge-helper"?"bg-gradient-to-br from-red-500 to-pink-600 shadow-red-200":"bg-gradient-to-br from-indigo-500 to-purple-600 shadow-indigo-200 hover:shadow-xl"}`,style:{marginTop:"-8px"},children:[c.jsx(Vv,{className:"w-8 h-8 text-white"}),e.pathname!=="/urge-helper"&&c.jsx(U.div,{className:"absolute inset-0 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 opacity-30",animate:{scale:[1,1.2,1],opacity:[.3,.1,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),r.slice(2).map(s=>c.jsxs(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(s.path),className:`flex flex-col items-center py-2 px-4 rounded-xl transition-all duration-200 ${s.isActive?"bg-blue-100 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[c.jsx(s.icon,{className:`w-6 h-6 mb-1 ${s.isActive?"text-blue-600":"text-gray-400"}`}),c.jsx("span",{className:"text-xs font-medium",children:s.label})]},s.path))]})})})},Ti=[{id:"clown",name:"Clown",minDays:0,imageUrl:"/1.png",color:"bg-red-500",description:"Starting your journey"},{id:"noob",name:"Noob",minDays:1,imageUrl:"/2.png",color:"bg-orange-500",description:"First step taken"},{id:"novice",name:"Novice",minDays:3,imageUrl:"/3.png",color:"bg-yellow-500",description:"Building momentum"},{id:"average",name:"Average",minDays:7,imageUrl:"/4.png",color:"bg-blue-500",description:"One week strong"},{id:"advanced",name:"Advanced",minDays:15,imageUrl:"/5.png",color:"bg-purple-500",description:"Two weeks of dedication"},{id:"sigma",name:"Sigma",minDays:30,imageUrl:"/6.png",color:"bg-green-500",description:"One month champion"},{id:"chad",name:"Chad",minDays:45,imageUrl:"/7.png",color:"bg-indigo-500",description:"Elite performer"},{id:"absolute_chad",name:"Absolute Chad",minDays:60,imageUrl:"/8.png",color:"bg-pink-500",description:"Two months of excellence"},{id:"giga_chad",name:"Giga Chad",minDays:120,imageUrl:"/9.png",color:"bg-gradient-to-r from-yellow-400 to-orange-500",description:"Legendary status achieved"},{id:"real_man",name:"Real Man",minDays:360,imageUrl:"/9.png",color:"bg-gradient-to-r from-purple-600 to-pink-600",description:"Ultimate mastery achieved"}],Ov=t=>{let e=Ti[0];for(const n of Ti)if(t>=n.minDays)e=n;else break;return e},A$=t=>{const e=Ov(t),n=Ti.findIndex(r=>r.id===e.id)+1;if(n<Ti.length){const r=Ti[n],s=r.minDays-t;return{nextBadge:r,daysRemaining:s}}return{nextBadge:null,daysRemaining:0}},Dh=t=>{if(!t)return 0;const e=t.toDate?t.toDate():new Date(t),r=Math.abs(new Date().getTime()-e.getTime());return Math.floor(r/(1e3*60*60*24))},R$=async(t,e,n)=>{const r=Dh(t),s=Ov(r);e!==s.id&&await n({currentBadge:s.id})},j$=({streakStartDate:t})=>{const e=Dh(t),n=Ov(e),{nextBadge:r,daysRemaining:s}=A$(e);return c.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"relative mb-6",children:c.jsxs(U.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.2},className:"w-32 h-32 mx-auto mb-4 relative",children:[c.jsx("div",{className:"w-full h-full rounded-full overflow-hidden border-4 border-gray-200 shadow-lg",children:c.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover",onError:i=>{i.target.src="https://images.pexels.com/photos/3184418/pexels-photo-3184418.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop"}})}),c.jsx(U.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring",stiffness:200},className:"absolute -bottom-2 -right-2 bg-yellow-400 text-yellow-900 text-xs px-3 py-1 rounded-full font-bold shadow-lg",children:n.name})]})}),c.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:n.name}),c.jsx("p",{className:"text-gray-600 text-sm mb-4",children:n.description}),c.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[c.jsx(Ki,{className:"w-5 h-5 text-blue-600"}),c.jsxs("span",{className:"font-bold text-blue-800",children:["Current Streak: ",e," days"]})]})})]}),r&&c.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-4 border border-purple-200",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[c.jsx(jh,{className:"w-4 h-4 text-purple-600"}),c.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Next Badge"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-purple-300",children:c.jsx("img",{src:r.imageUrl,alt:r.name,className:"w-full h-full object-cover",onError:i=>{i.target.src="https://images.pexels.com/photos/1043471/pexels-photo-1043471.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop"}})}),c.jsxs("div",{className:"flex-1 text-left",children:[c.jsx("h4",{className:"font-semibold text-purple-800 text-sm",children:r.name}),c.jsxs("p",{className:"text-purple-600 text-xs",children:[s," more day",s!==1?"s":""," to unlock"]})]})]}),c.jsxs("div",{className:"mt-3",children:[c.jsx("div",{className:"w-full bg-purple-200 rounded-full h-2",children:c.jsx(U.div,{initial:{width:0},animate:{width:`${Math.min(100,e/r.minDays*100)}%`},transition:{duration:1,delay:.6},className:"bg-gradient-to-r from-purple-500 to-indigo-600 h-2 rounded-full"})}),c.jsxs("div",{className:"flex justify-between text-xs text-purple-600 mt-1",children:[c.jsxs("span",{children:[e," days"]}),c.jsxs("span",{children:[r.minDays," days"]})]})]})]}),!r&&c.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-4 border border-yellow-300",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[c.jsx(Ki,{className:"w-5 h-5 text-yellow-600"}),c.jsx("span",{className:"font-bold text-yellow-800",children:"Maximum Level Achieved!"})]}),c.jsx("p",{className:"text-yellow-700 text-sm",children:"You've reached the highest badge level. Keep maintaining your streak!"})]})]})})},D$=({streakStartDate:t,onRestart:e,onShowHistory:n})=>{const[r,s]=C.useState({days:0,hours:0,minutes:0,seconds:0});return C.useEffect(()=>{const i=()=>{if(!t)return;const a=t.toDate?t.toDate():new Date(t),u=new Date().getTime()-a.getTime(),h=Math.floor(u/(1e3*60*60*24)),f=Math.floor(u%(1e3*60*60*24)/(1e3*60*60)),p=Math.floor(u%(1e3*60*60)/(1e3*60)),g=Math.floor(u%(1e3*60)/1e3);s({days:h,hours:f,minutes:p,seconds:g})};i();const o=setInterval(i,1e3);return()=>clearInterval(o)},[t]),c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"relative w-80 h-80 mx-auto rounded-full overflow-hidden shadow-2xl",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-900 to-black"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-900/30 via-purple-900/20 to-transparent"}),[...Array(20)].map((i,o)=>c.jsx(U.div,{className:"absolute w-1 h-1 bg-white rounded-full opacity-30",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{opacity:[.3,.8,.3],scale:[1,1.5,1]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2}},o)),c.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-white p-8",children:[c.jsxs(U.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center mb-4",children:[c.jsx("div",{className:"text-7xl font-bold mb-2 bg-gradient-to-b from-white to-gray-300 bg-clip-text text-transparent",children:r.days}),c.jsxs("div",{className:"text-lg font-medium text-gray-300",children:[r.days===1?"Day":"Days"," Strong"]})]},r.days),c.jsxs("div",{className:"flex space-x-6 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-blue-300",children:r.hours}),c.jsx("div",{className:"text-xs text-gray-400",children:"Hours"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-purple-300",children:r.minutes}),c.jsx("div",{className:"text-xs text-gray-400",children:"Minutes"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-pink-300",children:r.seconds}),c.jsx("div",{className:"text-xs text-gray-400",children:"Seconds"})]})]})]}),c.jsx(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e,className:"absolute bottom-4 right-4 w-12 h-12 bg-red-500 hover:bg-red-600 rounded-full flex items-center justify-center text-white shadow-lg transition-colors",title:"Restart Journey",children:c.jsx(jv,{className:"w-6 h-6"})}),c.jsx(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:n,className:"absolute bottom-4 left-4 w-12 h-12 bg-orange-500 hover:bg-orange-600 rounded-full flex items-center justify-center text-white shadow-lg transition-colors",title:"View Relapse History",children:c.jsx(Qg,{className:"w-6 h-6"})})]})})},V$=()=>{an();const{userData:t,updateUserData:e,currentUser:n}=Yt(),{activeTheme:r,unlockedItems:s}=so(),[i,o]=C.useState(!1),[a,l]=C.useState(!1),[u,h]=C.useState(!1),[f,p]=C.useState(!1),[g,_]=C.useState(!1),[w,T]=C.useState(""),[E,v]=C.useState(!1),[x,I]=C.useState(""),j=["পরাজয় মানে শেষ নয়, এটি একটি নতুন শুরুর সুযোগ।","প্রতিটি নতুন দিন একটি নতুন সুযোগ নিয়ে আসে।","শক্তি ব্যর্থতা থেকে নয়, আবার উঠে দাঁড়ানো থেকে আসে।","আপনার সবচেয়ে বড় শত্রু আপনার নিজের সন্দেহ।","সাফল্য হলো একবার পড়ে গিয়ে আবার উঠে দাঁড়ানো।"];C.useEffect(()=>{t!=null&&t.streakStartDate&&n&&(Dh(t.streakStartDate),R$(t.streakStartDate,t.currentBadge,e))},[t==null?void 0:t.streakStartDate,t==null?void 0:t.currentBadge,n,e]);const D=async()=>{var A;if(!(!n||!t)){_(!0);try{const ne={streakStartDate:Lt(),streak:0,currentBadge:"clown"};(A=t.active_stake)!=null&&A.isActive&&(ne.active_stake={...t.active_stake,isActive:!1},Y.error("সাপ্তাহিক চ্যালেঞ্জ বাতিল হয়ে গেছে।",{duration:4e3})),await e(ne);const me=j[Math.floor(Math.random()*j.length)];I(me),h(!1),Y.success("নতুন যাত্রা শুরু হয়েছে! আপনি পারবেন! 💪",{duration:5e3})}catch(ne){console.error("Error restarting streak:",ne),Y.error("রিসেট করতে সমস্যা হয়েছে")}finally{_(!1)}}},N=async()=>{if(!t)return;const A=new Date().toDateString(),ne=t.lastCheckIn?new Date(t.lastCheckIn).toDateString():"";if(A!==ne){const me=t.xp+10,fe=t.coins+5;let se=t.streak+1;const z=Math.floor(me/100)+1;let $=0;se%7===0&&($=25,Y.success("🎉 Weekly streak bonus! +25 coins!",{duration:4e3})),await e({xp:me,coins:fe+$,streak:se,level:z,lastCheckIn:new Date().toISOString()}),Y.success(`Daily check-in complete! +10 XP, +${5+$} coins`)}else Y.success("Already checked in today!")},b=async()=>{if(!(!w.trim()||!n)){v(!0);try{if(await qi(Wt(he,"diaryEntries"),{content:w.trim(),date:new Date().toDateString(),userId:n.uid,createdAt:new Date}),T(""),Y.success("Gratitude saved! +2 coins"),t){const A=t.xp+5,ne=t.coins+2,me=Math.floor(A/100)+1;await e({xp:A,coins:ne,level:me})}}catch(A){console.error("Error saving gratitude:",A),Y.error("Failed to save gratitude")}finally{v(!1)}}},S=async()=>{if(!t)return;const A=t.coins+10;await e({coins:A}),Y.success("Mental workout completed! +10 coins")},P=[{icon:pC,label:"ডায়েরি",englishLabel:"Diary",color:"bg-blue-500",hoverColor:"hover:bg-blue-600",action:()=>l(!0)},{icon:Vv,label:"জরুরি সাহায্য",englishLabel:"Urge Helper",color:"bg-red-500",hoverColor:"hover:bg-red-600",action:()=>window.location.href="/urge-helper"},{icon:Xo,label:"কমিউনিটি",englishLabel:"Community",color:"bg-green-500",hoverColor:"hover:bg-green-600",action:()=>window.location.href="/community"},{icon:Nc,label:"পুরস্কার",englishLabel:"Rewards",color:"bg-yellow-500",hoverColor:"hover:bg-yellow-600",action:()=>window.location.href="/rewards"}];if(!t)return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading your journey..."})]})});t.xp%100,Dh(t.streakStartDate);const V=(()=>{switch(r){case"ocean-theme":return{background:"bg-gradient-to-br from-blue-50 to-cyan-100",cardBg:"bg-gradient-to-br from-blue-100 to-cyan-50",accent:"from-blue-500 to-cyan-600"};default:return{background:"bg-slate-50",cardBg:"bg-white",accent:"from-indigo-500 to-purple-600"}}})();return Object.values(s).reduce((A,ne)=>A+ne.length,0),c.jsxs("div",{className:`min-h-screen ${V.background} pb-20 relative`,children:[c.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"আপনার সঙ্কল্পের যাত্রা"}),c.jsx(D$,{streakStartDate:t.streakStartDate,onRestart:()=>h(!0),onShowHistory:()=>p(!0)}),c.jsx(Ss,{children:x&&c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-xl",children:[c.jsx("p",{className:"text-green-800 font-medium text-center",children:x}),c.jsx("button",{onClick:()=>I(""),className:"mt-2 text-green-600 hover:text-green-800 text-sm",children:"✕"})]})})]}),c.jsx(j$,{streakStartDate:t.streakStartDate}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`${V.cardBg} rounded-xl shadow-lg p-6`,children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[c.jsx(kn,{className:"w-6 h-6 text-yellow-500"}),c.jsx("span",{className:"text-2xl font-bold text-gray-800",children:t.coins})]}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Coins"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[c.jsx(jh,{className:"w-6 h-6 text-green-500"}),c.jsx("span",{className:"text-2xl font-bold text-gray-800",children:t.level})]}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Level"})]})]}),c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:N,className:`w-full mt-4 bg-gradient-to-r ${V.accent} text-white py-3 rounded-xl font-medium hover:shadow-lg transition-all flex items-center space-x-2 justify-center`,children:[c.jsx(Xg,{className:"w-5 h-5"}),c.jsx("span",{children:"Daily Check-in"})]})]}),c.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:c.jsx(C$,{embedded:!0})}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:`${V.cardBg} rounded-xl shadow-lg p-6`,children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Quick Actions"}),c.jsx("div",{className:"grid grid-cols-2 gap-4",children:P.map((A,ne)=>c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:A.action,className:"p-6 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors text-center group",children:[c.jsx("div",{className:`w-12 h-12 ${A.color} ${A.hoverColor} rounded-full flex items-center justify-center mx-auto mb-3 transition-colors group-hover:scale-110 transform duration-200`,children:c.jsx(A.icon,{className:"w-6 h-6 text-white"})}),c.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:A.label}),c.jsx("div",{className:"text-xs text-gray-500",children:A.englishLabel})]},ne))})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:`${V.cardBg} rounded-xl shadow-lg p-6`,children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"আজকের কৃতজ্ঞতা"}),c.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"What are you thankful for today?"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("textarea",{value:w,onChange:A=>T(A.target.value),placeholder:"I'm grateful for...",className:"w-full h-24 p-3 border border-gray-200 rounded-xl resize-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm"}),c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:b,disabled:!w.trim()||E,className:`w-full bg-gradient-to-r ${V.accent} text-white py-3 rounded-xl font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2`,children:[c.jsx(wC,{className:"w-4 h-4"}),c.jsx("span",{children:E?"Saving...":"Save Gratitude"})]})]})]})]}),c.jsx(P$,{}),c.jsx(bC,{isOpen:u,onConfirm:D,onCancel:()=>h(!1),loading:g}),c.jsx(_C,{isOpen:f,onClose:()=>p(!1)}),i&&c.jsx(N$,{onClose:()=>o(!1),onComplete:S}),a&&c.jsx(k$,{onClose:()=>l(!1)}),c.jsx(nu,{})]})},em=async(t,e,n)=>{const r=[e.uid,t].sort().join("_"),s=We(he,"chats",r);try{return(await xh(s)).exists()||await cv(s,{participants:[e.uid,t],participantNames:{[e.uid]:e.displayName||"User",[t]:n},createdAt:Lt(),lastMessage:"",lastMessageTimestamp:Lt()}),r}catch(i){throw console.error("Error creating/getting chat:",i),i}},L$=["😊","😂","❤️","👍","🎉","🔥","💪","🙏","✨","🌟"],O$=({user:t,currentUser:e,onClose:n})=>{const[r,s]=C.useState([]),[i,o]=C.useState(""),[a,l]=C.useState(!1),[u,h]=C.useState(!1),f=C.useRef(null),p=e?[e.uid,t.id].sort().join("_"):null,g=()=>{var I;(I=f.current)==null||I.scrollIntoView({behavior:"smooth"})};C.useEffect(()=>{g()},[r]),C.useEffect(()=>{if(!e||!p)return;const j=(async()=>{try{await em(t.id,e,t.displayName);const D=Wt(he,"chats",p,"messages"),N=Hi(D,Nf("timestamp","asc"));return Ds(N,S=>{const P=[];S.forEach(R=>{const V=R.data();P.push({id:R.id,...V,timestamp:V.timestamp||new Date})}),s(P)},S=>{console.error("Error listening to messages:",S),Y.error("Failed to load messages")})}catch(D){console.error("Error setting up message listener:",D),Y.error("Failed to initialize chat")}})();return()=>{j.then(D=>{D&&D()})}},[e,p,t.id]);const _=async()=>{if(!(!i.trim()||!e||!p)){h(!0);try{await em(t.id,e,t.displayName);const I=Wt(he,"chats",p,"messages");await qi(I,{content:i.trim(),senderId:e.uid,receiverId:t.id,timestamp:Lt(),type:"text"});const j=We(he,"chats",p);await Tr(j,{lastMessage:i.trim(),lastMessageTimestamp:Lt(),participantNames:{[e.uid]:e.displayName||"Unknown",[t.id]:t.displayName}}),o(""),l(!1)}catch(I){console.error("Error sending message:",I),Y.error("Failed to send message")}finally{h(!1)}}},w=async I=>{if(!(!e||!p))try{await em(t.id,e,t.displayName);const j=Wt(he,"chats",p,"messages");await qi(j,{content:I,senderId:e.uid,receiverId:t.id,timestamp:Lt(),type:"emoji"});const D=We(he,"chats",p);await Tr(D,{lastMessage:I,lastMessageTimestamp:Lt(),participantNames:{[e.uid]:e.displayName||"Unknown",[t.id]:t.displayName}}),l(!1)}catch(j){console.error("Error sending emoji:",j),Y.error("Failed to send emoji")}},T=I=>{if(!I)return"";let j;if(I.toDate)j=I.toDate();else if(I instanceof Date)j=I;else return"";return j.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},E=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),_())},v=Ti.find(I=>I.id===(t.currentBadge||"clown")),x=v?v.imageUrl:"/1.png";return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:50},className:"bg-white rounded-2xl w-full max-w-md h-[600px] flex flex-col overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("button",{onClick:n,className:"p-1 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors",children:c.jsx(fC,{className:"w-5 h-5"})}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-white",children:c.jsx("img",{src:x,alt:t.displayName,className:"w-full h-full object-cover",onError:I=>{I.target.src="/1.png"}})}),t.isOnline&&c.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-400 border-2 border-white rounded-full"})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold",children:t.displayName}),c.jsxs("p",{className:"text-xs opacity-80",children:[t.isOnline?"Online":"Offline"," • Level ",t.level]})]})]}),c.jsx("button",{className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors",children:c.jsx(r$,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[r.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("span",{className:"text-2xl",children:"👋"})}),c.jsxs("p",{className:"text-gray-500 text-sm",children:["Start a conversation with ",t.displayName]})]}):r.map(I=>{const j=I.senderId===(e==null?void 0:e.uid);return c.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`flex ${j?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${j?"bg-indigo-600 text-white":"bg-white text-gray-800 shadow-sm"}`,children:[I.type==="emoji"?c.jsx("span",{className:"text-2xl",children:I.content}):c.jsx("p",{className:"text-sm",children:I.content}),c.jsx("p",{className:`text-xs mt-1 text-right ${j?"text-indigo-200":"text-gray-500"}`,children:T(I.timestamp)})]})},I.id)}),c.jsx("div",{ref:f})]}),a&&c.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"bg-white border-t border-gray-200 p-4",children:c.jsx("div",{className:"grid grid-cols-5 gap-2",children:L$.map((I,j)=>c.jsx(U.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>w(I),className:"text-2xl p-2 hover:bg-gray-100 rounded-lg transition-colors",children:I},j))})}),c.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>l(!a),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(h$,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex-1 relative",children:c.jsx("textarea",{value:i,onChange:I=>o(I.target.value),onKeyPress:E,placeholder:"Type a message...",className:"w-full px-4 py-2 border border-gray-300 rounded-full resize-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent max-h-20",rows:1})}),c.jsx(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:_,disabled:!i.trim()||u,className:"bg-indigo-600 text-white p-2 rounded-full hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c.jsx(Dv,{className:"w-5 h-5"})})]})})]})})},M$=({post:t,currentUser:e,userData:n,onClose:r,onCommentAdded:s})=>{const[i,o]=C.useState(t),[a,l]=C.useState(""),[u,h]=C.useState(!1);C.useEffect(()=>Ds(We(he,"communityPosts",t.id),T=>{T.exists()&&o({id:T.id,...T.data()})}),[t.id]);const f=async()=>{if(!(!a.trim()||!e||!n)){h(!0);try{const w=W3(he),T=We(he,"communityPosts",i.id),E={id:Date.now().toString(),content:a.trim(),authorId:e.uid,authorName:n.displayName,createdAt:new Date,likes:[]};w.update(T,{comments:Ag(E),commentCount:Rg(1)});const v=We(he,"users",e.uid);w.update(v,{coins:Rg(2)}),await w.commit(),l(""),Y.success("Comment added! +2 coins"),s&&s()}catch(w){console.error("Error adding comment:",w),Y.error("Failed to add comment")}finally{h(!1)}}},p=w=>{var D;const T=((D=w==null?void 0:w.toDate)==null?void 0:D.call(w))||new Date(w),v=new Date().getTime()-T.getTime(),x=Math.floor(v/(1e3*60)),I=Math.floor(v/(1e3*60*60)),j=Math.floor(v/(1e3*60*60*24));return j>0?`${j}d ago`:I>0?`${I}h ago`:x>0?`${x}m ago`:"Just now"},g=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),f())},_=Array.isArray(i.comments)?i.comments:[];return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl w-full max-w-md max-h-[80vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-800",children:["Comments (",i.commentCount||_.length,")"]}),c.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(Os,{className:"w-5 h-5 text-gray-500"})})]}),c.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-white font-bold text-xs",children:i.authorName.charAt(0).toUpperCase()})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("h4",{className:"font-medium text-gray-800 text-sm",children:i.authorName}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Ki,{className:"w-3 h-3 text-yellow-500"}),c.jsxs("span",{className:"text-xs text-gray-500",children:["L",i.authorLevel]})]})]}),c.jsx("p",{className:"text-xs text-gray-500",children:p(i.createdAt)})]})]}),c.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:i.content})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:_.length>0?_.map(w=>{var T;return c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-white font-bold text-xs",children:w.authorName.charAt(0).toUpperCase()})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"bg-gray-100 rounded-2xl px-3 py-2",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx("h5",{className:"font-medium text-gray-800 text-sm",children:w.authorName}),c.jsx("span",{className:"text-xs text-gray-500",children:p(w.createdAt)})]}),c.jsx("p",{className:"text-gray-700 text-sm",children:w.content})]}),c.jsxs("div",{className:"flex items-center space-x-4 mt-2 ml-3",children:[c.jsxs("button",{className:"flex items-center space-x-1 text-gray-500 hover:text-red-500 transition-colors",children:[c.jsx(Wi,{className:"w-3 h-3"}),c.jsx("span",{className:"text-xs",children:((T=w.likes)==null?void 0:T.length)||0})]}),c.jsx("button",{className:"text-xs text-gray-500 hover:text-gray-700 transition-colors",children:"Reply"})]})]})]},w.id)}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-3",children:c.jsx("span",{className:"text-xl",children:"💬"})}),c.jsx("p",{className:"text-gray-500 text-sm",children:"No comments yet"}),c.jsx("p",{className:"text-gray-400 text-xs",children:"Be the first to comment!"})]})}),c.jsx("div",{className:"p-4 border-t border-gray-200",children:c.jsxs("div",{className:"flex items-end space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-white font-bold text-xs",children:n==null?void 0:n.displayName.charAt(0).toUpperCase()})}),c.jsx("div",{className:"flex-1",children:c.jsx("textarea",{value:a,onChange:w=>l(w.target.value),onKeyPress:g,placeholder:"Write a comment...",className:"w-full px-3 py-2 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm",rows:2})}),c.jsx(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:f,disabled:!a.trim()||u,className:"bg-indigo-600 text-white p-2 rounded-full hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c.jsx(Dv,{className:"w-4 h-4"})})]})})]})})},F$=()=>{var vn;an();const{currentUser:t,userData:e,updateUserData:n}=Yt(),{unlockedItems:r}=so(),[s,i]=C.useState([]),[o,a]=C.useState([]),[l,u]=C.useState(!1),[h,f]=C.useState(!1),[p,g]=C.useState(!1),[_,w]=C.useState(null),[T,E]=C.useState(null),[v,x]=C.useState(""),[I,j]=C.useState("general"),[D,N]=C.useState(!1),[b,S]=C.useState("posts"),[P,R]=C.useState(""),[V,A]=C.useState("relevant"),[ne,me]=C.useState(0),fe=[{value:"motivation",label:"অনুপ্রেরণা",emoji:"💪",color:"bg-blue-100 text-blue-800"},{value:"success",label:"সাফল্য",emoji:"🎉",color:"bg-green-100 text-green-800"},{value:"support",label:"সহায়তা",emoji:"🤝",color:"bg-purple-100 text-purple-800"},{value:"general",label:"সাধারণ",emoji:"💬",color:"bg-gray-100 text-gray-800"}],se=F=>{const ie=Ti.find(Se=>Se.id===F);return(ie==null?void 0:ie.imageUrl)||"/1.png"},z=F=>{var Ce;const ie=new Date,Se=((Ce=F==null?void 0:F.toDate)==null?void 0:Ce.call(F))||new Date(F),Ie=(ie.getTime()-Se.getTime())/(1e3*60*60);return Math.max(0,24-Ie)},$=F=>{var ie;return((ie=e==null?void 0:e.following)==null?void 0:ie.includes(F))||!1},G=F=>{var we;const ie=(((we=F.likes)==null?void 0:we.length)||0)*2,Se=(F.commentCount||0)*3,Ie=$(F.authorId)?10:0,Ce=z(F.createdAt);return ie+Se+Ie+Ce};C.useEffect(()=>{const F=new Date;F.setDate(F.getDate()-30);const ie=Hi(Wt(he,"communityPosts"),Ec("createdAt",">=",Be.fromDate(F)),Nf("createdAt","desc"),M_(100));return Ds(ie,Ie=>{const Ce=[];Ie.forEach(Ye=>{const Ze={id:Ye.id,...Ye.data()};Ze.relevanceScore=G(Ze),Ce.push(Ze)});let we=[...Ce];if(V==="relevant")we.sort((Ye,Ze)=>(Ze.relevanceScore||0)-(Ye.relevanceScore||0));else if(V==="recent")we.sort((Ye,Ze)=>{var Qs,ru,$r,ao;const Nt=((ru=(Qs=Ye.createdAt)==null?void 0:Qs.toDate)==null?void 0:ru.call(Qs))||new Date(Ye.createdAt);return(((ao=($r=Ze.createdAt)==null?void 0:$r.toDate)==null?void 0:ao.call($r))||new Date(Ze.createdAt)).getTime()-Nt.getTime()});else if(V==="following"){const Ye=we.filter(Nt=>$(Nt.authorId)),Ze=we.filter(Nt=>!$(Nt.authorId));we=[...Ye.sort((Nt,Br)=>(Br.relevanceScore||0)-(Nt.relevanceScore||0)),...Ze.sort((Nt,Br)=>(Br.relevanceScore||0)-(Nt.relevanceScore||0))]}i(we)})},[V,e==null?void 0:e.following]),C.useEffect(()=>{t&&(async()=>{try{const ie=Hi(Wt(he,"users"),M_(100)),Se=await $3(ie),Ie=[];Se.forEach(Ce=>{const we=Ce.data();Ce.id!==(t==null?void 0:t.uid)&&Ie.push({id:Ce.id,displayName:we.displayName||"Unknown User",level:we.level||1,currentBadge:we.currentBadge||"clown",isOnline:we.isOnline||!1,lastSeen:we.lastSeen,following:we.following||[],followers:we.followers||[]})}),a(Ie)}catch(ie){console.error("Error fetching users:",ie)}})()},[t]),C.useEffect(()=>{if(!t)return;(async()=>{try{me(0)}catch(ie){console.error("Error fetching comment count:",ie)}})()},[t]);const ee=async()=>{if(!(!v.trim()||!t||!e)){N(!0);try{const F=r.badges||[],ie=e.currentBadge||"clown";if(await qi(Wt(he,"communityPosts"),{content:v.trim(),authorId:t.uid,authorName:e.displayName,authorLevel:e.level,authorBadges:F,authorCurrentBadge:ie,createdAt:new Date,likes:[],commentCount:0,category:I}),x(""),u(!1),Y.success("Post shared with community! +3 coins"),e){const Se=e.coins+3;await n({coins:Se})}}catch(F){console.error("Error creating post:",F),Y.error("Failed to create post")}finally{N(!1)}}},ue=async(F,ie)=>{if(!t)return;const Se=We(he,"communityPosts",F),Ie=ie.includes(t.uid);try{if(Ie)await Tr(Se,{likes:B_(t.uid)});else if(await Tr(Se,{likes:Ag(t.uid)}),ie.length+1===10){const we=s.find(Ye=>Ye.id===F);if(we&&we.authorId!==t.uid){const Ye=We(he,"users",we.authorId);await Tr(Ye,{coins:Rg(15)}),console.log(`Post by ${we.authorName} reached 10 likes! +15 coins awarded.`)}}}catch(Ce){console.error("Error updating like:",Ce)}},xe=async F=>{var Se;if(!t){Y.error("অনুগ্রহ করে ফলো করার জন্য লগইন করুন।");return}if(t.uid===F){Y.error("আপনি নিজেকে ফলো করতে পারবেন না।");return}const ie=We(he,"users",t.uid);console.log(`Follow attempt for target: ${F} by user: ${t.uid}`);try{if(await uv(he,async Ie=>{const Ce=await Ie.get(ie);if(!Ce.exists())throw new Error("আপনার ইউজার প্রোফাইল খুঁজে পাওয়া যায়নি।");(Ce.data().following||[]).includes(F)?(Ie.update(ie,{following:B_(F)}),console.log(`User ${t.uid} is unfollowing ${F}`)):(Ie.update(ie,{following:Ag(F)}),console.log(`User ${t.uid} is following ${F}`))}),e){const Ce=$(F)?((Se=e.following)==null?void 0:Se.filter(we=>we!==F))||[]:[...e.following||[],F];await n({following:Ce})}Y.success("ফলো স্ট্যাটাস আপডেট হয়েছে!")}catch(Ie){console.error("Follow Transaction Failed:",Ie),Y.error("ফলো স্ট্যাটাস আপডেট করা যায়নি।")}},yt=async F=>{if(!t){Y.error("অনুগ্রহ করে চ্যাট শুরু করার জন্য লগইন করুন।");return}if(t.uid===F.id){Y.error("আপনি নিজের সাথে চ্যাট করতে পারবেন না।");return}const ie=[t.uid,F.id].sort().join("_"),Se=We(he,"chats",ie);console.log(`Initiating chat. Checking for chat ID: ${ie}`);try{(await xh(Se)).exists()?console.log("Chat document already exists."):(console.log("Chat does not exist. Creating new chat document..."),await cv(Se,{participants:[t.uid,F.id],participantNames:{[t.uid]:t.displayName||"User",[F.id]:F.displayName||"User"},createdAt:Lt(),lastMessage:""}),console.log("Chat document created successfully.")),w(F),f(!0)}catch(Ie){console.error("Error initiating chat:",Ie),Y.error("চ্যাট সেশন শুরু করা যায়নি।")}},ht=F=>{E(F),g(!0)},at=()=>{const F=ne+1;if(me(F),F%5===0&&e){const ie=e.coins+10;n({coins:ie}),Y.success("Wisdom Sharer! +10 coins for 5 comments!",{duration:4e3})}},Jt=F=>{var Ze;const ie=((Ze=F==null?void 0:F.toDate)==null?void 0:Ze.call(F))||new Date(F),Ie=new Date().getTime()-ie.getTime(),Ce=Math.floor(Ie/(1e3*60)),we=Math.floor(Ie%(1e3*60*60*24)/(1e3*60*60)),Ye=Math.floor(Ie/(1e3*60*60*24));return Ye>0?`${Ye}d ago`:we>0?`${we}h ago`:Ce>0?`${Ce}m ago`:"Just now"},ja=F=>fe.find(ie=>ie.value===F)||fe[3],Ur=o.filter(F=>F.displayName&&F.displayName.toLowerCase().includes(P.toLowerCase()));return c.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20",children:[c.jsx("div",{className:"bg-white shadow-sm px-4 py-6",children:c.jsxs("div",{className:"max-w-md mx-auto",children:[c.jsxs(U.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"কমিউনিটি"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Connect and share your journey"})]}),c.jsx(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(!0),className:"bg-indigo-600 text-white p-3 rounded-full hover:bg-indigo-700 transition-colors",children:c.jsx(xC,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"flex space-x-1 bg-gray-100 rounded-xl p-1",children:[c.jsxs("button",{onClick:()=>S("posts"),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg transition-colors ${b==="posts"?"bg-white text-indigo-700 shadow-sm":"text-gray-600 hover:bg-gray-200"}`,children:[c.jsx(Ah,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:"Posts"})]}),c.jsxs("button",{onClick:()=>S("chat"),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg transition-colors ${b==="chat"?"bg-white text-indigo-700 shadow-sm":"text-gray-600 hover:bg-gray-200"}`,children:[c.jsx(cl,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:"Chat"})]})]})]})}),c.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[c.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6",children:c.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center justify-center mb-2",children:c.jsx(Xo,{className:"w-5 h-5 text-blue-600"})}),c.jsx("div",{className:"text-2xl font-bold text-gray-800",children:o.length+1}),c.jsx("div",{className:"text-xs text-gray-500",children:"Members"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center justify-center mb-2",children:c.jsx(cl,{className:"w-5 h-5 text-green-600"})}),c.jsx("div",{className:"text-2xl font-bold text-gray-800",children:s.length}),c.jsx("div",{className:"text-xs text-gray-500",children:"Posts"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center justify-center mb-2",children:c.jsx(jh,{className:"w-5 h-5 text-purple-600"})}),c.jsx("div",{className:"text-2xl font-bold text-gray-800",children:((vn=e==null?void 0:e.following)==null?void 0:vn.length)||0}),c.jsx("div",{className:"text-xs text-gray-500",children:"Following"})]})]})}),b==="posts"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4",children:c.jsx("div",{className:"flex space-x-1",children:[{key:"relevant",label:"Relevant",icon:jh},{key:"recent",label:"Recent",icon:JB},{key:"following",label:"Following",icon:Xo}].map(F=>c.jsxs("button",{onClick:()=>A(F.key),className:`flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded-lg transition-colors ${V===F.key?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:bg-gray-100"}`,children:[c.jsx(F.icon,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:F.label})]},F.key))})}),c.jsx("div",{className:"space-y-4",children:s.length===0?c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[c.jsx(Xo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No posts yet"}),c.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Be the first to share your journey!"}),c.jsx("button",{onClick:()=>u(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-xl hover:bg-indigo-700 transition-colors",children:"Create First Post"})]}):s.map(F=>{var we,Ye;const ie=ja(F.category),Se=(we=F.likes)==null?void 0:we.includes((t==null?void 0:t.uid)||""),Ie=$(F.authorId),Ce=F.authorId===(t==null?void 0:t.uid);return c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-gray-200",children:c.jsx("img",{src:se(F.authorCurrentBadge||"clown"),alt:F.authorName,className:"w-full h-full object-cover",onError:Ze=>{Ze.target.src="/1.png"}})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("h4",{className:"font-semibold text-gray-800",children:F.authorName}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Ki,{className:"w-3 h-3 text-yellow-500"}),c.jsxs("span",{className:"text-xs text-gray-500",children:["L",F.authorLevel]})]}),F.authorBadges&&F.authorBadges.length>0&&c.jsxs("div",{className:"flex space-x-1",children:[F.authorBadges.slice(0,2).map((Ze,Nt)=>c.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs",children:"🏆"})},Nt)),F.authorBadges.length>2&&c.jsxs("span",{className:"text-xs text-gray-500",children:["+",F.authorBadges.length-2]})]}),V==="relevant"&&F.relevanceScore&&c.jsxs("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:["Score: ",Math.round(F.relevanceScore)]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("p",{className:"text-xs text-gray-500",children:Jt(F.createdAt)}),!Ce&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>xe(F.authorId),className:`text-xs px-2 py-1 rounded-full transition-colors ${Ie?"bg-green-100 text-green-700 hover:bg-green-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:Ie?c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(tE,{className:"w-3 h-3"}),c.jsx("span",{children:"Following"})]}):c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(nE,{className:"w-3 h-3"}),c.jsx("span",{children:"Follow"})]})}),c.jsx("button",{onClick:()=>{const Ze=o.find(Nt=>Nt.id===F.authorId);Ze&&yt(Ze)},className:"text-xs bg-gray-100 text-gray-700 hover:bg-gray-200 px-2 py-1 rounded-full transition-colors",children:c.jsx(cl,{className:"w-3 h-3"})})]})]})]})]}),c.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${ie.color}`,children:[ie.emoji," ",ie.label]})]}),c.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed",children:F.content}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:()=>ue(F.id,F.likes||[]),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${Se?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[c.jsx(Wi,{className:`w-4 h-4 ${Se?"fill-current":""}`}),c.jsx("span",{className:"text-sm",children:((Ye=F.likes)==null?void 0:Ye.length)||0})]}),c.jsxs("button",{onClick:()=>ht(F),className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",children:[c.jsx(cl,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:F.commentCount||0})]})]}),c.jsx("button",{className:"p-2 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",children:c.jsx(l$,{className:"w-4 h-4"})})]})]},F.id)})})]}),b==="chat"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4",children:c.jsxs("div",{className:"relative",children:[c.jsx(o$,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Search members...",value:P,onChange:F=>R(F.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Community Members"}),c.jsx("div",{className:"space-y-3",children:Ur.length===0?c.jsx("p",{className:"text-gray-500 text-center py-4",children:"No members found"}):Ur.map(F=>{const ie=$(F.id);return c.jsxs(U.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-gray-200",children:c.jsx("img",{src:se(F.currentBadge||"clown"),alt:F.displayName,className:"w-full h-full object-cover",onError:Se=>{Se.target.src="/1.png"}})}),F.isOnline&&c.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-800",children:F.displayName}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ki,{className:"w-3 h-3 text-yellow-500"}),c.jsxs("span",{className:"text-xs text-gray-500",children:["Level ",F.level]}),F.isOnline?c.jsx("span",{className:"text-xs text-green-600",children:"Online"}):c.jsx("span",{className:"text-xs text-gray-400",children:"Offline"}),ie&&c.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Following"})]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>xe(F.id),className:`p-2 rounded-lg transition-colors ${ie?"bg-green-100 text-green-600 hover:bg-green-200":"bg-blue-100 text-blue-600 hover:bg-blue-200"}`,children:ie?c.jsx(tE,{className:"w-4 h-4"}):c.jsx(nE,{className:"w-4 h-4"})}),c.jsx(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>yt(F),className:"bg-indigo-600 text-white p-2 rounded-lg hover:bg-indigo-700 transition-colors",children:c.jsx(cl,{className:"w-4 h-4"})})]})]},F.id)})})]})]})]}),c.jsx(Ss,{children:l&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Share Your Journey"}),c.jsx("button",{onClick:()=>u(!1),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(Os,{className:"w-5 h-5 text-gray-500"})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:fe.map(F=>c.jsx("button",{onClick:()=>j(F.value),className:`p-3 rounded-lg border-2 transition-colors text-left ${I===F.value?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:F.emoji}),c.jsx("span",{className:"text-sm font-medium",children:F.label})]})},F.value))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Message"}),c.jsx("textarea",{value:v,onChange:F=>x(F.target.value),placeholder:"Share your thoughts, progress, or ask for support...",className:"w-full h-32 p-3 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[v.length,"/500 characters"]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:ee,disabled:!v.trim()||D,className:"flex-1 bg-indigo-600 text-white px-4 py-3 rounded-xl hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[c.jsx(Dv,{className:"w-4 h-4"}),c.jsx("span",{children:D?"Posting...":"Share Post"})]})]})]})})}),c.jsx(Ss,{children:h&&_&&c.jsx(O$,{user:_,currentUser:t,onClose:()=>{f(!1),w(null)}})}),c.jsx(Ss,{children:p&&T&&c.jsx(M$,{post:T,currentUser:t,userData:e,onClose:()=>{g(!1),E(null)},onCommentAdded:at})}),c.jsx(nu,{})]})},U$=()=>{an();const{currentUser:t,userData:e,logout:n,updateUserData:r}=Yt(),{unlockedItems:s}=so(),[i,o]=C.useState(!1),[a,l]=C.useState((e==null?void 0:e.displayName)||""),[u,h]=C.useState(!1),f=async()=>{try{await n()}catch(x){console.error("Logout error:",x)}},p=async()=>{if(a.trim()){h(!0);try{await r({displayName:a.trim()}),o(!1),Y.success("Profile updated successfully!")}catch(x){console.error("Error updating profile:",x),Y.error("Failed to update profile")}finally{h(!1)}}},g=x=>{navigator.clipboard.writeText(x),Y.success("Copied to clipboard!")},_=[{id:1,title:"First Steps",description:"Started your journey",icon:"🌱",unlocked:!0,date:"2024-01-15"},{id:2,title:"Week Warrior",description:"7 days streak",icon:"🔥",unlocked:(e==null?void 0:e.streak)>=7,date:(e==null?void 0:e.streak)>=7?"2024-01-22":null},{id:3,title:"Community Helper",description:"Helped 10 people",icon:"🤝",unlocked:!1,date:null},{id:4,title:"Gratitude Master",description:"30 gratitude entries",icon:"🙏",unlocked:!1,date:null},{id:5,title:"Level 10 Hero",description:"Reached level 10",icon:"⭐",unlocked:(e==null?void 0:e.level)>=10,date:(e==null?void 0:e.level)>=10?"2024-02-01":null},{id:6,title:"Month Champion",description:"30 days streak",icon:"🏆",unlocked:(e==null?void 0:e.streak)>=30,date:(e==null?void 0:e.streak)>=30?"2024-02-15":null}],w=[{label:"Current Streak",value:`${(e==null?void 0:e.streak)||0} days`,icon:mC,color:"text-red-500",bgColor:"bg-red-100"},{label:"Total XP",value:(e==null?void 0:e.xp)||0,icon:Rh,color:"text-yellow-500",bgColor:"bg-yellow-100"},{label:"Coins Earned",value:(e==null?void 0:e.coins)||0,icon:kn,color:"text-green-500",bgColor:"bg-green-100"},{label:"Current Level",value:(e==null?void 0:e.level)||1,icon:Zg,color:"text-purple-500",bgColor:"bg-purple-100"}],T=[{icon:i$,label:"Edit Profile",action:()=>o(!0),color:"text-blue-600"},{icon:gC,label:"Language",action:()=>Y.info("Language settings coming soon!"),color:"text-green-600"},{icon:KB,label:"Notifications",action:()=>Y.info("Notification settings coming soon!"),color:"text-yellow-600"},{icon:Vv,label:"Privacy & Security",action:()=>Y.info("Privacy settings coming soon!"),color:"text-purple-600"},{icon:e$,label:"Help & Support",action:()=>Y.info("Help center coming soon!"),color:"text-indigo-600"}];if(!e)return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})});const E=new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"}),v=Object.values(s).reduce((x,I)=>x+I.length,0);return c.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20",children:[c.jsx("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 px-4 py-8",children:c.jsx("div",{className:"max-w-md mx-auto",children:c.jsxs(U.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[c.jsxs("div",{className:"relative mb-4",children:[c.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto shadow-lg",children:c.jsx("span",{className:"text-3xl font-bold text-indigo-600",children:e.displayName.charAt(0).toUpperCase()})}),c.jsx("button",{className:"absolute bottom-0 right-1/2 transform translate-x-8 bg-white rounded-full p-2 shadow-lg hover:shadow-xl transition-shadow",children:c.jsx(WB,{className:"w-4 h-4 text-gray-600"})})]}),c.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:e.displayName}),c.jsx("p",{className:"text-indigo-200 text-sm mb-2",children:t==null?void 0:t.email}),c.jsxs("div",{className:"flex items-center justify-center space-x-4 text-indigo-200 text-sm",children:[c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Mf,{className:"w-4 h-4"}),c.jsxs("span",{children:["Joined ",E]})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Ki,{className:"w-4 h-4"}),c.jsxs("span",{children:["Level ",e.level]})]})]}),v>0&&c.jsx("div",{className:"mt-3 bg-white bg-opacity-20 rounded-full px-4 py-2 inline-block",children:c.jsxs("span",{className:"text-white text-sm font-medium",children:["🎁 ",v," items unlocked"]})})]})})}),c.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl shadow-lg p-6 border border-green-200",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:c.jsx(Wi,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"আমাদের সাপোর্ট করুন"}),c.jsx("p",{className:"text-green-700 text-sm",children:"Support Our Mission"})]})]}),c.jsx("p",{className:"text-gray-700 text-sm mb-4 leading-relaxed",children:"আমাদের এই যাত্রাকে সচল রাখতে এবং অন্যদের সাহায্য করতে আপনার সহায়তার প্রয়োজন। অল্প দানও একটি বড় পরিবর্তন আনতে পারে।"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Zb,{className:"w-4 h-4 text-pink-600"}),c.jsx("span",{className:"font-medium text-gray-800",children:"bKash"})]}),c.jsx("button",{onClick:()=>g("01712345678"),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:c.jsx(Xb,{className:"w-4 h-4 text-gray-500"})})]}),c.jsx("p",{className:"text-gray-600 text-sm font-mono",children:"01712345678"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Personal Number"})]}),c.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Zb,{className:"w-4 h-4 text-orange-600"}),c.jsx("span",{className:"font-medium text-gray-800",children:"Nagad"})]}),c.jsx("button",{onClick:()=>g("01712345678"),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:c.jsx(Xb,{className:"w-4 h-4 text-gray-500"})})]}),c.jsx("p",{className:"text-gray-600 text-sm font-mono",children:"01712345678"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Personal Number"})]})]}),c.jsx("div",{className:"mt-4 p-3 bg-green-100 rounded-lg",children:c.jsx("p",{className:"text-green-800 text-xs text-center",children:"💚 আপনার প্রতিটি অবদান আমাদের কমিউনিটিকে আরও শক্তিশালী করে তোলে"})})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"Your Progress"}),c.jsx("div",{className:"grid grid-cols-2 gap-4",children:w.map((x,I)=>c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:`w-12 h-12 ${x.bgColor} rounded-full flex items-center justify-center mx-auto mb-2`,children:c.jsx(x.icon,{className:`w-6 h-6 ${x.color}`})}),c.jsx("div",{className:"text-xl font-bold text-gray-800",children:x.value}),c.jsx("div",{className:"text-xs text-gray-500",children:x.label})]},I))})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"Achievements"}),c.jsx("div",{className:"grid grid-cols-3 gap-3",children:_.map(x=>c.jsxs(U.div,{whileHover:{scale:1.05},className:`p-3 rounded-xl text-center transition-all ${x.unlocked?"bg-gradient-to-br from-yellow-100 to-orange-100 border-2 border-yellow-300":"bg-gray-100 border-2 border-gray-200"}`,children:[c.jsx("div",{className:`text-2xl mb-1 ${x.unlocked?"":"grayscale opacity-50"}`,children:x.icon}),c.jsx("div",{className:`text-xs font-medium ${x.unlocked?"text-gray-800":"text-gray-500"}`,children:x.title}),x.unlocked&&x.date&&c.jsx("div",{className:"text-xs text-gray-500 mt-1",children:x.date})]},x.id))})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"Settings"}),c.jsx("div",{className:"space-y-1",children:T.map((x,I)=>c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:x.action,className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(x.icon,{className:`w-5 h-5 ${x.color}`}),c.jsx("span",{className:"font-medium text-gray-700",children:x.label})]}),c.jsx(YB,{className:"w-4 h-4 text-gray-400"})]},I))})]}),c.jsxs(U.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,className:"w-full bg-red-500 text-white py-4 rounded-xl font-medium hover:bg-red-600 transition-colors flex items-center justify-center space-x-2",children:[c.jsx(n$,{className:"w-5 h-5"}),c.jsx("span",{children:"Logout"})]})]}),i&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Edit Profile"}),c.jsx("button",{onClick:()=>o(!1),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(Lv,{className:"w-5 h-5 text-gray-500"})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Name"}),c.jsx("input",{type:"text",value:a,onChange:x=>l(x.target.value),className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter your name"})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx("button",{onClick:()=>o(!1),className:"flex-1 px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),c.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,disabled:!a.trim()||u,className:"flex-1 bg-indigo-600 text-white px-4 py-3 rounded-xl hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Saving...":"Save Changes"})]})]})]})}),c.jsx(nu,{})]})},B$=({reward:t,userCoins:e,onConfirm:n,onCancel:r,loading:s})=>{const i=e>=t.cost;return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(t.icon,{className:"w-8 h-8 text-white"})}),c.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"নিশ্চিত করুন"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"আপনি কি নিশ্চিতভাবে এই পুরস্কারটি রিডিম করতে চান?"})]}),c.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"font-medium text-gray-800",children:t.name}),c.jsxs("div",{className:"flex items-center space-x-1 text-yellow-600",children:[c.jsx(kn,{className:"w-4 h-4"}),c.jsx("span",{className:"font-bold",children:t.cost})]})]}),c.jsx("p",{className:"text-gray-600 text-sm mb-3",children:t.description}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-gray-500",children:"আপনার বর্তমান কয়েন:"}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(kn,{className:"w-4 h-4 text-yellow-600"}),c.jsx("span",{className:"font-bold text-gray-800",children:e})]})]}),i&&c.jsxs("div",{className:"flex items-center justify-between text-sm mt-2 pt-2 border-t border-gray-200",children:[c.jsx("span",{className:"text-gray-500",children:"রিডিমের পর অবশিষ্ট:"}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(kn,{className:"w-4 h-4 text-green-600"}),c.jsx("span",{className:"font-bold text-green-600",children:e-t.cost})]})]})]}),!i&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:c.jsxs("p",{className:"text-red-700 text-sm text-center",children:["দুঃখিত! আপনার পর্যাপ্ত কয়েন নেই। আরও ",t.cost-e," কয়েন প্রয়োজন।"]})}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"না"}),c.jsx(U.button,{whileHover:{scale:i?1.02:1},whileTap:{scale:i?.98:1},onClick:n,disabled:!i||s,className:`flex-1 px-4 py-3 rounded-xl font-medium transition-colors ${i&&!s?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:s?"প্রক্রিয়াকরণ...":"হ্যাঁ, নিশ্চিত"})]})]})})},sE=({reward:t,userCoins:e,onRedeem:n,isUnlocked:r=!1,isActive:s=!1,onActivate:i})=>{const o=e>=t.cost;return c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},className:`bg-white rounded-xl shadow-lg p-6 border transition-all duration-300 hover:shadow-xl ${r?"border-green-300 bg-green-50":"border-gray-100"}`,children:[c.jsxs("div",{className:"relative mb-4",children:[c.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3 ${t.type==="theme"?"bg-gradient-to-br from-blue-400 to-cyan-500":t.type==="badge"?"bg-gradient-to-br from-yellow-400 to-orange-500":t.type==="tree-design"?"bg-gradient-to-br from-pink-400 to-rose-500":t.type==="recharge"?"bg-gradient-to-br from-green-400 to-emerald-500":t.type==="music"?"bg-gradient-to-br from-purple-400 to-indigo-500":"bg-gradient-to-br from-red-400 to-pink-500"}`,children:c.jsx(t.icon,{className:"w-8 h-8 text-white"})}),r&&c.jsx("div",{className:"absolute -top-2 -right-2",children:c.jsxs("div",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[c.jsx(GB,{className:"w-3 h-3"}),c.jsx("span",{children:"Unlocked"})]})}),s&&c.jsx("div",{className:"absolute -bottom-2 -right-2",children:c.jsxs("div",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[c.jsx(Rh,{className:"w-3 h-3"}),c.jsx("span",{children:"Active"})]})}),t.cost>=5e3&&!r&&c.jsx("div",{className:"absolute -top-2 -left-2",children:c.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[c.jsx(XB,{className:"w-3 h-3"}),c.jsx("span",{children:"Premium"})]})})]}),c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("h3",{className:"font-bold text-gray-800 mb-2 text-lg",children:t.name}),c.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-3",children:t.description}),!r&&c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[c.jsx("span",{className:"text-gray-500 text-sm",children:"মূল্য:"}),c.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-100 px-3 py-1 rounded-full",children:[c.jsx(kn,{className:"w-4 h-4 text-yellow-600"}),c.jsx("span",{className:"font-bold text-yellow-700",children:t.cost}),c.jsx("span",{className:"text-yellow-600 text-sm",children:"কয়েন"})]})]})]}),r?c.jsxs("div",{className:"space-y-2",children:[t.category==="in-app"&&i&&c.jsx(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(t),disabled:s,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-200 ${s?"bg-blue-100 text-blue-700 cursor-default":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl"}`,children:s?c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(Rh,{className:"w-4 h-4"}),c.jsx("span",{children:"সক্রিয়"})]}):c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(a$,{className:"w-4 h-4"}),c.jsx("span",{children:"সক্রিয় করুন"})]})}),c.jsx("div",{className:"bg-green-100 text-green-700 py-2 px-4 rounded-xl text-center text-sm font-medium",children:"✅ আনলক করা হয়েছে"})]}):c.jsx(U.button,{whileHover:{scale:o?1.05:1},whileTap:{scale:o?.95:1},onClick:()=>n(t),disabled:!o,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-200 ${o?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:from-indigo-700 hover:to-purple-700 shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-50"}`,children:o?c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(Nc,{className:"w-4 h-4"}),c.jsx("span",{children:"রিডিম করুন"})]}):c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(kn,{className:"w-4 h-4"}),c.jsx("span",{children:"অপর্যাপ্ত কয়েন"})]})}),!o&&!r&&c.jsxs("p",{className:"text-center text-xs text-red-500 mt-2",children:["আরও ",t.cost-e," কয়েন প্রয়োজন"]})]})},$$=()=>{an();const{userData:t,updateUserData:e,currentUser:n}=Yt(),{unlockedItems:r,activeTheme:s,hasUnlockedItem:i}=so(),[o,a]=C.useState(null),[l,u]=C.useState(!1),h=[{id:"ocean-theme",name:"প্রিমিয়াম ওশেন থিম",description:"আপনার অ্যাপকে একটি শান্ত এবং সুন্দর সমুদ্রের থিম দিন।",cost:500,icon:s$,category:"in-app",type:"theme",unlockCategory:"themes"},{id:"legendary-badge",name:"লিজেন্ডারি ব্যাজ",description:"আপনার প্রোফাইলে এই বিশেষ ব্যাজটি প্রদর্শন করে আপনার অর্জনকে দেখান।",cost:1500,icon:Ki,category:"in-app",type:"badge",unlockCategory:"badges"},{id:"cherry-blossom-tree",name:"চেরি ব্লসম ট্রি",description:"আপনার সঙ্কল্প বৃক্ষটিকে একটি সুন্দর চেরি ব্লসম গাছে পরিণত করুন।",cost:1e3,icon:QB,category:"in-app",type:"tree-design",unlockCategory:"features"},{id:"focus-music",name:"ফোকাস মোড মিউজিক",description:"অ্যাপ ব্যবহারের সময় শোনার জন্য একটি শান্ত এবং মেডিটেটিভ সাউন্ডট্র্যাক আনলক করুন।",cost:750,icon:ZB,category:"in-app",type:"music",unlockCategory:"music"}],f=[{id:"mobile-recharge-20",name:"২০ টাকা মোবাইল রিচার্জ",description:"আপনার যেকোনো লোকাল অপারেটরে ২০ টাকা রিচার্জ নিন।",cost:5e3,icon:d$,category:"real-world",type:"recharge"},{id:"plant-tree",name:"একটি বাস্তব গাছ লাগান",description:"আপনার নামে একটি বাস্তব গাছ লাগানো হবে এবং আপনি তার একটি ডিজিটাল সার্টিফিকেট পাবেন।",cost:1e4,icon:g$,category:"real-world",type:"donation"},{id:"charity-donation",name:"১০ টাকা চ্যারিটিতে দান করুন",description:"আপনার কয়েন ব্যবহার করে কোনো একটি মহৎ উদ্দেশ্যে সাহায্য করুন।",cost:1e3,icon:Wi,category:"real-world",type:"donation"}],p=async _=>{if(!n||!t){Y.error("Please log in to redeem rewards");return}if(t.coins<_.cost){Y.error("Insufficient coins");return}u(!0);try{await uv(he,async w=>{const T=We(he,"users",n.uid),E=await w.get(T);if(!E.exists())throw new Error("User document does not exist");const v=E.data().coins||0;if(v<_.cost)throw new Error("Insufficient coins");const x={coins:v-_.cost};if(_.category==="in-app"&&_.unlockCategory){const I=E.data().unlocked_items||{themes:[],badges:[],music:[],features:[]};I[_.unlockCategory].includes(_.id)||(I[_.unlockCategory].push(_.id),x.unlocked_items=I)}if(w.update(T,x),_.category==="real-world"){const I=We(Wt(he,"redemptionRequests"));w.set(I,{userId:n.uid,userEmail:n.email,userName:t.displayName,rewardId:_.id,rewardName:_.name,rewardType:_.type,cost:_.cost,status:"pending",createdAt:new Date,processedAt:null,notes:""})}}),await e({coins:t.coins-_.cost}),a(null),_.category==="real-world"?Y.success("Redemption request submitted! We will process it within 24 hours."):Y.success(`${_.name} has been unlocked!`)}catch(w){console.error("Error redeeming reward:",w),Y.error("Failed to redeem reward. Please try again.")}finally{u(!1)}},g=async _=>{if(n)try{await Tr(We(he,"users",n.uid),{active_theme:_.id}),Y.success(`${_.name} activated!`)}catch(w){console.error("Error activating theme:",w),Y.error("Failed to activate theme")}};return t?c.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20",children:[c.jsx("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 px-4 py-8",children:c.jsx("div",{className:"max-w-md mx-auto text-center",children:c.jsxs(U.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-white",children:[c.jsx("div",{className:"flex items-center justify-center mb-4",children:c.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-full",children:c.jsx(Nc,{className:"w-8 h-8"})})}),c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"পুরস্কার কেন্দ্র"}),c.jsx("p",{className:"text-indigo-200 text-sm",children:"Rewards Center"})]})})}),c.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[c.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(kn,{className:"w-8 h-8 text-white"})}),c.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"আপনার বর্তমান কয়েন"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(U.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.2},className:"text-4xl font-bold text-yellow-600",children:t.coins.toLocaleString()}),c.jsx(Xg,{className:"w-6 h-6 text-yellow-500"})]}),c.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Keep completing daily tasks to earn more coins!"})]})}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[c.jsx(Rh,{className:"w-5 h-5 text-indigo-600"}),c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ইন-অ্যাপ পুরস্কার"}),c.jsx("span",{className:"text-sm text-gray-500",children:"(In-App Rewards)"})]}),c.jsx("div",{className:"grid gap-4",children:h.map((_,w)=>c.jsx(U.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*w},children:c.jsx(sE,{reward:_,userCoins:t.coins,onRedeem:a,isUnlocked:i(_.unlockCategory,_.id),isActive:_.type==="theme"&&s===_.id,onActivate:_.type==="theme"?g:void 0})},_.id))})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[c.jsx(Nc,{className:"w-5 h-5 text-green-600"}),c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"বাস্তব পুরস্কার"}),c.jsx("span",{className:"text-sm text-gray-500",children:"(Real-World Rewards)"})]}),c.jsx("div",{className:"grid gap-4",children:f.map((_,w)=>c.jsx(U.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*w},children:c.jsx(sE,{reward:_,userCoins:t.coins,onRedeem:a})},_.id))})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-6 border border-blue-200",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center space-x-2",children:[c.jsx(Xg,{className:"w-5 h-5 text-blue-600"}),c.jsx("span",{children:"আরও কয়েন অর্জন করুন"})]}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),c.jsx("span",{children:"Daily check-in: +5 coins"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),c.jsx("span",{children:"Create a post: +3 coins"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),c.jsx("span",{children:"Complete mental workout: +10 coins"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),c.jsx("span",{children:"Write gratitude entry: +2 coins"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),c.jsx("span",{children:"Level up: +50 coins"})]})]})]})]}),c.jsx(Ss,{children:o&&c.jsx(B$,{reward:o,userCoins:t.coins,onConfirm:()=>p(o),onCancel:()=>a(null),loading:l})}),c.jsx(nu,{})]}):c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading rewards..."})]})})},z$=()=>{an();const{userData:t,updateUserData:e}=Yt(),n=Yi(),[r,s]=C.useState(!1),[i,o]=C.useState("inhale"),[a,l]=C.useState(0),[u,h]=C.useState(0),[f,p]=C.useState(120),[g,_]=C.useState([]),[w,T]=C.useState(0),[E,v]=C.useState(!1),[x,I]=C.useState(!1),[j,D]=C.useState(!1);C.useEffect(()=>{let se;return r&&f>0&&(se=setInterval(()=>{l(z=>{const $=z+1;return i==="inhale"&&$>=4?(o("hold"),0):i==="hold"&&$>=7?(o("exhale"),0):i==="exhale"&&$>=8?(o("inhale"),h(G=>G+1),0):$}),p(z=>z-1)},1e3)),()=>clearInterval(se)},[r,i,f]),C.useEffect(()=>{f<=0&&r&&(s(!1),Y.success("শ্বাস-প্রশ্বাসের ব্যায়াম সম্পন্ন! +5 কয়েন",{duration:4e3}),t&&e({coins:t.coins+5}))},[f,r,t,e]);const N=()=>{s(!0),o("inhale"),l(0),h(0),p(120)},b=()=>{s(!1),l(0),p(120)},S=()=>{s(!1),o("inhale"),l(0),h(0),p(120)},P=()=>{const se=Array.from({length:10},(z,$)=>20-$*2);_(se),T(0),v(!1),I(!0)},R=se=>{const z=g[w];se===z?w===g.length-1?(v(!0),Y.success("মানসিক ব্যায়াম সম্পন্ন! +8 কয়েন",{duration:4e3}),t&&e({coins:t.coins+8})):T($=>$+1):(Y.error("ভুল নম্বর! আবার চেষ্টা করুন।"),T(0))},V=()=>{I(!1),v(!1),T(0),_([])},A=()=>{D(!0),Y.success("শারীরিক কার্যকলাপ সম্পন্ন! +5 কয়েন",{duration:4e3}),t&&e({coins:t.coins+5})},ne=()=>{const se=a/(i==="inhale"?4:i==="hold"?7:8);return i==="inhale"?.5+se*.5:i==="hold"?1:1-se*.5},me=()=>{switch(i){case"inhale":return"শ্বাস নিন / Inhale";case"hold":return"ধরে রাখুন / Hold";case"exhale":return"শ্বাস ছাড়ুন / Exhale"}},fe=se=>{const z=Math.floor(se/60),$=se%60;return`${z}:${$.toString().padStart(2,"0")}`};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 pb-20",children:[c.jsx("div",{className:"bg-gradient-to-br from-red-500 to-pink-600 px-4 py-8",children:c.jsx("div",{className:"max-w-md mx-auto",children:c.jsxs(U.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center mb-4",children:[c.jsx("button",{onClick:()=>n("/dashboard"),className:"p-2 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-colors mr-4",children:c.jsx(fC,{className:"w-5 h-5 text-white"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-white",children:"জরুরি সাহায্য"}),c.jsx("p",{className:"text-red-100 text-sm",children:"Urge Helper - Red Alert"})]})]})})}),c.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-8 text-center text-white shadow-xl",children:[c.jsx(U.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.2},className:"mb-4",children:c.jsx(Wi,{className:"w-16 h-16 mx-auto text-white"})}),c.jsx("h2",{className:"text-xl font-bold mb-2",children:"প্রতিটি 'না' বলা আপনাকে আরও শক্তিশালী করে!"}),c.jsx("p",{className:"text-blue-100 text-sm",children:'Every "No" makes you stronger!'})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(rE,{className:"w-5 h-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"শ্বাস-প্রশ্বাসের ব্যায়াম"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"২ মিনিটের শান্তিদায়ক শ্বাস-প্রশ্বাসের ব্যায়াম"})]})]}),!r&&f===120?c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:N,className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 text-white py-4 rounded-xl font-medium hover:from-blue-600 hover:to-cyan-700 transition-all flex items-center justify-center space-x-2",children:[c.jsx(Jg,{className:"w-5 h-5"}),c.jsx("span",{children:"শুরু করুন (Start)"})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[c.jsx(U.div,{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-400 to-cyan-500 flex items-center justify-center shadow-lg",animate:{scale:r?ne():.5},transition:{duration:i==="inhale"?4:i==="hold"?0:8,ease:"easeInOut"},children:c.jsx(rE,{className:"w-12 h-12 text-white"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-2",children:me()}),c.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-600",children:[c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(p$,{className:"w-4 h-4"}),c.jsx("span",{children:fe(f)})]}),c.jsxs("div",{children:["চক্র: ",u]})]})]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r?b:N,className:"flex-1 bg-gradient-to-r from-blue-500 to-cyan-600 text-white py-3 rounded-xl font-medium hover:from-blue-600 hover:to-cyan-700 transition-all flex items-center justify-center space-x-2",children:[r?c.jsx(vC,{className:"w-4 h-4"}):c.jsx(Jg,{className:"w-4 h-4"}),c.jsx("span",{children:r?"বিরতি":"চালু"})]}),c.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:S,className:"px-4 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors",children:c.jsx(jv,{className:"w-4 h-4"})})]})]})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:c.jsx(Kg,{className:"w-5 h-5 text-purple-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"মনের ব্যায়াম"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"এই কাজটি করে আপনার মন অন্য দিকে মনোনিবেশ করুন"})]})]}),x?E?c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx(U.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:c.jsx(Ns,{className:"w-8 h-8 text-green-600"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"দারুণ করেছেন!"}),c.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"মানসিক ব্যায়াম সম্পন্ন হয়েছে। +8 কয়েন অর্জিত!"}),c.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:V,className:"bg-purple-600 text-white px-6 py-2 rounded-xl hover:bg-purple-700 transition-colors",children:"আবার করুন"})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("p",{className:"text-gray-700 mb-2",children:["পরবর্তী সংখ্যা: ",c.jsx("span",{className:"font-bold text-purple-600",children:g[w]})]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["অগ্রগতি: ",w+1,"/",g.length]})]}),c.jsx("div",{className:"grid grid-cols-5 gap-2",children:[20,18,16,14,12,10,8,6,4,2].map(se=>c.jsx(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(se),className:`aspect-square rounded-xl font-bold text-lg transition-all ${w>g.indexOf(se)?"bg-green-100 text-green-600 cursor-not-allowed":"bg-purple-100 text-purple-700 hover:bg-purple-200"}`,disabled:w>g.indexOf(se),children:se},se))}),c.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:V,className:"w-full bg-gray-200 text-gray-700 py-2 rounded-xl hover:bg-gray-300 transition-colors",children:"রিসেট করুন"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-purple-50 rounded-xl p-4",children:[c.jsx("p",{className:"text-purple-800 text-sm font-medium mb-2",children:"নির্দেশনা:"}),c.jsx("p",{className:"text-purple-700 text-sm",children:"২০ থেকে ২ পর্যন্ত জোড় সংখ্যাগুলো ক্রমানুসারে ক্লিক করুন। ভুল হলে আবার শুরু থেকে করতে হবে।"})]}),c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:P,className:"w-full bg-gradient-to-r from-purple-500 to-indigo-600 text-white py-4 rounded-xl font-medium hover:from-purple-600 hover:to-indigo-700 transition-all flex items-center justify-center space-x-2",children:[c.jsx(Kg,{className:"w-5 h-5"}),c.jsx("span",{children:"শুরু করুন (Start)"})]})]})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:c.jsx(Jb,{className:"w-5 h-5 text-green-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"শারীরিক কার্যকলাপ"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"শারীরিক কার্যকলাপ আপনার মন পরিষ্কার করবে"})]})]}),j?c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx(U.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:c.jsx(Ns,{className:"w-8 h-8 text-green-600"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"দারুণ করেছেন!"}),c.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"শারীরিক কার্যকলাপ সম্পন্ন হয়েছে। +5 কয়েন অর্জিত!"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-600",children:[c.jsx(kn,{className:"w-5 h-5"}),c.jsx("span",{className:"font-bold",children:"+5 কয়েন"})]})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[c.jsx("div",{className:"text-6xl mb-4",children:"🏃‍♂️"}),c.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"১০ বার স্কোয়াট করুন"}),c.jsx("p",{className:"text-green-700 text-sm mb-4",children:"পা কাঁধের সমান প্রশস্ত করে দাঁড়ান। ধীরে ধীরে বসুন এবং উঠুন।"}),c.jsx(U.div,{className:"w-16 h-16 bg-green-200 rounded-full mx-auto mb-4 flex items-center justify-center",animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:c.jsx(Jb,{className:"w-8 h-8 text-green-600"})})]}),c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:A,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-4 rounded-xl font-medium hover:from-green-600 hover:to-emerald-700 transition-all flex items-center justify-center space-x-2",children:[c.jsx(Ns,{className:"w-5 h-5"}),c.jsx("span",{children:"সম্পন্ন করেছি (I'm Done)"})]})]})]}),c.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[c.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n("/community"),className:"w-full bg-gradient-to-r from-orange-500 to-red-600 text-white py-6 rounded-2xl font-bold text-lg hover:from-orange-600 hover:to-red-700 transition-all flex items-center justify-center space-x-3 shadow-lg",children:[c.jsx(Xo,{className:"w-6 h-6"}),c.jsx("span",{children:"সাপোর্ট প্রয়োজন? সম্প্রদায়ে সাহায্য চান"})]}),c.jsx("p",{className:"text-center text-gray-600 text-sm mt-2",children:"Need Support? Seek Help in the Community"})]})]}),c.jsx(nu,{})]})},ce=t=>typeof t=="string",ul=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},iE=t=>t==null?"":""+t,H$=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},q$=/###/g,oE=t=>t&&t.indexOf("###")>-1?t.replace(q$,"."):t,aE=t=>!t||ce(t),Hl=(t,e,n)=>{const r=ce(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(aE(t))return{};const i=oE(r[s]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++s}return aE(t)?{}:{obj:t,k:oE(r[s])}},lE=(t,e,n)=>{const{obj:r,k:s}=Hl(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),a=Hl(t,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=Hl(t,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},K$=(t,e,n,r)=>{const{obj:s,k:i}=Hl(t,e,Object);s[i]=s[i]||[],s[i].push(n)},Vh=(t,e)=>{const{obj:n,k:r}=Hl(t,e);if(n)return n[r]},W$=(t,e,n)=>{const r=Vh(t,n);return r!==void 0?r:Vh(e,n)},EC=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ce(t[r])||t[r]instanceof String||ce(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):EC(t[r],e[r],n):t[r]=e[r]);return t},vo=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var G$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Q$=t=>ce(t)?t.replace(/[&<>"'\/]/g,e=>G$[e]):t;class Y${constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const J$=[" ",",","?","!",";"],X$=new Y$(20),Z$=(t,e,n)=>{e=e||"",n=n||"";const r=J$.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const s=X$.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(t);if(!i){const o=t.indexOf(n);o>0&&!s.test(t.substring(0,o))&&(i=!0)}return i},ey=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let s=t;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let o,a="";for(let l=i;l<r.length;++l)if(l!==i&&(a+=n),a+=r[l],o=s[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}s=o}return s},Lh=t=>t&&t.replace("_","-"),e8={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class Oh{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||e8,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(ce(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Oh(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Oh(this.logger,e)}}var Yn=new Oh;class Ff{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,l]=o;for(let u=0;u<l;u++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let u=0;u<l;u++)a.apply(a,[e,...r])})}}class cE extends Ff{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):ce(r)&&i?a.push(...r.split(i)):a.push(r)));const l=Vh(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||!ce(r)?l:ey(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),s=n,n=a[1]),this.addNamespaces(n),lE(this.data,a,s),i.silent||this.emit("added",e,n,r,s)}addResources(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(ce(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),s=r,r=n,n=a[1]),this.addNamespaces(n);let l=Vh(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?EC(l,r,i):l={...l,...r},lE(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var TC={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,s))}),e}};const uE={};class Mh extends Ff{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),H$(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Yn.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Z$(e,r,s);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:ce(i)?[i]:i};const u=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(s)}return{key:e,namespaces:ce(i)?[i]:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],n),l=a[a.length-1],u=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(h){const I=n.nsSeparator||this.options.nsSeparator;return s?{res:`${l}${I}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${I}${o}`}return s?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const f=this.resolve(e,n);let p=f&&f.res;const g=f&&f.usedKey||o,_=f&&f.exactUsedKey||o,w=Object.prototype.toString.apply(p),T=["[object Number]","[object Function]","[object RegExp]"],E=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,x=!ce(p)&&typeof p!="boolean"&&typeof p!="number";if(v&&p&&x&&T.indexOf(w)<0&&!(ce(E)&&Array.isArray(p))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const I=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,p,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(f.res=I,f.usedParams=this.getUsedParamsDetails(n),f):I}if(i){const I=Array.isArray(p),j=I?[]:{},D=I?_:g;for(const N in p)if(Object.prototype.hasOwnProperty.call(p,N)){const b=`${D}${i}${N}`;j[N]=this.translate(b,{...n,joinArrays:!1,ns:a}),j[N]===b&&(j[N]=p[N])}p=j}}else if(v&&ce(E)&&Array.isArray(p))p=p.join(E),p&&(p=this.extendTranslation(p,e,n,r));else{let I=!1,j=!1;const D=n.count!==void 0&&!ce(n.count),N=Mh.hasDefaultValue(n),b=D?this.pluralResolver.getSuffix(u,n.count,n):"",S=n.ordinal&&D?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",P=D&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),R=P&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${b}`]||n[`defaultValue${S}`]||n.defaultValue;!this.isValidLookup(p)&&N&&(I=!0,p=R),this.isValidLookup(p)||(j=!0,p=o);const A=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&j?void 0:p,ne=N&&R!==p&&this.options.updateMissing;if(j||I||ne){if(this.logger.log(ne?"updateKey":"missingKey",u,l,o,ne?R:p),i){const z=this.resolve(o,{...n,keySeparator:!1});z&&z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let me=[];const fe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&fe&&fe[0])for(let z=0;z<fe.length;z++)me.push(fe[z]);else this.options.saveMissingTo==="all"?me=this.languageUtils.toResolveHierarchy(n.lng||this.language):me.push(n.lng||this.language);const se=(z,$,G)=>{const ee=N&&G!==p?G:A;this.options.missingKeyHandler?this.options.missingKeyHandler(z,l,$,ee,ne,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(z,l,$,ee,ne,n),this.emit("missingKey",z,l,$,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&D?me.forEach(z=>{const $=this.pluralResolver.getSuffixes(z,n);P&&n[`defaultValue${this.options.pluralSeparator}zero`]&&$.indexOf(`${this.options.pluralSeparator}zero`)<0&&$.push(`${this.options.pluralSeparator}zero`),$.forEach(G=>{se([z],o+G,n[`defaultValue${G}`]||R)})}):se(me,o,R))}p=this.extendTranslation(p,e,n,f,r),j&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${o}`),(j||I)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,I?p:void 0):p=this.options.parseMissingKeyHandler(p))}return s?(f.res=p,f.usedParams=this.getUsedParamsDetails(n),f):p}extendTranslation(e,n,r,s,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=ce(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(u){const p=e.match(this.interpolator.nestingRegexp);h=p&&p.length}let f=r.replace&&!ce(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||s.usedLng,r),u){const p=e.match(this.interpolator.nestingRegexp),g=p&&p.length;h<g&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,g=new Array(p),_=0;_<p;_++)g[_]=arguments[_];return i&&i[0]===g[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):o.translate(...g,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=ce(a)?[a]:a;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=TC.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,s,i,o,a;return ce(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),h=u.key;s=h;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const p=n.count!==void 0&&!ce(n.count),g=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),_=n.context!==void 0&&(ce(n.context)||typeof n.context=="number")&&n.context!=="",w=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(T=>{this.isValidLookup(r)||(a=T,!uE[`${w[0]}-${T}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(uE[`${w[0]}-${T}`]=!0,this.logger.warn(`key "${s}" for languages "${w.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(E=>{if(this.isValidLookup(r))return;o=E;const v=[h];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(v,h,E,T,n);else{let I;p&&(I=this.pluralResolver.getSuffix(E,n.count,n));const j=`${this.options.pluralSeparator}zero`,D=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(v.push(h+I),n.ordinal&&I.indexOf(D)===0&&v.push(h+I.replace(D,this.options.pluralSeparator)),g&&v.push(h+j)),_){const N=`${h}${this.options.contextSeparator}${n.context}`;v.push(N),p&&(v.push(N+I),n.ordinal&&I.indexOf(D)===0&&v.push(N+I.replace(D,this.options.pluralSeparator)),g&&v.push(N+j))}}let x;for(;x=v.pop();)this.isValidLookup(r)||(i=x,r=this.getResource(E,T,x,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ce(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const tm=t=>t.charAt(0).toUpperCase()+t.slice(1);class dE{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Yn.create("languageUtils")}getScriptPartFromCode(e){if(e=Lh(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Lh(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(ce(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(s=>s.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=tm(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=tm(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=tm(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(i=>{if(i===s)return i;if(!(i.indexOf("-")<0&&s.indexOf("-")<0)&&(i.indexOf("-")>0&&s.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===s||i.indexOf(s)===0&&s.length>1))return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),ce(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return ce(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):ce(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}let t8=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],n8={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const r8=["v1","v2","v3"],s8=["v4"],hE={zero:0,one:1,two:2,few:3,many:4,other:5},i8=()=>{const t={};return t8.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:n8[e.fc]}})}),t};class o8{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Yn.create("pluralResolver"),(!this.options.compatibilityJSON||s8.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=i8(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Lh(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:s})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,n)}return this.pluralRulesCache[i]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((s,i)=>hE[s]-hE[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):r.numbers.map(s=>this.getSuffix(e,s,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,r);return s?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:this.getSuffixRetroCompatible(s,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let s=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const i=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!r8.includes(this.options.compatibilityJSON)}}const fE=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=W$(t,e,n);return!i&&s&&ce(n)&&(i=ey(t,n,r),i===void 0&&(i=ey(e,n,r))),i},nm=t=>t.replace(/\$/g,"$$$$");class a8{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Yn.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:u,unescapeSuffix:h,unescapePrefix:f,nestingPrefix:p,nestingPrefixEscaped:g,nestingSuffix:_,nestingSuffixEscaped:w,nestingOptionsSeparator:T,maxReplaces:E,alwaysFormat:v}=e.interpolation;this.escape=n!==void 0?n:Q$,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?vo(i):o||"{{",this.suffix=a?vo(a):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=h?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=p?vo(p):g||vo("$t("),this.nestingSuffix=_?vo(_):w||vo(")"),this.nestingOptionsSeparator=T||",",this.maxReplaces=E||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,s){let i,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const E=fE(n,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,r,{...s,...n,interpolationkey:g}):E}const _=g.split(this.formatSeparator),w=_.shift().trim(),T=_.join(this.formatSeparator).trim();return this.format(fE(n,l,w,this.options.keySeparator,this.options.ignoreJSONStructure),T,r,{...s,...n,interpolationkey:w})};this.resetRegExp();const h=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,f=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>nm(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?nm(this.escape(g)):nm(g)}].forEach(g=>{for(a=0;i=g.regex.exec(e);){const _=i[1].trim();if(o=u(_),o===void 0)if(typeof h=="function"){const T=h(e,i,s);o=ce(T)?T:""}else if(s&&Object.prototype.hasOwnProperty.call(s,_))o="";else if(f){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${_} for interpolating ${e}`),o="";else!ce(o)&&!this.useRawValueToEscape&&(o=iE(o));const w=g.safeValue(o);if(e=e.replace(i[0],w),f?(g.regex.lastIndex+=o.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,i,o;const a=(l,u)=>{const h=this.nestingOptionsSeparator;if(l.indexOf(h)<0)return l;const f=l.split(new RegExp(`${h}[ ]*{`));let p=`{${f[1]}`;l=f[0],p=this.interpolate(p,o);const g=p.match(/'/g),_=p.match(/"/g);(g&&g.length%2===0&&!_||_.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),u&&(o={...u,...o})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,w),`${l}${h}${p}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&!ce(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const h=s[1].split(this.formatSeparator).map(f=>f.trim());s[1]=h.shift(),l=h,u=!0}if(i=n(a.call(this,s[1].trim(),o),o),i&&s[0]===e&&!ce(i))return i;ce(i)||(i=iE(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),u&&(i=l.reduce((h,f)=>this.format(h,f,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const l8=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),h=a.trim();n[h]||(n[h]=u),u==="false"&&(n[h]=!1),u==="true"&&(n[h]=!0),isNaN(u)||(n[h]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},xo=t=>{const e={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=r+JSON.stringify(i);let a=e[o];return a||(a=t(Lh(r),s),e[o]=a),a(n)}};class c8{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Yn.create("formatter"),this.options=e,this.formats={number:xo((n,r)=>{const s=new Intl.NumberFormat(n,{...r});return i=>s.format(i)}),currency:xo((n,r)=>{const s=new Intl.NumberFormat(n,{...r,style:"currency"});return i=>s.format(i)}),datetime:xo((n,r)=>{const s=new Intl.DateTimeFormat(n,{...r});return i=>s.format(i)}),relativetime:xo((n,r)=>{const s=new Intl.RelativeTimeFormat(n,{...r});return i=>s.format(i,r.range||"day")}),list:xo((n,r)=>{const s=new Intl.ListFormat(n,{...r});return i=>s.format(i)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=xo(n)}format(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,l)=>{const{formatName:u,formatOptions:h}=l8(l);if(this.formats[u]){let f=a;try{const p=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},g=p.locale||p.lng||s.locale||s.lng||r;f=this.formats[u](a,g,{...h,...s,...p})}catch(p){this.logger.warn(p)}return f}else this.logger.warn(`there was no format function for ${u}`);return a},e)}}const u8=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class d8 extends Ff{constructor(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Yn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,s.backend,s)}queueLoad(e,n,r,s){const i={},o={},a={},l={};return e.forEach(u=>{let h=!0;n.forEach(f=>{const p=`${u}|${f}`;!r.reload&&this.store.hasResourceBundle(u,f)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,h=!1,o[p]===void 0&&(o[p]=!0),i[p]===void 0&&(i[p]=!0),l[f]===void 0&&(l[f]=!0)))}),h||(a[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const s=e.split("|"),i=s[0],o=s[1];n&&this.emit("failedLoading",i,o,n),!n&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(l=>{K$(l.loaded,[i],o),u8(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{a[u]||(a[u]={});const h=l.loaded[u];h.length&&h.forEach(f=>{a[u][f]===void 0&&(a[u][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:i,callback:o});return}this.readingCalls++;const a=(u,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&h&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,i*2,o)},i);return}o(u,h)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(h=>a(null,h)).catch(a):a(null,u)}catch(u){a(u)}return}return l(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();ce(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ce(n)&&(n=[n]);const i=this.queueLoad(e,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let h;u.length===5?h=u(e,n,r,s,l):h=u(e,n,r,s),h&&typeof h.then=="function"?h.then(f=>a(null,f)).catch(a):a(null,h)}catch(h){a(h)}else u(e,n,r,s,a,l)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const pE=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ce(t[1])&&(e.defaultValue=t[1]),ce(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),mE=t=>(ce(t.ns)&&(t.ns=[t.ns]),ce(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ce(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),Xu=()=>{},h8=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class kc extends Ff{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=mE(e),this.services={},this.logger=Yn,this.modules={external:[]},h8(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(ce(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const s=pE();this.options={...s,...this.options,...mE(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Yn.init(i(this.modules.logger),this.options):Yn.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:typeof Intl<"u"&&(h=c8);const f=new dE(this.options);this.store=new cE(this.options.resources,this.options);const p=this.services;p.logger=Yn,p.resourceStore=this.store,p.languageUtils=f,p.pluralResolver=new o8(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(p.formatter=i(h),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new a8(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new d8(i(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(g){for(var _=arguments.length,w=new Array(_>1?_-1:0),T=1;T<_;T++)w[T-1]=arguments[T];e.emit(g,...w)}),this.modules.languageDetector&&(p.languageDetector=i(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=i(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new Mh(this.services,this.options),this.translator.on("*",function(g){for(var _=arguments.length,w=new Array(_>1?_-1:0),T=1;T<_;T++)w[T-1]=arguments[T];e.emit(g,...w)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Xu),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=function(){return e.store[h](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=function(){return e.store[h](...arguments),e}});const l=ul(),u=()=>{const h=(f,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),r(f,p)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xu;const s=ce(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(u=>{u!=="cimode"&&i.indexOf(u)<0&&i.push(u)})};s?o(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(i,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const s=ul();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Xu),this.services.backendConnector.reload(e,n,i=>{s.resolve(),r(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&TC.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const s=ul();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,s.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=ce(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,h=>{o(h,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,n,r){var s=this;const i=function(o,a){let l;if(typeof a!="object"){for(var u=arguments.length,h=new Array(u>2?u-2:0),f=2;f<u;f++)h[f-2]=arguments[f];l=s.options.overloadTranslationOptionHandler([o,a].concat(h))}else l={...a};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||i.keyPrefix);const p=s.options.keySeparator||".";let g;return l.keyPrefix&&Array.isArray(o)?g=o.map(_=>`${l.keyPrefix}${p}${_}`):g=l.keyPrefix?`${l.keyPrefix}${p}${o}`:o,s.t(g,l)};return ce(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const u=this.services.backendConnector.state[`${a}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!s||o(i,e)))}loadNamespaces(e,n){const r=ul();return this.options.ns?(ce(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=ul();ce(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new dE(pE());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new kc(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xu;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new kc(s);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new cE(this.store.data,s),i.services.resourceStore=i.store),i.translator=new Mh(i.services,s),i.translator.on("*",function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),h=1;h<l;h++)u[h-1]=arguments[h];i.emit(a,...u)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Mt=kc.createInstance();Mt.createInstance=kc.createInstance;Mt.createInstance;Mt.dir;Mt.init;Mt.loadResources;Mt.reloadResources;Mt.use;Mt.changeLanguage;Mt.getFixedT;Mt.t;Mt.exists;Mt.setDefaultNamespace;Mt.hasLoadedNamespace;Mt.loadNamespaces;Mt.loadLanguages;function f8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cc(t){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cc(t)}function p8(t,e){if(Cc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function m8(t){var e=p8(t,"string");return Cc(e)=="symbol"?e:e+""}function g8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m8(r.key),r)}}function y8(t,e,n){return e&&g8(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}var IC=[],v8=IC.forEach,x8=IC.slice;function w8(t){return v8.call(x8.call(arguments,1),function(e){if(e)for(var n in e)t[n]===void 0&&(t[n]=e[n])}),t}var gE=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,_8=function(e,n,r){var s=r||{};s.path=s.path||"/";var i=encodeURIComponent(n),o="".concat(e,"=").concat(i);if(s.maxAge>0){var a=s.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(s.domain){if(!gE.test(s.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(s.domain)}if(s.path){if(!gE.test(s.path))throw new TypeError("option path is invalid");o+="; Path=".concat(s.path)}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(s.expires.toUTCString())}if(s.httpOnly&&(o+="; HttpOnly"),s.secure&&(o+="; Secure"),s.sameSite){var l=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},yE={create:function(e,n,r,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+r*60*1e3)),s&&(i.domain=s),document.cookie=_8(e,encodeURIComponent(n),i)},read:function(e){for(var n="".concat(e,"="),r=document.cookie.split(";"),s=0;s<r.length;s++){for(var i=r[s];i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(n)===0)return i.substring(n.length,i.length)}return null},remove:function(e){this.create(e,"",-1)}},b8={name:"cookie",lookup:function(e){var n;if(e.lookupCookie&&typeof document<"u"){var r=yE.read(e.lookupCookie);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupCookie&&typeof document<"u"&&yE.create(n.lookupCookie,e,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},E8={name:"querystring",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var s=r.substring(1),i=s.split("&"),o=0;o<i.length;o++){var a=i[o].indexOf("=");if(a>0){var l=i[o].substring(0,a);l===e.lookupQuerystring&&(n=i[o].substring(a+1))}}}return n}},dl=null,vE=function(){if(dl!==null)return dl;try{dl=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{dl=!1}return dl},T8={name:"localStorage",lookup:function(e){var n;if(e.lookupLocalStorage&&vE()){var r=window.localStorage.getItem(e.lookupLocalStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupLocalStorage&&vE()&&window.localStorage.setItem(n.lookupLocalStorage,e)}},hl=null,xE=function(){if(hl!==null)return hl;try{hl=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{hl=!1}return hl},I8={name:"sessionStorage",lookup:function(e){var n;if(e.lookupSessionStorage&&xE()){var r=window.sessionStorage.getItem(e.lookupSessionStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupSessionStorage&&xE()&&window.sessionStorage.setItem(n.lookupSessionStorage,e)}},S8={name:"navigator",lookup:function(e){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)n.push(navigator.languages[r]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},N8={name:"htmlTag",lookup:function(e){var n,r=e.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},k8={name:"path",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof r[e.lookupFromPathIndex]!="string")return;n=r[e.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},C8={name:"subdomain",lookup:function(e){var n=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}},SC=!1;try{document.cookie,SC=!0}catch{}var NC=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];SC||NC.splice(1,1);function P8(){return{order:NC,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var kC=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f8(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}return y8(t,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n||{languageUtils:{}},this.options=w8(r,this.options||{},P8()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(i){return i.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(b8),this.addDetector(E8),this.addDetector(T8),this.addDetector(I8),this.addDetector(S8),this.addDetector(N8),this.addDetector(k8),this.addDetector(C8)}},{key:"addDetector",value:function(n){return this.detectors[n.name]=n,this}},{key:"detect",value:function(n){var r=this;n||(n=this.options.order);var s=[];return n.forEach(function(i){if(r.detectors[i]){var o=r.detectors[i].lookup(r.options);o&&typeof o=="string"&&(o=[o]),o&&(s=s.concat(o))}}),s=s.map(function(i){return r.options.convertDetectedLanguage(i)}),this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}},{key:"cacheUserLanguage",value:function(n,r){var s=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||r.forEach(function(i){s.detectors[i]&&s.detectors[i].cacheUserLanguage(n,s.options)}))}}])}();kC.type="languageDetector";const A8={en:{translation:{dashboard:"Dashboard",community:"Community",rewards:"Rewards",profile:"Profile",login:"Login",signup:"Sign Up",email:"Email",password:"Password",confirmPassword:"Confirm Password",loginWithGoogle:"Login with Google",createAccount:"Create Account",alreadyHaveAccount:"Already have an account?",dontHaveAccount:"Don't have an account?",welcomeBack:"Welcome back",currentStreak:"Current Streak",days:"days",hours:"hours",minutes:"minutes",level:"Level",xp:"XP",coins:"Coins",checkIn:"Daily Check-in",urgeHelper:"Urge Helper",gratitudeDiary:"Gratitude Diary",successVault:"Success Vault",selectLanguage:"Select Your Language",continue:"Continue",levelUp:"Level Up!",xpEarned:"XP Earned",coinsEarned:"Coins Earned",mentalWorkout:"Mental Workout",solveThePuzzle:"Solve this puzzle to strengthen your mind",createPost:"Create Post",upvote:"Upvote",close:"Close",save:"Save",cancel:"Cancel",submit:"Submit",loading:"Loading...",error:"Error",success:"Success"}},bn:{translation:{dashboard:"ড্যাশবোর্ড",community:"কমিউনিটি",rewards:"পুরস্কার",profile:"প্রোফাইল",login:"লগইন",signup:"সাইন আপ",email:"ইমেইল",password:"পাসওয়ার্ড",confirmPassword:"পাসওয়ার্ড নিশ্চিত করুন",loginWithGoogle:"গুগলে লগইন করুন",createAccount:"অ্যাকাউন্ট তৈরি করুন",alreadyHaveAccount:"ইতিমধ্যে অ্যাকাউন্ট আছে?",dontHaveAccount:"অ্যাকাউন্ট নেই?",welcomeBack:"স্বাগতম",currentStreak:"বর্তমান ধারা",days:"দিন",hours:"ঘন্টা",minutes:"মিনিট",level:"লেভেল",xp:"এক্সপি",coins:"কয়েন",checkIn:"দৈনিক চেক-ইন",urgeHelper:"তাড়না সহায়ক",gratitudeDiary:"কৃতজ্ঞতার ডায়েরি",successVault:"সাফল্যের ভান্ডার",selectLanguage:"আপনার ভাষা নির্বাচন করুন",continue:"চালিয়ে যান",levelUp:"লেভেল আপ!",xpEarned:"এক্সপি অর্জিত",coinsEarned:"কয়েন অর্জিত",mentalWorkout:"মানসিক ব্যায়াম",solveThePuzzle:"আপনার মন শক্তিশালী করতে এই ধাঁধা সমাধান করুন",createPost:"পোস্ট তৈরি করুন",upvote:"আপভোট",close:"বন্ধ",save:"সংরক্ষণ",cancel:"বাতিল",submit:"জমা দিন",loading:"লোডিং...",error:"ত্রুটি",success:"সফল"}},hi:{translation:{dashboard:"डैशबोर्ड",community:"समुदाय",rewards:"पुरस्कार",profile:"प्रोफ़ाइल",login:"लॉगिन",signup:"साइन अप",email:"ईमेल",password:"पासवर्ड",confirmPassword:"पासवर्ड की पुष्टि करें",loginWithGoogle:"Google से लॉगिन करें",createAccount:"खाता बनाएं",alreadyHaveAccount:"पहले से खाता है?",dontHaveAccount:"खाता नहीं है?",welcomeBack:"वापसी पर स्वागत",currentStreak:"वर्तमान स्ट्रीक",days:"दिन",hours:"घंटे",minutes:"मिनट",level:"स्तर",xp:"एक्सपी",coins:"सिक्के",checkIn:"दैनिक चेक-इन",urgeHelper:"इच्छा सहायक",gratitudeDiary:"कृतज्ञता डायरी",successVault:"सफलता का खजाना",selectLanguage:"अपनी भाषा चुनें",continue:"जारी रखें",levelUp:"लेवल अप!",xpEarned:"एक्सपी अर्जित",coinsEarned:"सिक्के अर्जित",mentalWorkout:"मानसिक व्यायाम",solveThePuzzle:"अपने मन को मजबूत बनाने के लिए इस पहेली को हल करें",createPost:"पोस्ट बनाएं",upvote:"अपवोट",close:"बंद करें",save:"सेव करें",cancel:"रद्द करें",submit:"जमा करें",loading:"लोड हो रहा है...",error:"त्रुटि",success:"सफलता"}},ur:{translation:{dashboard:"ڈیش بورڈ",community:"کمیونٹی",rewards:"انعامات",profile:"پروفائل",login:"لاگ ان",signup:"سائن اپ",email:"ای میل",password:"پاس ورڈ",confirmPassword:"پاس ورڈ کی تصدیق کریں",loginWithGoogle:"گوگل سے لاگ ان کریں",createAccount:"اکاؤنٹ بنائیں",alreadyHaveAccount:"پہلے سے اکاؤنٹ ہے؟",dontHaveAccount:"اکاؤنٹ نہیں ہے؟",welcomeBack:"واپسی پر خوش آمدید",currentStreak:"موجودہ سلسلہ",days:"دن",hours:"گھنٹے",minutes:"منٹ",level:"سطح",xp:"ایکس پی",coins:"سکے",checkIn:"روزانہ چیک ان",urgeHelper:"خواہش کا مددگار",gratitudeDiary:"شکر گزاری کی ڈائری",successVault:"کامیابی کا خزانہ",selectLanguage:"اپنی زبان منتخب کریں",continue:"جari رکھیں",levelUp:"لیول اپ!",xpEarned:"ایکس پی حاصل",coinsEarned:"سکے حاصل",mentalWorkout:"ذہنی ورزش",solveThePuzzle:"اپنے دماغ کو مضبوط بنانے کے لیے یہ پہیلی حل کریں",createPost:"پوسٹ بنائیں",upvote:"اپ ووٹ",close:"بند کریں",save:"محفوظ کریں",cancel:"منسوخ کریں",submit:"جمع کریں",loading:"لوڈ ہو رہا ہے...",error:"خرابی",success:"کامیابی"}}};Mt.use(kC).use(PD).init({resources:A8,fallbackLng:"en",lng:"bn",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});const R8=()=>{const{currentUser:t,loading:e,userData:n}=Yt(),{i18n:r}=an(),[s,i]=C.useState(!1),[o,a]=C.useState(!1);C.useEffect(()=>{const u=localStorage.getItem("selectedLanguage");u?r.changeLanguage(u):i(!0)},[r]);const l=u=>{localStorage.setItem("selectedLanguage",u),r.changeLanguage(u),i(!1)};return e?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):s?c.jsx(E$,{onLanguageSelect:l}):c.jsx(NF,{children:c.jsx(j8,{currentUser:t,userData:n,showMotivationalPopup:o,setShowMotivationalPopup:a})})},j8=({currentUser:t,userData:e,showMotivationalPopup:n,setShowMotivationalPopup:r})=>{const{lastDailyPopup:s,loading:i}=so();return C.useEffect(()=>{if(t&&e&&!i){const o=new Date().toDateString();if(s!==o){const l=setTimeout(()=>{r(!0)},1e3);return()=>clearTimeout(l)}}},[t,e,s,i,r]),c.jsxs(Ij,{children:[c.jsxs(vj,{children:[c.jsx(ur,{path:"/",element:t?c.jsx(lr,{to:"/dashboard"}):c.jsx(lr,{to:"/login"})}),c.jsx(ur,{path:"/login",element:t?c.jsx(lr,{to:"/dashboard"}):c.jsx(I$,{})}),c.jsx(ur,{path:"/signup",element:t?c.jsx(lr,{to:"/dashboard"}):c.jsx(S$,{})}),c.jsx(ur,{path:"/dashboard",element:t?c.jsx(V$,{}):c.jsx(lr,{to:"/login"})}),c.jsx(ur,{path:"/community",element:t?c.jsx(F$,{}):c.jsx(lr,{to:"/login"})}),c.jsx(ur,{path:"/rewards",element:t?c.jsx($$,{}):c.jsx(lr,{to:"/login"})}),c.jsx(ur,{path:"/profile",element:t?c.jsx(U$,{}):c.jsx(lr,{to:"/login"})}),c.jsx(ur,{path:"/urge-helper",element:t?c.jsx(z$,{}):c.jsx(lr,{to:"/login"})})]}),n&&c.jsx(T$,{onClose:()=>r(!1)}),c.jsx(vD,{position:"top-center"})]})};function D8(){return c.jsx(SF,{children:c.jsx(R8,{})})}RI(document.getElementById("root")).render(c.jsx(C.StrictMode,{children:c.jsx(D8,{})}));
